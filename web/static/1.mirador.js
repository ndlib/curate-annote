(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{1e3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(n(0)),a=s(n(6));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onReceiveMessage=n.onReceiveMessage.bind(n),n.onLoad=n.onLoad.bind(n),n.sendMessage=n.sendMessage.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){window.addEventListener("message",this.onReceiveMessage),this._frame&&this._frame.addEventListener("load",this.onLoad)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",this.onReceiveMessage,!1)}},{key:"componentWillReceiveProps",value:function(e){this.props.postMessageData!==e.postMessageData&&this.sendMessage(e.postMessageData)}},{key:"onReceiveMessage",value:function(e){var t=this.props.handleReceiveMessage;t&&t(e)}},{key:"onLoad",value:function(){var e=this.props.handleReady;e&&e(),this.sendMessage(this.props.postMessageData)}},{key:"sendMessage",value:function(e){this._frame.contentWindow.postMessage(e,this.props.targetOrigin)}},{key:"render",value:function(){var e=this,n=this.props.attributes;return i.default.createElement("iframe",r({ref:function(t){e._frame=t}},Object.assign({},t.defaultAttributes,n)))}}]),t}(i.default.Component);c.propTypes={attributes:a.default.shape({frameBorder:a.default.oneOfType([a.default.string,a.default.number]),height:a.default.oneOfType([a.default.string,a.default.number]),name:a.default.string,scrolling:a.default.string,sandbox:a.default.string,srcDoc:a.default.string,src:a.default.string.isRequired,width:a.default.oneOfType([a.default.string,a.default.number])}),handleReceiveMessage:a.default.func,handleReady:a.default.func,postMessageData:a.default.any,targetOrigin:a.default.string},c.defaultProps={targetOrigin:"*"},c.defaultAttributes={frameBorder:0},t.default=c},1001:function(e,t,n){var r=n(229),o=n(1002),i=n(228),a=n(499),s=i((function(e,t){if(null==e)return[];var n=t.length;return n>1&&a(e,t[0],t[1])?t=[]:n>2&&a(t[0],t[1],t[2])&&(t=[t[0]]),o(e,r(t,1),[])}));e.exports=s},1002:function(e,t,n){var r=n(136),o=n(171),i=n(170),a=n(498),s=n(1003),c=n(173),l=n(1004),u=n(151),d=n(43);e.exports=function(e,t,n){t=t.length?r(t,(function(e){return d(e)?function(t){return o(t,1===e.length?e[0]:e)}:e})):[u];var p=-1;t=r(t,c(i));var h=a(e,(function(e,n,o){return{criteria:r(t,(function(t){return t(e)})),index:++p,value:e}}));return s(h,(function(e,t){return l(e,t,n)}))}},1003:function(e,t){e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},1004:function(e,t,n){var r=n(1005);e.exports=function(e,t,n){for(var o=-1,i=e.criteria,a=t.criteria,s=i.length,c=n.length;++o<s;){var l=r(i[o],a[o]);if(l)return o>=c?l:l*("desc"==n[o]?-1:1)}return e.index-t.index}},1005:function(e,t,n){var r=n(150);e.exports=function(e,t){if(e!==t){var n=void 0!==e,o=null===e,i=e==e,a=r(e),s=void 0!==t,c=null===t,l=t==t,u=r(t);if(!c&&!u&&!a&&e>t||a&&s&&l&&!c&&!u||o&&s&&l||!n&&l||!i)return 1;if(!o&&!a&&!u&&e<t||u&&n&&i&&!o&&!a||c&&n&&i||!s&&i||!l)return-1}return 0}},1006:function(e,t,n){var r=n(303),o=n(228),i=n(1007),a=n(230),s=o((function(e){return i(r(e,a))}));e.exports=s},1007:function(e,t,n){var r=n(491),o=n(229),i=n(496);e.exports=function(e,t,n){var a=e.length;if(a<2)return a?i(e[0]):[];for(var s=-1,c=Array(a);++s<a;)for(var l=e[s],u=-1;++u<a;)u!=s&&(c[s]=r(c[s]||l,e[u],t,n));return i(o(c,1),t,n)}},1008:function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(0)),i=(0,r(n(25)).default)(o.default.createElement("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"AddCircleOutlineSharp");t.default=i},1009:function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(0)),i=(0,r(n(25)).default)(o.default.createElement("path",{d:"M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"RemoveCircleOutlineSharp");t.default=i},1010:function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(0)),i=(0,r(n(25)).default)(o.default.createElement("path",{d:"M10 16.5l6-4.5-6-4.5v9zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"PlayCircleOutlineSharp");t.default=i},1011:function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(0)),i=(0,r(n(25)).default)(o.default.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"}),"InfoSharp");t.default=i},1012:function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(0)),i=(0,r(n(25)).default)(o.default.createElement("path",{d:"M10.08 10.86c.05-.33.16-.62.3-.87s.34-.46.59-.62c.24-.15.54-.22.91-.23.23.01.44.05.63.13.2.09.38.21.52.36s.25.33.34.53.13.42.14.64h1.79c-.02-.47-.11-.9-.28-1.29s-.4-.73-.7-1.01-.66-.5-1.08-.66-.88-.23-1.39-.23c-.65 0-1.22.11-1.7.34s-.88.53-1.2.92-.56.84-.71 1.36S8 11.29 8 11.87v.27c0 .58.08 1.12.23 1.64s.39.97.71 1.35.72.69 1.2.91c.48.22 1.05.34 1.7.34.47 0 .91-.08 1.32-.23s.77-.36 1.08-.63.56-.58.74-.94.29-.74.3-1.15h-1.79c-.01.21-.06.4-.15.58s-.21.33-.36.46-.32.23-.52.3c-.19.07-.39.09-.6.1-.36-.01-.66-.08-.89-.23-.25-.16-.45-.37-.59-.62s-.25-.55-.3-.88-.08-.67-.08-1v-.27c0-.35.03-.68.08-1.01zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"CopyrightSharp");t.default=i},1013:function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(0)),i=(0,r(n(25)).default)(o.default.createElement("path",{d:"M11.99 18.54l-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27-7.38 5.74zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27L12 16z"}),"LayersSharp");t.default=i},1014:function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(0)),i=(0,r(n(25)).default)(o.default.createElement("path",{d:"M10 17l5-5-5-5v10z"}),"ArrowRightSharp");t.default=i},1015:function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(0)),i=(0,r(n(25)).default)(o.default.createElement("path",{d:"M14 7l-5 5 5 5V7z"}),"ArrowLeftSharp");t.default=i},1016:function(e,t,n){var r=n(1017),o=n(1018);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var i={insert:"head",singleton:!1};r(o,i);e.exports=o.locals||{}},1017:function(e,t,n){"use strict";var r,o=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),a=[];function s(e){for(var t=-1,n=0;n<a.length;n++)if(a[n].identifier===e){t=n;break}return t}function c(e,t){for(var n={},r=[],o=0;o<e.length;o++){var i=e[o],c=t.base?i[0]+t.base:i[0],l=n[c]||0,u="".concat(c," ").concat(l);n[c]=l+1;var d=s(u),p={css:i[1],media:i[2],sourceMap:i[3]};-1!==d?(a[d].references++,a[d].updater(p)):a.push({identifier:u,updater:g(p,t),references:1}),r.push(u)}return r}function l(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var o=n.nc;o&&(r.nonce=o)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var a=i(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var u,d=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function p(e,t,n,r){var o=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=d(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function h(e,t,n){var r=n.css,o=n.media,i=n.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),i&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var f=null,m=0;function g(e,t){var n,r,o;if(t.singleton){var i=m++;n=f||(f=l(t)),r=p.bind(null,n,i,!1),o=p.bind(null,n,i,!0)}else n=l(t),r=h.bind(null,n,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=o());var n=c(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var o=s(n[r]);a[o].references--}for(var i=c(e,t),l=0;l<n.length;l++){var u=s(n[l]);0===a[u].references&&(a[u].updater(),a.splice(u,1))}n=i}}}},1018:function(e,t,n){(t=n(1019)(!1)).push([e.i,"/**\n * @license\n * Copyright 2019 Kevin Verdieck, originally developed at Palantir Technologies, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n.mosaic {\n  height: 100%;\n  width: 100%;\n}\n.mosaic,\n.mosaic > * {\n  box-sizing: border-box;\n}\n.mosaic .mosaic-zero-state {\n  position: absolute;\n  top: 6px;\n  right: 6px;\n  bottom: 6px;\n  left: 6px;\n  width: auto;\n  height: auto;\n  z-index: 1;\n}\n.mosaic-root {\n  position: absolute;\n  top: 3px;\n  right: 3px;\n  bottom: 3px;\n  left: 3px;\n}\n.mosaic-split {\n  position: absolute;\n  z-index: 1;\n  touch-action: none;\n}\n.mosaic-split:hover {\n  background: black;\n}\n.mosaic-split .mosaic-split-line {\n  position: absolute;\n}\n.mosaic-split.-row {\n  margin-left: -3px;\n  width: 6px;\n  cursor: ew-resize;\n}\n.mosaic-split.-row .mosaic-split-line {\n  top: 0;\n  bottom: 0;\n  left: 3px;\n  right: 3px;\n}\n.mosaic-split.-column {\n  margin-top: -3px;\n  height: 6px;\n  cursor: ns-resize;\n}\n.mosaic-split.-column .mosaic-split-line {\n  top: 3px;\n  bottom: 3px;\n  left: 0;\n  right: 0;\n}\n.mosaic-tile {\n  position: absolute;\n  margin: 3px;\n}\n.mosaic-tile > * {\n  height: 100%;\n  width: 100%;\n}\n.mosaic-drop-target {\n  position: relative;\n}\n.mosaic-drop-target.drop-target-hover .drop-target-container {\n  display: block;\n}\n.mosaic-drop-target.mosaic > .drop-target-container .drop-target.left {\n  right: calc(100% -  10px );\n}\n.mosaic-drop-target.mosaic > .drop-target-container .drop-target.right {\n  left: calc(100% -  10px );\n}\n.mosaic-drop-target.mosaic > .drop-target-container .drop-target.bottom {\n  top: calc(100% -  10px );\n}\n.mosaic-drop-target.mosaic > .drop-target-container .drop-target.top {\n  bottom: calc(100% -  10px );\n}\n.mosaic-drop-target .drop-target-container {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  display: none;\n}\n.mosaic-drop-target .drop-target-container.-dragging {\n  display: block;\n}\n.mosaic-drop-target .drop-target-container .drop-target {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  background: rgba(0, 0, 0, 0.2);\n  border: 2px solid black;\n  opacity: 0;\n  z-index: 5;\n}\n.mosaic-drop-target .drop-target-container .drop-target.left {\n  right: calc(100% -  30% );\n}\n.mosaic-drop-target .drop-target-container .drop-target.right {\n  left: calc(100% -  30% );\n}\n.mosaic-drop-target .drop-target-container .drop-target.bottom {\n  top: calc(100% -  30% );\n}\n.mosaic-drop-target .drop-target-container .drop-target.top {\n  bottom: calc(100% -  30% );\n}\n.mosaic-drop-target .drop-target-container .drop-target.drop-target-hover {\n  opacity: 1;\n}\n.mosaic-drop-target .drop-target-container .drop-target.drop-target-hover.left {\n  right: calc(100% -  50% );\n}\n.mosaic-drop-target .drop-target-container .drop-target.drop-target-hover.right {\n  left: calc(100% -  50% );\n}\n.mosaic-drop-target .drop-target-container .drop-target.drop-target-hover.bottom {\n  top: calc(100% -  50% );\n}\n.mosaic-drop-target .drop-target-container .drop-target.drop-target-hover.top {\n  bottom: calc(100% -  50% );\n}\n.mosaic-window,\n.mosaic-preview {\n  position: relative;\n  display: -webkit-box;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n          flex-direction: column;\n  overflow: hidden;\n  box-shadow: 0 0 1px rgba(0, 0, 0, 0.2);\n}\n.mosaic-window .mosaic-window-toolbar,\n.mosaic-preview .mosaic-window-toolbar {\n  z-index: 4;\n  display: -webkit-box;\n  display: flex;\n  -webkit-box-pack: justify;\n          justify-content: space-between;\n  -webkit-box-align: center;\n          align-items: center;\n  flex-shrink: 0;\n  height: 30px;\n  background: white;\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);\n}\n.mosaic-window .mosaic-window-toolbar.draggable,\n.mosaic-preview .mosaic-window-toolbar.draggable {\n  cursor: move;\n}\n.mosaic-window .mosaic-window-title,\n.mosaic-preview .mosaic-window-title {\n  padding-left: 15px;\n  -webkit-box-flex: 1;\n          flex: 1;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n  min-height: 18px;\n}\n.mosaic-window .mosaic-window-controls,\n.mosaic-preview .mosaic-window-controls {\n  display: -webkit-box;\n  display: flex;\n  height: 100%;\n}\n.mosaic-window .mosaic-window-controls .separator,\n.mosaic-preview .mosaic-window-controls .separator {\n  height: 20px;\n  border-left: 1px solid black;\n  margin: 5px 4px;\n}\n.mosaic-window .mosaic-window-body,\n.mosaic-preview .mosaic-window-body {\n  position: relative;\n  -webkit-box-flex: 1;\n          flex: 1;\n  height: 0;\n  background: white;\n  z-index: 1;\n  overflow: hidden;\n}\n.mosaic-window .mosaic-window-additional-actions-bar,\n.mosaic-preview .mosaic-window-additional-actions-bar {\n  position: absolute;\n  top: 30px;\n  right: 0;\n  bottom: initial;\n  left: 0;\n  height: 0;\n  overflow: hidden;\n  background: white;\n  -webkit-box-pack: end;\n          justify-content: flex-end;\n  display: -webkit-box;\n  display: flex;\n  z-index: 3;\n}\n.mosaic-window .mosaic-window-additional-actions-bar .bp3-button,\n.mosaic-preview .mosaic-window-additional-actions-bar .bp3-button {\n  margin: 0;\n}\n.mosaic-window .mosaic-window-additional-actions-bar .bp3-button:after,\n.mosaic-preview .mosaic-window-additional-actions-bar .bp3-button:after {\n  display: none;\n}\n.mosaic-window .mosaic-window-body-overlay,\n.mosaic-preview .mosaic-window-body-overlay {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  opacity: 0;\n  background: white;\n  display: none;\n  z-index: 2;\n}\n.mosaic-window.additional-controls-open .mosaic-window-additional-actions-bar,\n.mosaic-preview.additional-controls-open .mosaic-window-additional-actions-bar {\n  height: 30px;\n}\n.mosaic-window.additional-controls-open .mosaic-window-body-overlay,\n.mosaic-preview.additional-controls-open .mosaic-window-body-overlay {\n  display: block;\n}\n.mosaic-window .mosaic-preview,\n.mosaic-preview .mosaic-preview {\n  height: 100%;\n  width: 100%;\n  position: absolute;\n  z-index: 0;\n  border: 1px solid black;\n  max-height: 400px;\n}\n.mosaic-window .mosaic-preview .mosaic-window-body,\n.mosaic-preview .mosaic-preview .mosaic-window-body {\n  display: -webkit-box;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n          flex-direction: column;\n  -webkit-box-align: center;\n          align-items: center;\n  -webkit-box-pack: center;\n          justify-content: center;\n}\n.mosaic-window .mosaic-preview h4,\n.mosaic-preview .mosaic-preview h4 {\n  margin-bottom: 10px;\n}\n.mosaic:not(.mosaic-blueprint-theme) .mosaic-default-control.close-button:before {\n  content: 'Close';\n}\n.mosaic:not(.mosaic-blueprint-theme) .mosaic-default-control.split-button:before {\n  content: 'Split';\n}\n.mosaic:not(.mosaic-blueprint-theme) .mosaic-default-control.replace-button:before {\n  content: 'Replace';\n}\n.mosaic:not(.mosaic-blueprint-theme) .mosaic-default-control.expand-button:before {\n  content: 'Expand';\n}\n.mosaic.mosaic-blueprint-theme {\n  background: #a7b6c2;\n}\n.mosaic.mosaic-blueprint-theme .mosaic-zero-state {\n  background: #e1e8ed;\n  border-radius: 3px;\n  box-shadow: 0 0 0 1px rgba(16, 22, 26, 0.15), 0 0 0 rgba(16, 22, 26, 0), 0 0 0 rgba(16, 22, 26, 0);\n}\n.mosaic.mosaic-blueprint-theme .mosaic-split:hover {\n  background: none;\n}\n.mosaic.mosaic-blueprint-theme .mosaic-split:hover .mosaic-split-line {\n  box-shadow: 0 0 0 1px #2b95d6;\n}\n.mosaic.mosaic-blueprint-theme.mosaic-drop-target .drop-target-container .drop-target,\n.mosaic.mosaic-blueprint-theme .mosaic-drop-target .drop-target-container .drop-target {\n  background: rgba(72, 175, 240, 0.2);\n  border: 2px solid #2b95d6;\n  -webkit-transition: opacity 100ms;\n  transition: opacity 100ms;\n  border-radius: 3px;\n}\n.mosaic.mosaic-blueprint-theme .mosaic-window,\n.mosaic.mosaic-blueprint-theme .mosaic-preview {\n  box-shadow: 0 0 0 1px rgba(16, 22, 26, 0.15), 0 0 0 rgba(16, 22, 26, 0), 0 0 0 rgba(16, 22, 26, 0);\n  border-radius: 3px;\n}\n.mosaic.mosaic-blueprint-theme .mosaic-window .mosaic-window-toolbar,\n.mosaic.mosaic-blueprint-theme .mosaic-preview .mosaic-window-toolbar {\n  box-shadow: 0 1px 1px rgba(16, 22, 26, 0.15);\n  border-top-right-radius: 3px;\n  border-top-left-radius: 3px;\n}\n.mosaic.mosaic-blueprint-theme .mosaic-window .mosaic-window-toolbar.draggable:hover,\n.mosaic.mosaic-blueprint-theme .mosaic-preview .mosaic-window-toolbar.draggable:hover {\n  background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#f5f8fa));\n  background: linear-gradient(to bottom, #ffffff, #f5f8fa);\n}\n.mosaic.mosaic-blueprint-theme .mosaic-window .mosaic-window-toolbar.draggable:hover .mosaic-window-title,\n.mosaic.mosaic-blueprint-theme .mosaic-preview .mosaic-window-toolbar.draggable:hover .mosaic-window-title {\n  color: #10161a;\n}\n.mosaic.mosaic-blueprint-theme .mosaic-window .mosaic-window-title,\n.mosaic.mosaic-blueprint-theme .mosaic-preview .mosaic-window-title {\n  font-weight: 600;\n  color: #394b59;\n}\n.mosaic.mosaic-blueprint-theme .mosaic-window .mosaic-window-controls .separator,\n.mosaic.mosaic-blueprint-theme .mosaic-preview .mosaic-window-controls .separator {\n  border-left: 1px solid #d8e1e8;\n}\n.mosaic.mosaic-blueprint-theme .mosaic-window .mosaic-window-controls .bp3-button,\n.mosaic.mosaic-blueprint-theme .mosaic-preview .mosaic-window-controls .bp3-button,\n.mosaic.mosaic-blueprint-theme .mosaic-window .mosaic-window-controls .bp3-button:before,\n.mosaic.mosaic-blueprint-theme .mosaic-preview .mosaic-window-controls .bp3-button:before {\n  color: #738694;\n}\n.mosaic.mosaic-blueprint-theme .mosaic-window .mosaic-window-body,\n.mosaic.mosaic-blueprint-theme .mosaic-preview .mosaic-window-body {\n  border-top-width: 0;\n  background: #f5f8fa;\n  border-bottom-right-radius: 3px;\n  border-bottom-left-radius: 3px;\n}\n.mosaic.mosaic-blueprint-theme .mosaic-window .mosaic-window-additional-actions-bar,\n.mosaic.mosaic-blueprint-theme .mosaic-preview .mosaic-window-additional-actions-bar {\n  -webkit-transition: height 250ms;\n  transition: height 250ms;\n  box-shadow: 0 1px 1px rgba(16, 22, 26, 0.15);\n}\n.mosaic.mosaic-blueprint-theme .mosaic-window .mosaic-window-additional-actions-bar .bp3-button,\n.mosaic.mosaic-blueprint-theme .mosaic-preview .mosaic-window-additional-actions-bar .bp3-button,\n.mosaic.mosaic-blueprint-theme .mosaic-window .mosaic-window-additional-actions-bar .bp3-button:before,\n.mosaic.mosaic-blueprint-theme .mosaic-preview .mosaic-window-additional-actions-bar .bp3-button:before {\n  color: #738694;\n}\n.mosaic.mosaic-blueprint-theme .mosaic-window.additional-controls-open .mosaic-window-toolbar,\n.mosaic.mosaic-blueprint-theme .mosaic-preview.additional-controls-open .mosaic-window-toolbar {\n  box-shadow: 0 1px 0 0 0 0 1px rgba(16, 22, 26, 0.15), 0 0 0 rgba(16, 22, 26, 0), 0 0 0 rgba(16, 22, 26, 0);\n}\n.mosaic.mosaic-blueprint-theme .mosaic-window .mosaic-preview,\n.mosaic.mosaic-blueprint-theme .mosaic-preview .mosaic-preview {\n  border: 1px solid #8a9ba8;\n}\n.mosaic.mosaic-blueprint-theme .mosaic-window .mosaic-preview h4,\n.mosaic.mosaic-blueprint-theme .mosaic-preview .mosaic-preview h4 {\n  color: #394b59;\n}\n.mosaic.mosaic-blueprint-theme.bp3-dark {\n  background: #202b33;\n}\n.mosaic.mosaic-blueprint-theme.bp3-dark .mosaic-zero-state {\n  background: #30404d;\n  box-shadow: 0 0 0 1px rgba(16, 22, 26, 0.4), 0 0 0 rgba(16, 22, 26, 0), 0 0 0 rgba(16, 22, 26, 0);\n}\n.mosaic.mosaic-blueprint-theme.bp3-dark .mosaic-split:hover .mosaic-split-line {\n  box-shadow: 0 0 0 1px #137cbd;\n}\n.mosaic.mosaic-blueprint-theme.bp3-dark.mosaic-drop-target .drop-target-container .drop-target,\n.mosaic.mosaic-blueprint-theme.bp3-dark .mosaic-drop-target .drop-target-container .drop-target {\n  background: rgba(16, 107, 163, 0.2);\n  border-color: #137cbd;\n}\n.mosaic.mosaic-blueprint-theme.bp3-dark .mosaic-window-toolbar,\n.mosaic.mosaic-blueprint-theme.bp3-dark .mosaic-window-additional-actions-bar {\n  background: #30404d;\n  box-shadow: 0 1px 1px rgba(16, 22, 26, 0.4);\n}\n.mosaic.mosaic-blueprint-theme.bp3-dark .mosaic-window,\n.mosaic.mosaic-blueprint-theme.bp3-dark .mosaic-preview {\n  box-shadow: 0 0 0 1px rgba(16, 22, 26, 0.4), 0 0 0 rgba(16, 22, 26, 0), 0 0 0 rgba(16, 22, 26, 0);\n}\n.mosaic.mosaic-blueprint-theme.bp3-dark .mosaic-window .mosaic-window-toolbar.draggable:hover,\n.mosaic.mosaic-blueprint-theme.bp3-dark .mosaic-preview .mosaic-window-toolbar.draggable:hover {\n  background: -webkit-gradient(linear, left top, left bottom, from(#394b59), to(#30404d));\n  background: linear-gradient(to bottom, #394b59, #30404d);\n}\n.mosaic.mosaic-blueprint-theme.bp3-dark .mosaic-window .mosaic-window-toolbar.draggable:hover .mosaic-window-title,\n.mosaic.mosaic-blueprint-theme.bp3-dark .mosaic-preview .mosaic-window-toolbar.draggable:hover .mosaic-window-title {\n  color: #ffffff;\n}\n.mosaic.mosaic-blueprint-theme.bp3-dark .mosaic-window .mosaic-window-title,\n.mosaic.mosaic-blueprint-theme.bp3-dark .mosaic-preview .mosaic-window-title {\n  color: #d8e1e8;\n}\n.mosaic.mosaic-blueprint-theme.bp3-dark .mosaic-window .mosaic-window-controls .separator,\n.mosaic.mosaic-blueprint-theme.bp3-dark .mosaic-preview .mosaic-window-controls .separator {\n  border-color: #5c7080;\n}\n.mosaic.mosaic-blueprint-theme.bp3-dark .mosaic-window .mosaic-window-controls .bp3-button,\n.mosaic.mosaic-blueprint-theme.bp3-dark .mosaic-preview .mosaic-window-controls .bp3-button,\n.mosaic.mosaic-blueprint-theme.bp3-dark .mosaic-window .mosaic-window-controls .bp3-button:before,\n.mosaic.mosaic-blueprint-theme.bp3-dark .mosaic-preview .mosaic-window-controls .bp3-button:before {\n  color: #a7b6c2;\n}\n.mosaic.mosaic-blueprint-theme.bp3-dark .mosaic-window .mosaic-window-body,\n.mosaic.mosaic-blueprint-theme.bp3-dark .mosaic-preview .mosaic-window-body {\n  background: #293742;\n}\n.mosaic.mosaic-blueprint-theme.bp3-dark .mosaic-window .mosaic-window-additional-actions-bar .bp3-button,\n.mosaic.mosaic-blueprint-theme.bp3-dark .mosaic-preview .mosaic-window-additional-actions-bar .bp3-button,\n.mosaic.mosaic-blueprint-theme.bp3-dark .mosaic-window .mosaic-window-additional-actions-bar .bp3-button:before,\n.mosaic.mosaic-blueprint-theme.bp3-dark .mosaic-preview .mosaic-window-additional-actions-bar .bp3-button:before {\n  color: #bfccd6;\n}\n.mosaic.mosaic-blueprint-theme.bp3-dark .mosaic-window.additional-controls-open .mosaic-window-toolbar,\n.mosaic.mosaic-blueprint-theme.bp3-dark .mosaic-preview.additional-controls-open .mosaic-window-toolbar {\n  box-shadow: 0 0 0 1px rgba(16, 22, 26, 0.4), 0 0 0 rgba(16, 22, 26, 0), 0 0 0 rgba(16, 22, 26, 0);\n}\n.mosaic.mosaic-blueprint-theme.bp3-dark .mosaic-window .mosaic-preview,\n.mosaic.mosaic-blueprint-theme.bp3-dark .mosaic-preview .mosaic-preview {\n  border-color: #5c7080;\n}\n.mosaic.mosaic-blueprint-theme.bp3-dark .mosaic-window .mosaic-preview h4,\n.mosaic.mosaic-blueprint-theme.bp3-dark .mosaic-preview .mosaic-preview h4 {\n  color: #ebf1f5;\n}",""]),e.exports=t},1019:function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var o=(a=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(c," */")),i=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[n].concat(i).concat([o]).join("\n")}var a,s,c;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(r)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(o[a]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);r&&o[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},1020:function(e,t,n){var r=n(491),o=n(229),i=n(228),a=n(230),s=i((function(e,t){return a(e)?r(e,o(t,1,a,!0)):[]}));e.exports=s},1021:function(e,t,n){"use strict";(function(n){function r(e){return"object"!=typeof e||"toString"in e?e:Object.prototype.toString.call(e).slice(8,-1)}Object.defineProperty(t,"__esModule",{value:!0});var o="object"==typeof n&&!0;function i(e,t){if(!e){if(o)throw new Error("Invariant failed");throw new Error(t())}}t.invariant=i;var a=Object.prototype.hasOwnProperty,s=Array.prototype.splice,c=Object.prototype.toString;function l(e){return c.call(e).slice(8,-1)}var u=Object.assign||function(e,t){return d(t).forEach((function(n){a.call(t,n)&&(e[n]=t[n])})),e},d="function"==typeof Object.getOwnPropertySymbols?function(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.keys(e)};function p(e){return Array.isArray(e)?u(e.constructor(e.length),e):"Map"===l(e)?new Map(e):"Set"===l(e)?new Set(e):e&&"object"==typeof e?u(Object.create(Object.getPrototypeOf(e)),e):e}var h=function(){function e(){this.commands=u({},f),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,t){return e===t},this.update.newContext=function(){return(new e).update}}return Object.defineProperty(e.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),e.prototype.extend=function(e,t){this.commands[e]=t},e.prototype.update=function(e,t){var n=this,r="function"==typeof t?{$apply:t}:t;Array.isArray(e)&&Array.isArray(r)||i(!Array.isArray(r),(function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."})),i("object"==typeof r&&null!==r,(function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: "+Object.keys(n.commands).join(", ")+"."}));var o=e;return d(r).forEach((function(t){if(a.call(n.commands,t)){var i=e===o;o=n.commands[t](r[t],o,r,e),i&&n.isEquals(o,e)&&(o=e)}else{var s="Map"===l(e)?n.update(e.get(t),r[t]):n.update(e[t],r[t]),c="Map"===l(o)?o.get(t):o[t];n.isEquals(s,c)&&(void 0!==s||a.call(e,t))||(o===e&&(o=p(e)),"Map"===l(o)?o.set(t,s):o[t]=s)}})),o},e}();t.Context=h;var f={$push:function(e,t,n){return g(t,n,"$push"),e.length?t.concat(e):t},$unshift:function(e,t,n){return g(t,n,"$unshift"),e.length?e.concat(t):t},$splice:function(e,t,n,o){return function(e,t){i(Array.isArray(e),(function(){return"Expected $splice target to be an array; got "+r(e)})),y(t.$splice)}(t,n),e.forEach((function(e){y(e),t===o&&e.length&&(t=p(o)),s.apply(t,e)})),t},$set:function(e,t,n){return function(e){i(1===Object.keys(e).length,(function(){return"Cannot have more than one key in an object with $set"}))}(n),e},$toggle:function(e,t){v(e,"$toggle");var n=e.length?p(t):t;return e.forEach((function(e){n[e]=!t[e]})),n},$unset:function(e,t,n,r){return v(e,"$unset"),e.forEach((function(e){Object.hasOwnProperty.call(t,e)&&(t===r&&(t=p(r)),delete t[e])})),t},$add:function(e,t,n,r){return b(t,"$add"),v(e,"$add"),"Map"===l(t)?e.forEach((function(e){var n=e[0],o=e[1];t===r&&t.get(n)!==o&&(t=p(r)),t.set(n,o)})):e.forEach((function(e){t!==r||t.has(e)||(t=p(r)),t.add(e)})),t},$remove:function(e,t,n,r){return b(t,"$remove"),v(e,"$remove"),e.forEach((function(e){t===r&&t.has(e)&&(t=p(r)),t.delete(e)})),t},$merge:function(e,t,n,o){var a,s;return a=t,i((s=e)&&"object"==typeof s,(function(){return"update(): $merge expects a spec of type 'object'; got "+r(s)})),i(a&&"object"==typeof a,(function(){return"update(): $merge expects a target of type 'object'; got "+r(a)})),d(e).forEach((function(n){e[n]!==t[n]&&(t===o&&(t=p(o)),t[n]=e[n])})),t},$apply:function(e,t){var n;return i("function"==typeof(n=e),(function(){return"update(): expected spec of $apply to be a function; got "+r(n)+"."})),e(t)}},m=new h;function g(e,t,n){i(Array.isArray(e),(function(){return"update(): expected target of "+r(n)+" to be an array; got "+r(e)+"."})),v(t[n],n)}function v(e,t){i(Array.isArray(e),(function(){return"update(): expected spec of "+r(t)+" to be an array; got "+r(e)+". Did you forget to wrap your parameter in an array?"}))}function y(e){i(Array.isArray(e),(function(){return"update(): expected spec of $splice to be an array of arrays; got "+r(e)+". Did you forget to wrap your parameters in an array?"}))}function b(e,t){var n=l(e);i("Map"===n||"Set"===n,(function(){return"update(): "+r(t)+" expects a target of type Set or Map; got "+r(n)}))}t.isEquals=m.update.isEquals,t.extend=m.extend,t.default=m.update,t.default.default=e.exports=u(t.default,t)}).call(this,n(502))},1022:function(e,t,n){var r=n(490),o=n(297);e.exports=function(e,t,n){var i=null==e?0:e.length;return i?(t=n||void 0===t?1:o(t),r(e,t<0?0:t,i)):[]}},1023:function(e,t,n){var r=n(490),o=n(297);e.exports=function(e,t,n){return e&&e.length?(t=n||void 0===t?1:o(t),r(e,0,t<0?0:t)):[]}},1024:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});
/**
 * @license
 * Copyright 2019 Kevin Verdieck, originally developed at Palantir Technologies, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var r=n(1025);Object.defineProperty(t,"Mosaic",{enumerable:!0,get:function(){return r.Mosaic}}),Object.defineProperty(t,"MosaicWithoutDragDropContext",{enumerable:!0,get:function(){return r.MosaicWithoutDragDropContext}});var o=n(941);Object.defineProperty(t,"MosaicDragType",{enumerable:!0,get:function(){return o.MosaicDragType}});var i=n(934);Object.defineProperty(t,"MosaicContext",{enumerable:!0,get:function(){return i.MosaicContext}}),Object.defineProperty(t,"MosaicWindowContext",{enumerable:!0,get:function(){return i.MosaicWindowContext}});var a=n(940);Object.defineProperty(t,"buildSpecFromUpdate",{enumerable:!0,get:function(){return a.buildSpecFromUpdate}}),Object.defineProperty(t,"createDragToUpdates",{enumerable:!0,get:function(){return a.createDragToUpdates}}),Object.defineProperty(t,"createExpandUpdate",{enumerable:!0,get:function(){return a.createExpandUpdate}}),Object.defineProperty(t,"createHideUpdate",{enumerable:!0,get:function(){return a.createHideUpdate}}),Object.defineProperty(t,"createRemoveUpdate",{enumerable:!0,get:function(){return a.createRemoveUpdate}}),Object.defineProperty(t,"updateTree",{enumerable:!0,get:function(){return a.updateTree}});var s=n(936);Object.defineProperty(t,"createBalancedTreeFromLeaves",{enumerable:!0,get:function(){return s.createBalancedTreeFromLeaves}}),Object.defineProperty(t,"Corner",{enumerable:!0,get:function(){return s.Corner}}),Object.defineProperty(t,"getAndAssertNodeAtPathExists",{enumerable:!0,get:function(){return s.getAndAssertNodeAtPathExists}}),Object.defineProperty(t,"getLeaves",{enumerable:!0,get:function(){return s.getLeaves}}),Object.defineProperty(t,"getNodeAtPath",{enumerable:!0,get:function(){return s.getNodeAtPath}}),Object.defineProperty(t,"getOtherBranch",{enumerable:!0,get:function(){return s.getOtherBranch}}),Object.defineProperty(t,"getOtherDirection",{enumerable:!0,get:function(){return s.getOtherDirection}}),Object.defineProperty(t,"getPathToCorner",{enumerable:!0,get:function(){return s.getPathToCorner}}),Object.defineProperty(t,"isParent",{enumerable:!0,get:function(){return s.isParent}});var c=n(1038);Object.defineProperty(t,"MosaicWindow",{enumerable:!0,get:function(){return c.MosaicWindow}});var l=n(937);Object.defineProperty(t,"createDefaultToolbarButton",{enumerable:!0,get:function(){return l.createDefaultToolbarButton}});var u=n(961);Object.defineProperty(t,"MosaicZeroState",{enumerable:!0,get:function(){return u.MosaicZeroState}});var d=n(968);Object.defineProperty(t,"Separator",{enumerable:!0,get:function(){return d.Separator}});var p=n(964);Object.defineProperty(t,"ExpandButton",{enumerable:!0,get:function(){return p.ExpandButton}});var h=n(966);Object.defineProperty(t,"ReplaceButton",{enumerable:!0,get:function(){return h.ReplaceButton}});var f=n(967);Object.defineProperty(t,"SplitButton",{enumerable:!0,get:function(){return f.SplitButton}});var m=n(965);Object.defineProperty(t,"RemoveButton",{enumerable:!0,get:function(){return m.RemoveButton}});var g=n(963);Object.defineProperty(t,"DEFAULT_CONTROLS_WITH_CREATION",{enumerable:!0,get:function(){return g.DEFAULT_CONTROLS_WITH_CREATION}}),Object.defineProperty(t,"DEFAULT_CONTROLS_WITHOUT_CREATION",{enumerable:!0,get:function(){return g.DEFAULT_CONTROLS_WITHOUT_CREATION}})},1025:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Mosaic=t.MosaicWithoutDragDropContext=void 0;var s=a(n(54)),c=(a(n(1026)),a(n(137)),a(n(1027)),a(n(0))),l=n(485),u=a(n(437)),d=a(n(435)),p=n(1029),h=n(934),f=n(1032),m=n(961),g=n(1037),v=n(940);n(936);function y(e){return null!=e.initialValue}var b=function(e){function t(){var t,n=e.apply(this,arguments)||this;return n.state={currentNode:null,lastInitialValue:null,mosaicId:null!==(t=n.props.mosaicId)&&void 0!==t?t:p.v4()},n.updateRoot=function(e,t){void 0===t&&(t=!1);var r=n.getRoot()||{};n.replaceRoot(v.updateTree(r,e),t)},n.replaceRoot=function(e,t){void 0===t&&(t=!1),n.props.onChange(e),!t&&n.props.onRelease&&n.props.onRelease(e),y(n.props)&&n.setState({currentNode:e})},n.actions={updateTree:n.updateRoot,remove:function(e){0===e.length?n.replaceRoot(null):n.updateRoot([v.createRemoveUpdate(n.getRoot(),e)])},expand:function(e,t){return void 0===t&&(t=70),n.updateRoot([v.createExpandUpdate(e,t)])},getRoot:function(){return n.getRoot()},hide:function(e){return n.updateRoot([v.createHideUpdate(e)])},replaceWith:function(e,t){return n.updateRoot([{path:e,spec:{$set:t}}])}},n.childContext={mosaicActions:n.actions,mosaicId:n.state.mosaicId},n}return o(t,e),t.getDerivedStateFromProps=function(e,t){return e.mosaicId&&(t.mosaicId,e.mosaicId),y(e)&&e.initialValue!==t.lastInitialValue?{lastInitialValue:e.initialValue,currentNode:e.initialValue}:null},t.prototype.render=function(){var e=this.props.className;return c.default.createElement(h.MosaicContext.Provider,{value:this.childContext},c.default.createElement("div",{className:s.default(e,"mosaic mosaic-drop-target")},this.renderTree(),c.default.createElement(g.RootDropTargets,null)))},t.prototype.getRoot=function(){return y(this.props)?this.state.currentNode:this.props.value},t.prototype.renderTree=function(){var e=this.getRoot();if(this.validateTree(e),null==e)return this.props.zeroStateView;var t=this.props,n=t.renderTile,r=t.resize;return c.default.createElement(f.MosaicRoot,{root:e,renderTile:n,resize:r})},t.prototype.validateTree=function(e){},t.defaultProps={onChange:function(){},zeroStateView:c.default.createElement(m.MosaicZeroState,null),className:"mosaic-blueprint-theme"},t}(c.default.PureComponent);t.MosaicWithoutDragDropContext=b;var w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.render=function(){return c.default.createElement(l.DndProvider,{backend:u.default,options:d.default},c.default.createElement(b,i({},this.props)))},t}(c.default.PureComponent);t.Mosaic=w},1026:function(e,t,n){var r=n(172),o=n(494),i=Object.prototype.hasOwnProperty,a=o((function(e,t,n){i.call(e,n)?++e[n]:r(e,n,1)}));e.exports=a},1027:function(e,t,n){var r=n(136),o=n(170),i=n(1028),a=n(304);e.exports=function(e,t){if(null==e)return{};var n=r(a(e),(function(e){return[e]}));return t=o(t),i(e,n,(function(e,n){return t(e,n[0])}))}},1028:function(e,t,n){var r=n(171),o=n(307),i=n(149);e.exports=function(e,t,n){for(var a=-1,s=t.length,c={};++a<s;){var l=t[a],u=r(e,l);n(u,l)&&o(c,i(l,e),u)}return c}},1029:function(e,t,n){var r=n(1030),o=n(1031),i=o;i.v1=r,i.v4=o,e.exports=i},1030:function(e,t,n){var r,o,i=n(958),a=n(959),s=0,c=0;e.exports=function(e,t,n){var l=t&&n||0,u=t||[],d=(e=e||{}).node||r,p=void 0!==e.clockseq?e.clockseq:o;if(null==d||null==p){var h=i();null==d&&(d=r=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==p&&(p=o=16383&(h[6]<<8|h[7]))}var f=void 0!==e.msecs?e.msecs:(new Date).getTime(),m=void 0!==e.nsecs?e.nsecs:c+1,g=f-s+(m-c)/1e4;if(g<0&&void 0===e.clockseq&&(p=p+1&16383),(g<0||f>s)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=f,c=m,o=p;var v=(1e4*(268435455&(f+=122192928e5))+m)%4294967296;u[l++]=v>>>24&255,u[l++]=v>>>16&255,u[l++]=v>>>8&255,u[l++]=255&v;var y=f/4294967296*1e4&268435455;u[l++]=y>>>8&255,u[l++]=255&y,u[l++]=y>>>24&15|16,u[l++]=y>>>16&255,u[l++]=p>>>8|128,u[l++]=255&p;for(var b=0;b<6;++b)u[l+b]=d[b];return t||a(u)}},1031:function(e,t,n){var r=n(958),o=n(959);e.exports=function(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[i+s]=a[s];return t||o(a)}},1032:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MosaicRoot=void 0;var s=a(n(19)),c=a(n(0)),l=n(934),u=n(1033),d=n(960),p=n(936),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onResize=function(e,n,r){t.context.mosaicActions.updateTree([{path:n,spec:{splitPercentage:{$set:e}}}],r)},t}return o(t,e),t.prototype.render=function(){var e=this.props.root;return c.default.createElement("div",{className:"mosaic-root"},this.renderRecursively(e,d.BoundingBox.empty(),[]))},t.prototype.renderRecursively=function(e,t,n){if(p.isParent(e)){var r=null==e.splitPercentage?50:e.splitPercentage,o=d.BoundingBox.split(t,r,e.direction),a=o.first,l=o.second;return s.default([this.renderRecursively(e.first,a,n.concat("first")),this.renderSplit(e.direction,t,r,n),this.renderRecursively(e.second,l,n.concat("second"))].filter(f))}return c.default.createElement("div",{key:e,className:"mosaic-tile",style:i({},d.BoundingBox.asStyles(t))},this.props.renderTile(e,n))},t.prototype.renderSplit=function(e,t,n,r){var o=this,a=this.props.resize;return"DISABLED"!==a?c.default.createElement(u.Split,i({key:r.join(",")+"splitter"},a,{boundingBox:t,splitPercentage:n,direction:e,onChange:function(e){return o.onResize(e,r,!0)},onRelease:function(e){return o.onResize(e,r,!1)}})):null},t.contextType=l.MosaicContext,t}(c.default.PureComponent);function f(e){return null!==e}t.MosaicRoot=h},1033:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Split=void 0;var s=a(n(54)),c=a(n(1034)),l=a(n(500)),u=a(n(0)),d=n(960),p={capture:!0,passive:!1},h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootElement=u.default.createRef(),t.listenersBound=!1,t.onMouseDown=function(e){(f(e)||0===e.button)&&(e.preventDefault(),t.bindListeners())},t.onMouseUp=function(e){t.unbindListeners();var n=t.calculateRelativePercentage(e);t.props.onRelease(n)},t.onMouseMove=function(e){e.preventDefault(),e.stopPropagation(),t.throttledUpdatePercentage(e)},t.throttledUpdatePercentage=l.default((function(e){var n=t.calculateRelativePercentage(e);n!==t.props.splitPercentage&&t.props.onChange(n)}),1e3/30),t}return o(t,e),t.prototype.render=function(){var e=this.props.direction;return u.default.createElement("div",{className:s.default("mosaic-split",{"-row":"row"===e,"-column":"column"===e}),ref:this.rootElement,onMouseDown:this.onMouseDown,style:this.computeStyle()},u.default.createElement("div",{className:"mosaic-split-line"}))},t.prototype.componentDidMount=function(){this.rootElement.current.addEventListener("touchstart",this.onMouseDown,p)},t.prototype.componentWillUnmount=function(){this.unbindListeners(),this.rootElement.current&&this.rootElement.current.ownerDocument.removeEventListener("touchstart",this.onMouseDown,p)},t.prototype.bindListeners=function(){this.listenersBound||(this.rootElement.current.ownerDocument.addEventListener("mousemove",this.onMouseMove,!0),this.rootElement.current.ownerDocument.addEventListener("touchmove",this.onMouseMove,p),this.rootElement.current.ownerDocument.addEventListener("mouseup",this.onMouseUp,!0),this.rootElement.current.ownerDocument.addEventListener("touchend",this.onMouseUp,!0),this.listenersBound=!0)},t.prototype.unbindListeners=function(){this.rootElement.current&&(this.rootElement.current.ownerDocument.removeEventListener("mousemove",this.onMouseMove,!0),this.rootElement.current.ownerDocument.removeEventListener("touchmove",this.onMouseMove,p),this.rootElement.current.ownerDocument.removeEventListener("mouseup",this.onMouseUp,!0),this.rootElement.current.ownerDocument.removeEventListener("touchend",this.onMouseUp,!0),this.listenersBound=!1)},t.prototype.computeStyle=function(){var e,t=this.props,n=t.boundingBox,r=t.direction,o=t.splitPercentage,a="column"===r?"top":"left",s=d.BoundingBox.getAbsoluteSplitPercentage(n,o,r);return i(i({},d.BoundingBox.asStyles(n)),((e={})[a]=s+"%",e))},t.prototype.calculateRelativePercentage=function(e){var t,n=this.props,r=n.minimumPaneSizePercentage,o=n.direction,i=n.boundingBox,a=this.rootElement.current.parentElement.getBoundingClientRect(),s=f(e)?e.changedTouches[0]:e;t="column"===o?(s.clientY-a.top)/a.height*100:(s.clientX-a.left)/a.width*100;var l=d.BoundingBox.getRelativeSplitPercentage(i,t,o);return c.default(l,r,100-r)},t.defaultProps={onChange:function(){},onRelease:function(){},minimumPaneSizePercentage:20},t}(u.default.PureComponent);function f(e){return null!=e.changedTouches}t.Split=h},1034:function(e,t,n){var r=n(1035),o=n(305);e.exports=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=o(n))==n?n:0),void 0!==t&&(t=(t=o(t))==t?t:0),r(o(e),t,n)}},1035:function(e,t){e.exports=function(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}},1036:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertNever=void 0,t.assertNever=function(e){throw new Error("Unhandled case: "+JSON.stringify(e))}},1037:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RootDropTargets=void 0;var a=i(n(54)),s=i(n(306)),c=i(n(0)),l=n(485),u=n(946),d=n(962),p=n(941),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.render=function(){return c.default.createElement("div",{className:a.default("drop-target-container",{"-dragging":this.props.isDragging})},s.default(u.MosaicDropTargetPosition).map((function(e){return c.default.createElement(d.MosaicDropTarget,{position:e,path:[],key:e})})))},t}(c.default.PureComponent);t.RootDropTargets=l.DropTarget(p.MosaicDragType.WINDOW,{},(function(e,t){return{isDragging:null!==t.getItem()&&t.getItemType()===p.MosaicDragType.WINDOW}}))(h)},1038:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MosaicWindow=t.SourceDropConnectedInternalMosaicWindow=t.SourceConnectedInternalMosaicWindow=t.InternalMosaicWindow=void 0;var s=a(n(54)),c=a(n(1039)),l=a(n(945)),u=a(n(167)),d=a(n(486)),p=a(n(306)),h=a(n(0)),f=n(485),m=n(963),g=n(968),v=n(934),y=n(946),b=n(962),w=n(941),O=n(940),E=n(936),x=n(935),T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={additionalControlsOpen:!1},t.rootElement=null,t.renderDropTarget=function(e){var n=t.props.path;return h.default.createElement(b.MosaicDropTarget,{position:e,path:n,key:e})},t.split=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.checkCreateNode();var r=t.props,o=r.createNode,i=r.path,a=t.context.mosaicActions,s=a.getRoot(),c=t.rootElement.offsetWidth>t.rootElement.offsetHeight?"row":"column";return Promise.resolve(o.apply(void 0,e)).then((function(e){return a.replaceWith(i,{direction:c,second:e,first:E.getAndAssertNodeAtPathExists(s,i)})}))},t.swap=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.checkCreateNode();var r=t.context.mosaicActions,o=t.props,i=o.createNode,a=o.path;return Promise.resolve(i.apply(void 0,e)).then((function(e){return r.replaceWith(a,e)}))},t.setAdditionalControlsOpen=function(e){t.setState({additionalControlsOpen:e})},t.getPath=function(){return t.props.path},t.connectDragSource=function(e){return(0,t.props.connectDragSource)(e)},t.childContext={mosaicWindowActions:{split:t.split,replaceWithNew:t.swap,setAdditionalControlsOpen:t.setAdditionalControlsOpen,getPath:t.getPath,connectDragSource:t.connectDragSource}},t}return o(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.className,r=t.isOver,o=t.renderPreview,i=t.additionalControls,a=t.connectDropTarget,c=t.connectDragPreview,l=t.draggedMosaicId;return h.default.createElement(v.MosaicWindowContext.Provider,{value:this.childContext},a(h.default.createElement("div",{className:s.default("mosaic-window mosaic-drop-target",n,{"drop-target-hover":r&&l===this.context.mosaicId,"additional-controls-open":this.state.additionalControlsOpen}),ref:function(t){return e.rootElement=t}},this.renderToolbar(),h.default.createElement("div",{className:"mosaic-window-body"},this.props.children),h.default.createElement("div",{className:"mosaic-window-body-overlay",onClick:function(){return e.setAdditionalControlsOpen(!1)}}),h.default.createElement("div",{className:"mosaic-window-additional-actions-bar"},i),c(o(this.props)),h.default.createElement("div",{className:"drop-target-container"},p.default(y.MosaicDropTargetPosition).map(this.renderDropTarget)))))},t.prototype.getToolbarControls=function(){var e=this.props,t=e.toolbarControls,n=e.createNode;return t||(n?m.DEFAULT_CONTROLS_WITH_CREATION:m.DEFAULT_CONTROLS_WITHOUT_CREATION)},t.prototype.renderToolbar=function(){var e,t=this,n=this.props,r=n.title,o=n.draggable,i=n.additionalControls,a=n.additionalControlButtonText,c=n.path,l=n.renderToolbar,d=this.state.additionalControlsOpen,p=this.getToolbarControls(),f=o&&c.length>0,m=f?this.props.connectDragSource:function(e){return e};if(l){var v=m(l(this.props,o));return h.default.createElement("div",{className:s.default("mosaic-window-toolbar",{draggable:f})},v)}var y=m(h.default.createElement("div",{title:r,className:"mosaic-window-title"},r)),b=!u.default(i);return h.default.createElement("div",{className:s.default("mosaic-window-toolbar",{draggable:f})},y,h.default.createElement("div",{className:s.default("mosaic-window-controls",x.OptionalBlueprint.getClasses("BUTTON_GROUP"))},b&&h.default.createElement("button",{onClick:function(){return t.setAdditionalControlsOpen(!d)},className:s.default(x.OptionalBlueprint.getClasses("BUTTON","MINIMAL"),x.OptionalBlueprint.getIconClass("MORE"),(e={},e[x.OptionalBlueprint.getClasses("ACTIVE")]=d,e))},h.default.createElement("span",{className:"control-text"},a)),b&&h.default.createElement(g.Separator,null),p))},t.prototype.checkCreateNode=function(){if(null==this.props.createNode)throw new Error("Operation invalid unless `createNode` is defined")},t.defaultProps={additionalControlButtonText:"More",draggable:!0,renderPreview:function(e){var t=e.title;return h.default.createElement("div",{className:"mosaic-preview"},h.default.createElement("div",{className:"mosaic-window-toolbar"},h.default.createElement("div",{className:"mosaic-window-title"},t)),h.default.createElement("div",{className:"mosaic-window-body"},h.default.createElement("h4",null,t),h.default.createElement(x.OptionalBlueprint.Icon,{iconSize:72,icon:"application"})))},renderToolbar:null},t.contextType=v.MosaicContext,t}(h.default.Component);t.InternalMosaicWindow=T;var S={beginDrag:function(e,t,n){e.onDragStart&&e.onDragStart();var r=c.default((function(){return n.context.mosaicActions.hide(n.props.path)}));return{mosaicId:n.context.mosaicId,hideTimer:r}},endDrag:function(e,t,n){var r=t.getItem().hideTimer;window.clearTimeout(r);var o=n.props.path,i=t.getDropResult()||{},a=n.context.mosaicActions,s=i.position,c=i.path;null==s||null==c||d.default(c,o)?(a.updateTree([{path:l.default(o),spec:{splitPercentage:{$set:null}}}]),e.onDragEnd&&e.onDragEnd("reset")):(a.updateTree(O.createDragToUpdates(a.getRoot(),o,c,s)),e.onDragEnd&&e.onDragEnd("drop"))}};t.SourceConnectedInternalMosaicWindow=f.DragSource(w.MosaicDragType.WINDOW,S,(function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview()}}))(T),t.SourceDropConnectedInternalMosaicWindow=f.DropTarget(w.MosaicDragType.WINDOW,{},(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),draggedMosaicId:(t.getItem()||{}).mosaicId}}))(t.SourceConnectedInternalMosaicWindow);var P=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return o(n,e),n.prototype.render=function(){return h.default.createElement(t.SourceDropConnectedInternalMosaicWindow,i({},this.props))},n}(h.default.PureComponent);t.MosaicWindow=P},1039:function(e,t,n){var r=n(1040),o=n(228)((function(e,t){return r(e,1,t)}));e.exports=o},1040:function(e,t){e.exports=function(e,t,n){if("function"!=typeof e)throw new TypeError("Expected a function");return setTimeout((function(){e.apply(void 0,n)}),t)}},1051:function(e,t,n){"use strict";n.r(t);var r=n(10),o=n(11),i=n(931),a=n(15),s=n(7),c=n(13),l=n(0),u=n.n(l),d=n(54),p=n.n(d),h=n(337),f=n(341),m=n(27),g=n(73),v=n(62),y=n(1),b=n(4),w=n(22),O=(n(6),n(3)),E=n(12),x=n(877),T=n(48),S=n(484),P=n(135),C=n(56),_=n(126),j=n(21),k={entering:{opacity:1},entered:{opacity:1}},R={enter:P.b.enteringScreen,exit:P.b.leavingScreen},I=l.forwardRef((function(e,t){var n=e.children,r=e.disableStrictModeCompat,o=void 0!==r&&r,i=e.in,a=e.onEnter,s=e.onEntered,c=e.onEntering,u=e.onExit,d=e.onExited,p=e.onExiting,h=e.style,f=e.TransitionComponent,m=void 0===f?S.a:f,g=e.timeout,v=void 0===g?R:g,w=Object(b.a)(e,["children","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","TransitionComponent","timeout"]),O=Object(C.a)(),E=O.unstable_strictMode&&!o,x=l.useRef(null),P=Object(j.a)(n.ref,t),I=Object(j.a)(E?x:void 0,P),D=function(e){return function(t,n){if(e){var r=E?[x.current,t]:[t,n],o=Object(T.a)(r,2),i=o[0],a=o[1];void 0===a?e(i):e(i,a)}}},M=D(c),A=D((function(e,t){Object(_.b)(e);var n=Object(_.a)({style:h,timeout:v},{mode:"enter"});e.style.webkitTransition=O.transitions.create("opacity",n),e.style.transition=O.transitions.create("opacity",n),a&&a(e,t)})),B=D(s),N=D(p),z=D((function(e){var t=Object(_.a)({style:h,timeout:v},{mode:"exit"});e.style.webkitTransition=O.transitions.create("opacity",t),e.style.transition=O.transitions.create("opacity",t),u&&u(e)})),L=D(d);return l.createElement(m,Object(y.a)({appear:!0,in:i,nodeRef:E?x:void 0,onEnter:A,onEntered:B,onEntering:M,onExit:z,onExited:L,onExiting:N,timeout:v},w),(function(e,t){return l.cloneElement(n,Object(y.a)({style:Object(y.a)({opacity:0,visibility:"exited"!==e||i?void 0:"hidden"},k[e],h,n.props.style),ref:I},t))}))})),D=l.forwardRef((function(e,t){var n=e.children,r=e.classes,o=e.className,i=e.invisible,a=void 0!==i&&i,s=e.open,c=e.transitionDuration,u=e.TransitionComponent,d=void 0===u?I:u,p=Object(b.a)(e,["children","classes","className","invisible","open","transitionDuration","TransitionComponent"]);return l.createElement(d,Object(y.a)({in:s,timeout:c},p),l.createElement("div",{className:Object(O.a)(r.root,o,a&&r.invisible),"aria-hidden":!0,ref:t},n))})),M=Object(s.a)({root:{zIndex:-1,position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}},{name:"MuiBackdrop"})(D),A=n(280),B={enter:P.b.enteringScreen,exit:P.b.leavingScreen},N=l.forwardRef((function(e,t){var n=e.BackdropProps,r=e.children,o=e.classes,i=e.className,a=e.disableBackdropClick,s=void 0!==a&&a,c=e.disableEscapeKeyDown,u=void 0!==c&&c,d=e.fullScreen,p=void 0!==d&&d,h=e.fullWidth,f=void 0!==h&&h,m=e.maxWidth,g=void 0===m?"sm":m,v=e.onBackdropClick,w=e.onClose,T=e.onEnter,S=e.onEntered,P=e.onEntering,C=e.onEscapeKeyDown,_=e.onExit,j=e.onExited,k=e.onExiting,R=e.open,D=e.PaperComponent,N=void 0===D?A.a:D,z=e.PaperProps,L=void 0===z?{}:z,H=e.scroll,W=void 0===H?"paper":H,F=e.TransitionComponent,V=void 0===F?I:F,U=e.transitionDuration,$=void 0===U?B:U,Z=e.TransitionProps,G=e["aria-describedby"],q=e["aria-labelledby"],X=Object(b.a)(e,["BackdropProps","children","classes","className","disableBackdropClick","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","onEnter","onEntered","onEntering","onEscapeKeyDown","onExit","onExited","onExiting","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps","aria-describedby","aria-labelledby"]),Y=l.useRef();return l.createElement(x.a,Object(y.a)({className:Object(O.a)(o.root,i),BackdropComponent:M,BackdropProps:Object(y.a)({transitionDuration:$},n),closeAfterTransition:!0,disableBackdropClick:s,disableEscapeKeyDown:u,onEscapeKeyDown:C,onClose:w,open:R,ref:t},X),l.createElement(V,Object(y.a)({appear:!0,in:R,timeout:$,onEnter:T,onEntering:P,onEntered:S,onExit:_,onExiting:k,onExited:j,role:"none presentation"},Z),l.createElement("div",{className:Object(O.a)(o.container,o["scroll".concat(Object(E.a)(W))]),onMouseUp:function(e){e.target===e.currentTarget&&e.target===Y.current&&(Y.current=null,v&&v(e),!s&&w&&w(e,"backdropClick"))},onMouseDown:function(e){Y.current=e.target}},l.createElement(N,Object(y.a)({elevation:24,role:"dialog","aria-describedby":G,"aria-labelledby":q},L,{className:Object(O.a)(o.paper,o["paperScroll".concat(Object(E.a)(W))],o["paperWidth".concat(Object(E.a)(String(g)))],L.className,p&&o.paperFullScreen,f&&o.paperFullWidth)}),r))))})),z=Object(s.a)((function(e){return{root:{"@media print":{position:"absolute !important"}},scrollPaper:{display:"flex",justifyContent:"center",alignItems:"center"},scrollBody:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}},container:{height:"100%","@media print":{height:"auto"},outline:0},paper:{margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},paperScrollPaper:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},paperScrollBody:{display:"inline-block",verticalAlign:"middle",textAlign:"left"},paperWidthFalse:{maxWidth:"calc(100% - 64px)"},paperWidthXs:{maxWidth:Math.max(e.breakpoints.values.xs,444),"&$paperScrollBody":Object(w.a)({},e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64),{maxWidth:"calc(100% - 64px)"})},paperWidthSm:{maxWidth:e.breakpoints.values.sm,"&$paperScrollBody":Object(w.a)({},e.breakpoints.down(e.breakpoints.values.sm+64),{maxWidth:"calc(100% - 64px)"})},paperWidthMd:{maxWidth:e.breakpoints.values.md,"&$paperScrollBody":Object(w.a)({},e.breakpoints.down(e.breakpoints.values.md+64),{maxWidth:"calc(100% - 64px)"})},paperWidthLg:{maxWidth:e.breakpoints.values.lg,"&$paperScrollBody":Object(w.a)({},e.breakpoints.down(e.breakpoints.values.lg+64),{maxWidth:"calc(100% - 64px)"})},paperWidthXl:{maxWidth:e.breakpoints.values.xl,"&$paperScrollBody":Object(w.a)({},e.breakpoints.down(e.breakpoints.values.xl+64),{maxWidth:"calc(100% - 64px)"})},paperFullWidth:{width:"calc(100% - 64px)"},paperFullScreen:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,"&$paperScrollBody":{margin:0,maxWidth:"100%"}}}}),{name:"MuiDialog"})(N),L=n(98),H=l.forwardRef((function(e,t){var n=e.children,r=e.classes,o=e.className,i=e.disableTypography,a=void 0!==i&&i,s=Object(b.a)(e,["children","classes","className","disableTypography"]);return l.createElement("div",Object(y.a)({className:Object(O.a)(r.root,o),ref:t},s),a?n:l.createElement(L.a,{component:"h2",variant:"h6"},n))})),W=Object(s.a)({root:{margin:0,padding:"16px 24px",flex:"0 0 auto"}},{name:"MuiDialogTitle"})(H),F=n(353),V=n(918),U=n(932),$=n(282),Z=n(356),G=l.forwardRef((function(e,t){var n=e.disableSpacing,r=void 0!==n&&n,o=e.classes,i=e.className,a=Object(b.a)(e,["disableSpacing","classes","className"]);return l.createElement("div",Object(y.a)({className:Object(O.a)(o.root,i,!r&&o.spacing),ref:t},a))})),q=Object(s.a)({root:{display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},spacing:{"& > :not(:first-child)":{marginLeft:8}}},{name:"MuiDialogActions"})(G),X=n(433),Y=n.n(X),K=n(919),J=n(142),Q=n(108),ee=l.forwardRef((function(e,t){var n=e.classes,r=e.className,o=e.dividers,i=void 0!==o&&o,a=Object(b.a)(e,["classes","className","dividers"]);return l.createElement("div",Object(y.a)({className:Object(O.a)(n.root,r,i&&n.dividers),ref:t},a))})),te=Object(s.a)((function(e){return{root:{flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"8px 24px","&:first-child":{paddingTop:20}},dividers:{padding:"16px 24px",borderTop:"1px solid ".concat(e.palette.divider),borderBottom:"1px solid ".concat(e.palette.divider)}}}),{name:"MuiDialogContent"})(ee);function ne(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function re(e){var t=e.classes,n=e.className,r=ne(e,["classes","className"]),o=[n,t.shadowScrollDialog].join(" ");return u.a.createElement(te,Object.assign({className:o},r))}function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}re.defaultProps={className:""};var ie=Object(s.a)((function(e){var t;return{shadowScrollDialog:(t={background:"linear-gradient(".concat(e.palette.background.paper," 30%, rgba(255, 255, 255, 0)), ")+"linear-gradient(rgba(255, 255, 255, 0), ".concat(e.palette.background.paper," 70%) 0 100%, ")+"radial-gradient(50% 0, farthest-side, rgba(0, 0, 0, .2), rgba(0, 0, 0, 0)), radial-gradient(50% 100%, farthest-side, rgba(0, 0, 0, .2), rgba(0, 0, 0, 0)) 0 100%,"},oe(t,"background","linear-gradient(".concat(e.palette.background.paper," 30%, rgba(255, 255, 255, 0)), ")+"linear-gradient(rgba(255, 255, 255, 0), ".concat(e.palette.background.paper," 70%) 0 100%, ")+"radial-gradient(farthest-side at 50% 0, rgba(0, 0, 0, .2), rgba(0, 0, 0, 0)), radial-gradient(farthest-side at 50% 100%, rgba(0, 0, 0, .2), rgba(0, 0, 0, 0)) 0 100%;"),oe(t,"backgroundAttachment","local, local, scroll, scroll"),oe(t,"backgroundRepeat","no-repeat"),oe(t,"backgroundSize","100% 40px, 100% 40px, 100% 14px, 100% 14px"),oe(t,"overflowY","auto"),t)}}))(re),ae=n(438);function se(e){return function(e){if(Array.isArray(e))return ce(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ce(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ue(e,t,n){return t&&le(e.prototype,t),n&&le(e,n),e}function de(e,t){return(de=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=fe(e);if(t){var o=fe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return he(this,n)}}function he(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function me(e){return Array.isArray(e)?e:[e]}var ge=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&de(e,t)}(n,e);var t=pe(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).state={filter:null},r}return ue(n,null,[{key:"getUseableLabel",value:function(e,t){return e&&e.getLabel&&e.getLabel().length>0?e.getLabel().map((function(e){return e.value}))[0]:String(t+1)}}]),ue(n,[{key:"setFilter",value:function(e){this.setState({filter:e})}},{key:"selectCollection",value:function(e){var t=this.props,n=t.collectionPath,r=t.manifestId,o=t.showCollectionDialog,i=t.windowId;o(e.id,[].concat(se(n),[r]),i)}},{key:"goToPreviousCollection",value:function(){var e=this.props,t=e.collectionPath,n=e.showCollectionDialog,r=e.windowId;n(t[t.length-1],t.slice(0,-1),r)}},{key:"selectManifest",value:function(e){var t=this.props,n=t.addWindow,r=t.collectionPath,o=t.hideCollectionDialog,i=t.manifestId,a=t.setWorkspaceAddVisibility,s=t.updateWindow,c=t.windowId;c?s(c,{canvasId:null,collectionPath:[].concat(se(r),[i]),manifestId:e.id}):n({collectionPath:[].concat(se(r),[i]),manifestId:e.id}),o(),a(!1)}},{key:"placeholder",value:function(){var e=this.props,t=e.classes,n=e.hideCollectionDialog;return u.a.createElement(z,{onClose:n,open:!0},u.a.createElement(W,{id:"select-collection",disableTypography:!0},u.a.createElement(K.a,{className:t.placeholder,variant:"text"})),u.a.createElement(ie,null,u.a.createElement(K.a,{className:t.placeholder,variant:"text"}),u.a.createElement(K.a,{className:t.placeholder,variant:"text"})))}},{key:"render",value:function(){var e=this,t=this.props,r=t.classes,o=t.collection,i=t.error,a=t.hideCollectionDialog,s=t.isMultipart,c=t.manifest,l=t.ready,d=t.t,p=this.state.filter;if(i)return null;if(!l)return this.placeholder();var h=c&&me(c.getProperty("rights")||c.getProperty("license")),f=c&&me(c.getRequiredStatement()).filter((function(e){return e.getValue()})).map((function(e){return{label:e.getLabel(),values:e.getValues()}})),m=c.getCollections(),g=p||(m.length>0?"collections":"manifests");return u.a.createElement(z,{onClose:a,open:!0},u.a.createElement(W,{id:"select-collection",disableTypography:!0},u.a.createElement(L.a,{component:"div",variant:"overline"},d(s?"multipartCollection":"collection")),u.a.createElement(L.a,{variant:"h3"},n.getUseableLabel(c))),u.a.createElement(ie,{className:r.dialogContent},o&&u.a.createElement(F.a,{startIcon:u.a.createElement(Y.a,null),onClick:function(){return e.goToPreviousCollection()}},n.getUseableLabel(o)),u.a.createElement("div",{className:r.collectionMetadata},u.a.createElement(ae.a,{manifestId:c.id}),u.a.createElement(Q.a,{id:"select-collection-rights",label:d("attributionTitle")},f&&u.a.createElement(J.a,{labelValuePairs:f,defaultLabel:d("attribution")}),h&&h.length>0&&u.a.createElement(u.a.Fragment,null,u.a.createElement(L.a,{variant:"subtitle2",component:"dt"},d("rights")),h.map((function(e){return u.a.createElement(L.a,{variant:"body1",component:"dd"},u.a.createElement(V.a,{target:"_blank",rel:"noopener noreferrer",href:e},e))}))))),u.a.createElement("div",{className:r.collectionFilter},c.getTotalCollections()>0&&u.a.createElement(U.a,{clickable:!0,color:"collections"===g?"primary":"default",onClick:function(){return e.setFilter("collections")},label:d("totalCollections",{count:c.getTotalCollections()})}),c.getTotalManifests()>0&&u.a.createElement(U.a,{clickable:!0,color:"manifests"===g?"primary":"default",onClick:function(){return e.setFilter("manifests")},label:d("totalManifests",{count:c.getTotalManifests()})})),"collections"===g&&u.a.createElement($.a,null,m.map((function(t){return u.a.createElement(Z.a,{key:t.id,onClick:function(){e.selectCollection(t)}},n.getUseableLabel(t))}))),"manifests"===g&&u.a.createElement($.a,null,c.getManifests().map((function(t){return u.a.createElement(Z.a,{key:t.id,onClick:function(){e.selectManifest(t)}},n.getUseableLabel(t))})))),u.a.createElement(q,null,u.a.createElement(F.a,{onClick:a},d("close"))))}}]),n}(l.Component);ge.defaultProps={collection:null,collectionPath:[],error:null,isMultipart:!1,ready:!1,windowId:null};var ve={addWindow:h.a,hideCollectionDialog:f.a,setWorkspaceAddVisibility:f.b,showCollectionDialog:f.f,updateWindow:h.j},ye=Object(r.compose)(Object(i.a)(),Object(s.a)((function(e){return{collectionFilter:{padding:"16px",paddingTop:0},collectionMetadata:{padding:"16px"},dark:{color:"#000000"},dialogContent:{padding:0},light:{color:e.palette.grey[400]},listitem:{"&:focus":{backgroundColor:e.palette.action.focus},"&:hover":{backgroundColor:e.palette.action.hover},cursor:"pointer"}}})),Object(o.b)((function(e){var t=e.workspace,n=t.collectionPath,r=t.collectionManifestId,o=Object(m.b)(e,{manifestId:r}),i=n&&n[n.length-1],a=i&&Object(m.b)(e,{manifestId:i});return{collection:a&&Object(g.q)(e,{manifestId:a.id}),collectionPath:n,error:o&&o.error,isMultipart:Object(v.c)(e,{manifestId:r}).includes("multi-part"),manifest:o&&Object(g.q)(e,{manifestId:r}),manifestId:r,open:e.workspace.collectionDialogOn,ready:o&&!!o.json,windowId:e.workspace.collectionUpdateWindowId}}),ve),Object(c.a)("CollectionDialog"))(ge),be=n(97),we=n.n(be),Oe=l.forwardRef((function(e,t){return l.createElement(L.a,Object(y.a)({component:"p",variant:"body1",color:"textSecondary",ref:t},e))})),Ee=Object(s.a)({root:{marginBottom:12}},{name:"MuiDialogContentText"})(Oe);function xe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Se(e,t){return(Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_e(e);if(t){var o=_e(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ce(this,n)}}function Ce(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _e(e){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var je=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Se(e,t)}(i,e);var t,n,r,o=Pe(i);function i(){return xe(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.error,n=e.removeError,r=e.t,o=!we()(t);return t?u.a.createElement(z,{"aria-labelledby":"error-dialog-title",id:"error-dialog",onClose:function(){return n(t.id)},open:o},u.a.createElement(W,{id:"error-dialog-title",disableTypography:!0},u.a.createElement(L.a,{variant:"h2"},r("errorDialogTitle"))),u.a.createElement(te,{disableTypography:!0},u.a.createElement(Ee,{variant:"body2",noWrap:!0,color:"inherit"},"".concat(t.message)),u.a.createElement(q,null,u.a.createElement(F.a,{onClick:function(){return n(t.id)},variant:"contained"},r("errorDialogConfirm"))))):null}}])&&Te(t.prototype,n),r&&Te(t,r),i}(l.Component);je.defaultProps={error:null,removeError:function(){},t:function(e){return e}};var ke=n(336),Re=n(202),Ie={removeError:ke.b},De=Object(r.compose)(Object(i.a)(),Object(o.b)((function(e){return{error:Object(Re.c)(e)}}),Ie),Object(c.a)("ErrorDialog"))(je),Me=l.forwardRef((function(e,t){var n=e.classes,r=e.className,o=e.color,i=void 0===o?"primary":o,a=e.position,s=void 0===a?"fixed":a,c=Object(b.a)(e,["classes","className","color","position"]);return l.createElement(A.a,Object(y.a)({square:!0,component:"header",elevation:4,className:Object(O.a)(n.root,n["position".concat(Object(E.a)(s))],n["color".concat(Object(E.a)(i))],r,"fixed"===s&&"mui-fixed"),ref:t},c))})),Ae=Object(s.a)((function(e){var t="light"===e.palette.type?e.palette.grey[100]:e.palette.grey[900];return{root:{display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",zIndex:e.zIndex.appBar,flexShrink:0},positionFixed:{position:"fixed",top:0,left:"auto",right:0,"@media print":{position:"absolute"}},positionAbsolute:{position:"absolute",top:0,left:"auto",right:0},positionSticky:{position:"sticky",top:0,left:"auto",right:0},positionStatic:{position:"static"},positionRelative:{position:"relative"},colorDefault:{backgroundColor:t,color:e.palette.getContrastText(t)},colorPrimary:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText},colorSecondary:{backgroundColor:e.palette.secondary.main,color:e.palette.secondary.contrastText},colorInherit:{color:"inherit"},colorTransparent:{backgroundColor:"transparent",color:"inherit"}}}),{name:"MuiAppBar"})(Me),Be=n(916),Ne=n(914),ze=n(93),Le=n.n(ze),He=(n(349),n(293));function We(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(He.a)(),r=Object(Ne.a)({theme:n,name:"MuiUseMediaQuery",props:{}});var o="function"==typeof e?e(n):e;o=o.replace(/^@media( ?)/m,"");var i="undefined"!=typeof window&&void 0!==window.matchMedia,a=Object(y.a)({},r,t),s=a.defaultMatches,c=void 0!==s&&s,u=a.matchMedia,d=void 0===u?i?window.matchMedia:null:u,p=a.noSsr,h=void 0!==p&&p,f=a.ssrMatchMedia,m=void 0===f?null:f,g=l.useState((function(){return h&&i?d(o).matches:m?m(o).matches:c})),v=g[0],b=g[1];return l.useEffect((function(){var e=!0;if(i){var t=d(o),n=function(){e&&b(t.matches)};return n(),t.addListener(n),function(){e=!1,t.removeListener(n)}}}),[o,d,i]),v}var Fe="undefined"==typeof window?l.useEffect:l.useLayoutEffect,Ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var n=e.withTheme,r=void 0!==n&&n,o=e.noSSR,i=void 0!==o&&o,a=e.initialWidth;function s(e){var n=Object(C.a)(),o=e.theme||n,s=Object(Ne.a)({theme:o,name:"MuiWithWidth",props:Object(y.a)({},e)}),c=s.initialWidth,u=s.width,d=Object(b.a)(s,["initialWidth","width"]),p=l.useState(!1),h=p[0],f=p[1];Fe((function(){f(!0)}),[]);var m=o.breakpoints.keys.slice().reverse().reduce((function(e,t){var n=We(o.breakpoints.up(t));return!e&&n?t:e}),null),g=Object(y.a)({width:u||(h||i?m:void 0)||c||a},r?{theme:o}:{},d);return void 0===g.width?null:l.createElement(t,g)}return Le()(s,t),s}},Ue=n(226),$e=l.forwardRef((function(e,t){var n=e.children,r=e.classes,o=e.className,i=e.color,a=void 0===i?"default":i,s=e.component,c=void 0===s?"button":s,u=e.disabled,d=void 0!==u&&u,p=e.disableFocusRipple,h=void 0!==p&&p,f=e.focusVisibleClassName,m=e.size,g=void 0===m?"large":m,v=e.variant,w=void 0===v?"round":v,x=Object(b.a)(e,["children","classes","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"]);return l.createElement(Ue.a,Object(y.a)({className:Object(O.a)(r.root,o,"round"!==w&&r.extended,"large"!==g&&r["size".concat(Object(E.a)(g))],d&&r.disabled,{primary:r.primary,secondary:r.secondary,inherit:r.colorInherit}[a]),component:c,disabled:d,focusRipple:!h,focusVisibleClassName:Object(O.a)(r.focusVisible,f),ref:t},x),l.createElement("span",{className:r.label},n))})),Ze=Object(s.a)((function(e){return{root:Object(y.a)({},e.typography.button,{boxSizing:"border-box",minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,boxShadow:e.shadows[6],"&:active":{boxShadow:e.shadows[12]},color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],"&:hover":{backgroundColor:e.palette.grey.A100,"@media (hover: none)":{backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground},textDecoration:"none"},"&$focusVisible":{boxShadow:e.shadows[6]},"&$disabled":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},primary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},secondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},extended:{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48,"&$sizeSmall":{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34},"&$sizeMedium":{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40}},focusVisible:{},disabled:{},colorInherit:{color:"inherit"},sizeSmall:{width:40,height:40},sizeMedium:{width:48,height:48}}}),{name:"MuiFab"})($e),Ge=n(872),qe=n(948),Xe=n.n(qe),Ye=n(302),Ke=n.n(Ye);function Je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function et(e,t){return(et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=rt(e);if(t){var o=rt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return nt(this,n)}}function nt(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rt(e){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ot=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&et(e,t)}(i,e);var t,n,r,o=tt(i);function i(){return Je(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.t,r=e.setWorkspaceAddVisibility,o=e.isWorkspaceAddVisible,i=e.useExtendedFab;return u.a.createElement(Ge.a,{title:n(o?"closeAddResourceMenu":"addResource")},u.a.createElement(Ze,{size:"medium",color:"primary",id:"addBtn",disableRipple:!0,"aria-label":o?n("closeAddResourceMenu"):i&&n("startHere")||n("addResource"),className:t.fab,classes:{primary:t.fabPrimary,secondary:t.fabSecondary},variant:i?"extended":"round",onClick:function(){r(!o)}},o?u.a.createElement(Ke.a,null):u.a.createElement(Xe.a,null),i&&n("startHere")))}}])&&Qe(t.prototype,n),r&&Qe(t,r),i}(l.Component);ot.defaultProps={isWorkspaceAddVisible:!1,t:function(e){return e}};var it={setWorkspaceAddVisibility:f.b},at=Object(r.compose)(Object(i.a)(),Object(s.a)((function(e){return{fab:{margin:e.spacing(1)},fabPrimary:{"&:focus":{backgroundColor:e.palette.primary.dark}},fabSecondary:{"&:focus":{backgroundColor:e.palette.secondary.dark}}}})),Ve(),Object(o.b)((function(e,t){var n=t.width,r=Object(m.i)(e).isWorkspaceAddVisible;return{isWorkspaceAddVisible:r,useExtendedFab:"xs"!==n&&!r&&0===Object(m.f)(e).length}}),it),Object(c.a)("WorkspaceAddButton"))(ot),st=n(992),ct=n.n(st),lt=n(991),ut=n.n(lt),dt=n(55);function pt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ft(e,t){return(ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function mt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=vt(e);if(t){var o=vt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return gt(this,n)}}function gt(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vt(e){return(vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var yt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ft(e,t)}(i,e);var t,n,r,o=mt(i);function i(){return pt(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.className,n=e.isFullscreenEnabled,r=e.setWorkspaceFullscreen,o=e.t;return u.a.createElement(dt.a,{className:t,"aria-label":o(n?"exitFullScreen":"workspaceFullScreen"),onClick:function(){return r(!n)}},n?u.a.createElement(ut.a,null):u.a.createElement(ct.a,null))}}])&&ht(t.prototype,n),r&&ht(t,r),i}(l.Component);yt.defaultProps={className:void 0,isFullscreenEnabled:!1,t:function(e){return e}};var bt={setWorkspaceFullscreen:f.c},wt=Object(r.compose)(Object(i.a)(),Object(o.b)((function(e){return{isFullscreenEnabled:Object(Re.b)(e)}}),bt),Object(c.a)("FullScreenButton"))(yt),Ot=n(979),Et=n.n(Ot),xt=n(77),Tt=n(459),St=n(203),Pt=n(922),Ct=n(917),_t=n(981),jt=n.n(_t);function kt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function It(e,t){return(It=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=At(e);if(t){var o=At(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Mt(this,n)}}function Mt(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function At(e){return(At=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Bt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&It(e,t)}(i,e);var t,n,r,o=Dt(i);function i(){return kt(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.handleClick,n=e.languages;return u.a.createElement(u.a.Fragment,null,n.map((function(e){return u.a.createElement(Z.a,{button:!e.current,key:e.locale,onClick:function(){t(e.locale)}},u.a.createElement(Pt.a,null,e.current&&u.a.createElement(jt.a,null)),u.a.createElement(Ct.a,{primaryTypographyProps:{variant:"body1"}},e.label))})))}}])&&Rt(t.prototype,n),r&&Rt(t,r),i}(l.Component),Nt=Object(r.compose)(Object(o.b)((function(e){return{languages:Object(xt.d)(e)}}),(function(e,t){var n=t.afterSelect;return{handleClick:function(t){e(St.d({language:t})),n&&n()}}})),Object(c.a)("LanguageSettings"))(Bt),zt=n(980),Lt=n.n(zt),Ht=n(949),Wt=n.n(Ht);function Ft(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Vt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ut(e,t){return(Ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=qt(e);if(t){var o=qt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Zt(this,n)}}function Zt(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?Gt(e):t}function Gt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qt(e){return(qt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Xt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ut(e,t)}(i,e);var t,n,r,o=$t(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={nestedMenuIsOpen:!1},t.handleMenuClick=t.handleMenuClick.bind(Gt(t)),t}return t=i,(n=[{key:"handleMenuClick",value:function(){var e=this.state.nestedMenuIsOpen;this.setState({nestedMenuIsOpen:!e})}},{key:"render",value:function(){var e=this.state.nestedMenuIsOpen,t=this.props,n=t.children,r=t.icon,o=t.label,i=Ft(t,["children","icon","label"]);return u.a.createElement(u.a.Fragment,null,u.a.createElement(Z.a,Object.assign({onClick:this.handleMenuClick,divider:e},i),r&&u.a.createElement(Pt.a,null,r),u.a.createElement(Ct.a,{primaryTypographyProps:{variant:"body1"}},o),e?u.a.createElement(Lt.a,null):u.a.createElement(Wt.a,null)),e&&n)}}])&&Vt(t.prototype,n),r&&Vt(t,r),i}(l.Component);Xt.defaultProps={icon:null};var Yt=l.forwardRef((function(e,t){var n=e.classes,r=e.className,o=e.raised,i=void 0!==o&&o,a=Object(b.a)(e,["classes","className","raised"]);return l.createElement(A.a,Object(y.a)({className:Object(O.a)(n.root,r),elevation:i?8:1,ref:t},a))})),Kt=Object(s.a)({root:{overflow:"hidden"}},{name:"MuiCard"})(Yt),Jt=l.forwardRef((function(e,t){var n=e.classes,r=e.className,o=e.component,i=void 0===o?"div":o,a=Object(b.a)(e,["classes","className","component"]);return l.createElement(i,Object(y.a)({className:Object(O.a)(n.root,r),ref:t},a))})),Qt=Object(s.a)({root:{padding:16,"&:last-child":{paddingBottom:24}}},{name:"MuiCardContent"})(Jt),en=n(210);function tn(e){return u.a.createElement(en.a,e,u.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"120",height:"90",viewBox:"0 0 300 225"},u.a.createElement("defs",null,u.a.createElement("linearGradient",{id:"linear-gradient",x1:"0.5",y1:"1",x2:"0.5",gradientUnits:"objectBoundingBox"},u.a.createElement("stop",{offset:"0"}),u.a.createElement("stop",{offset:"0.14",stopOpacity:"0.631"}),u.a.createElement("stop",{offset:"1",stopOpacity:"0"})),u.a.createElement("linearGradient",{id:"linear-gradient-2",x1:"0.5",y1:"1",x2:"0.5",gradientUnits:"objectBoundingBox"},u.a.createElement("stop",{offset:"0",stopColor:"#fff",stopOpacity:"0"}),u.a.createElement("stop",{offset:"0.23",stopColor:"#fff",stopOpacity:"0.012"}),u.a.createElement("stop",{offset:"0.36",stopColor:"#fff",stopOpacity:"0.039"}),u.a.createElement("stop",{offset:"0.47",stopColor:"#fff",stopOpacity:"0.102"}),u.a.createElement("stop",{offset:"0.57",stopColor:"#fff",stopOpacity:"0.18"}),u.a.createElement("stop",{offset:"0.67",stopColor:"#fff",stopOpacity:"0.278"}),u.a.createElement("stop",{offset:"0.75",stopColor:"#fff",stopOpacity:"0.412"}),u.a.createElement("stop",{offset:"0.83",stopColor:"#fff",stopOpacity:"0.561"}),u.a.createElement("stop",{offset:"0.91",stopColor:"#fff",stopOpacity:"0.741"}),u.a.createElement("stop",{offset:"0.98",stopColor:"#fff",stopOpacity:"0.929"}),u.a.createElement("stop",{offset:"1",stopColor:"#fff"})),u.a.createElement("clipPath",{id:"clip-elastic_icon"},u.a.createElement("rect",{width:"300",height:"225"}))),u.a.createElement("g",{id:"elastic_icon","data-name":"elastic icon",clipPath:"url(#clip-elastic_icon)"},u.a.createElement("rect",{width:"300",height:"225",fill:"#fff"}),u.a.createElement("g",{id:"Rectangle_278","data-name":"Rectangle 278",transform:"translate(232 159)",fill:"#88c6c3",stroke:"#707070",strokeWidth:"1",opacity:"0.747"},u.a.createElement("rect",{width:"54",height:"54",stroke:"none"}),u.a.createElement("rect",{x:"0.5",y:"0.5",width:"53",height:"53",fill:"none"})),u.a.createElement("g",{id:"Rectangle_8","data-name":"Rectangle 8",transform:"translate(7 148)",fill:"#88c6c3",stroke:"#707070",strokeWidth:"1",opacity:"0.747"},u.a.createElement("rect",{width:"70",height:"70",stroke:"none"}),u.a.createElement("rect",{x:"0.5",y:"0.5",width:"69",height:"69",fill:"none"})),u.a.createElement("g",{id:"Rectangle_258","data-name":"Rectangle 258",transform:"translate(224 6)",fill:"#88c6c3",stroke:"#707070",strokeWidth:"1",opacity:"0.747"},u.a.createElement("rect",{width:"70",height:"100",stroke:"none"}),u.a.createElement("rect",{x:"0.5",y:"0.5",width:"69",height:"99",fill:"none"})),u.a.createElement("g",{id:"Rectangle_259","data-name":"Rectangle 259",transform:"translate(71 64)",fill:"#88c6c3",stroke:"#707070",strokeWidth:"1",opacity:"0.747"},u.a.createElement("rect",{width:"115",height:"75",stroke:"none"}),u.a.createElement("rect",{x:"0.5",y:"0.5",width:"114",height:"74",fill:"none"})),u.a.createElement("g",{id:"Rectangle_260","data-name":"Rectangle 260",transform:"translate(99 87)",fill:"#88c6c3",stroke:"#707070",strokeWidth:"1",opacity:"0.747"},u.a.createElement("rect",{width:"115",height:"75",stroke:"none"}),u.a.createElement("rect",{x:"0.5",y:"0.5",width:"114",height:"74",fill:"none"})),u.a.createElement("g",{id:"Group_689","data-name":"Group 689"},u.a.createElement("g",{id:"Group_687","data-name":"Group 687",transform:"translate(0 3)"},u.a.createElement("path",{id:"checkbox",d:"M258.766,37.316v146.5H39.053V37.316Zm40.07-39.254h-300v225h300Z",transform:"translate(1.164 -1.063)",fill:"#010101",fillRule:"evenodd",opacity:"0.246"}),u.a.createElement("g",{id:"Path_821","data-name":"Path 821",transform:"translate(40 36)",fill:"none"},u.a.createElement("path",{d:"M0,0H220V147H0Z",stroke:"none"}),u.a.createElement("path",{d:"M 2 2 L 2 145 L 218 145 L 218 2 L 172.9869689941406 2 L 2 2 M 0 0 L 172.9869689941406 0 L 220 0 L 220 147 L 0 147 L 0 0 Z",stroke:"none",fill:"#01579b"}))),u.a.createElement("g",{id:"Rectangle_257","data-name":"Rectangle 257",transform:"translate(40 39)",fill:"#fff",stroke:"#01579b",strokeWidth:"2"},u.a.createElement("rect",{width:"20",height:"147",stroke:"none"}),u.a.createElement("rect",{x:"1",y:"1",width:"18",height:"145",fill:"none"})),u.a.createElement("g",{id:"Group_688","data-name":"Group 688",transform:"translate(-27.5 -126)"},u.a.createElement("circle",{id:"teal_circle","data-name":"teal circle",cx:"7.5",cy:"7.5",r:"7.5",transform:"translate(70 171)",fill:"#009688"}),u.a.createElement("g",{id:"Group_333","data-name":"Group 333",transform:"translate(70 171)",opacity:"0.12"},u.a.createElement("path",{id:"gradient_border_2","data-name":"gradient border 2",d:"M3408,959.089A4.911,4.911,0,1,1,3403.09,964a4.911,4.911,0,0,1,4.911-4.911m0-.089a5,5,0,1,0,5,5,5,5,0,0,0-5-5Z",transform:"translate(-3403 -959)",fill:"url(#linear-gradient)"}),u.a.createElement("path",{id:"gradient_border_1","data-name":"gradient border 1",d:"M3408,959.089A4.911,4.911,0,1,1,3403.09,964a4.911,4.911,0,0,1,4.911-4.911m0-.089a5,5,0,1,0,5,5,5,5,0,0,0-5-5Z",transform:"translate(-3403 -959)",fill:"url(#linear-gradient-2)"})))))))}function nn(e){return u.a.createElement(en.a,e,u.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"120",height:"90",viewBox:"0 0 300 225"},u.a.createElement("defs",null,u.a.createElement("linearGradient",{id:"linear-gradient",x1:"0.5",y1:"1",x2:"0.5",gradientUnits:"objectBoundingBox"},u.a.createElement("stop",{offset:"0"}),u.a.createElement("stop",{offset:"0.14",stopOpacity:"0.631"}),u.a.createElement("stop",{offset:"1",stopOpacity:"0"})),u.a.createElement("linearGradient",{id:"linear-gradient-2",x1:"0.5",y1:"1",x2:"0.5",gradientUnits:"objectBoundingBox"},u.a.createElement("stop",{offset:"0",stopColor:"#fff",stopOpacity:"0"}),u.a.createElement("stop",{offset:"0.23",stopColor:"#fff",stopOpacity:"0.012"}),u.a.createElement("stop",{offset:"0.36",stopColor:"#fff",stopOpacity:"0.039"}),u.a.createElement("stop",{offset:"0.47",stopColor:"#fff",stopOpacity:"0.102"}),u.a.createElement("stop",{offset:"0.57",stopColor:"#fff",stopOpacity:"0.18"}),u.a.createElement("stop",{offset:"0.67",stopColor:"#fff",stopOpacity:"0.278"}),u.a.createElement("stop",{offset:"0.75",stopColor:"#fff",stopOpacity:"0.412"}),u.a.createElement("stop",{offset:"0.83",stopColor:"#fff",stopOpacity:"0.561"}),u.a.createElement("stop",{offset:"0.91",stopColor:"#fff",stopOpacity:"0.741"}),u.a.createElement("stop",{offset:"0.98",stopColor:"#fff",stopOpacity:"0.929"}),u.a.createElement("stop",{offset:"1",stopColor:"#fff"})),u.a.createElement("clipPath",{id:"clip-mosaic_icon"},u.a.createElement("rect",{width:"300",height:"225"}))),u.a.createElement("g",{id:"mosaic_icon","data-name":"mosaic icon",clipPath:"url(#clip-mosaic_icon)"},u.a.createElement("rect",{width:"300",height:"225",fill:"#fff"}),u.a.createElement("path",{id:"checkbox",d:"M258.766,37.316v146.5H39.053V37.316Zm40.07-39.254h-300v225h300Z",transform:"translate(1.163 1.938)",fill:"#010101",fillRule:"evenodd",opacity:"0.5"}),u.a.createElement("path",{id:"checkbox-2","data-name":"checkbox",d:"M258.766,37.316v146.5H39.053V37.316Zm40.07-39.254h-300v225h300Z",transform:"translate(1.164 1.938)",fill:"#010101",fillRule:"evenodd",opacity:"0.246"}),u.a.createElement("g",{id:"Path_821","data-name":"Path 821",transform:"translate(40 39)",fill:"none"},u.a.createElement("path",{d:"M0,0H220V147H0Z",stroke:"none"}),u.a.createElement("path",{d:"M 2 2 L 2 145 L 218 145 L 218 2 L 172.9869689941406 2 L 2 2 M 0 0 L 172.9869689941406 0 L 220 0 L 220 147 L 0 147 L 0 0 Z",stroke:"none",fill:"#01579b"})),u.a.createElement("g",{id:"Rectangle_257","data-name":"Rectangle 257",transform:"translate(40 39)",fill:"#fff",stroke:"#01579b",strokeWidth:"2"},u.a.createElement("rect",{width:"20",height:"147",stroke:"none"}),u.a.createElement("rect",{x:"1",y:"1",width:"18",height:"145",fill:"none"})),u.a.createElement("g",{id:"Group_688","data-name":"Group 688",transform:"translate(-27.5 -126)"},u.a.createElement("circle",{id:"teal_circle","data-name":"teal circle",cx:"7.5",cy:"7.5",r:"7.5",transform:"translate(70 171)",fill:"#009688"}),u.a.createElement("g",{id:"Group_333","data-name":"Group 333",transform:"translate(70 171)",opacity:"0.12"},u.a.createElement("path",{id:"gradient_border_2","data-name":"gradient border 2",d:"M3408,959.089A4.911,4.911,0,1,1,3403.09,964a4.911,4.911,0,0,1,4.911-4.911m0-.089a5,5,0,1,0,5,5,5,5,0,0,0-5-5Z",transform:"translate(-3403 -959)",fill:"url(#linear-gradient)"}),u.a.createElement("path",{id:"gradient_border_1","data-name":"gradient border 1",d:"M3408,959.089A4.911,4.911,0,1,1,3403.09,964a4.911,4.911,0,0,1,4.911-4.911m0-.089a5,5,0,1,0,5,5,5,5,0,0,0-5-5Z",transform:"translate(-3403 -959)",fill:"url(#linear-gradient-2)"}))),u.a.createElement("g",{id:"Rectangle_270","data-name":"Rectangle 270",transform:"translate(60 40.647)",fill:"#88c6c3",stroke:"#707070",strokeWidth:"1",opacity:"0.747"},u.a.createElement("rect",{width:"99",height:"72",stroke:"none"}),u.a.createElement("rect",{x:"0.5",y:"0.5",width:"98",height:"71",fill:"none"})),u.a.createElement("g",{id:"Rectangle_271","data-name":"Rectangle 271",transform:"translate(159 40.647)",fill:"#88c6c3",stroke:"#707070",strokeWidth:"1",opacity:"0.747"},u.a.createElement("rect",{width:"99",height:"72",stroke:"none"}),u.a.createElement("rect",{x:"0.5",y:"0.5",width:"98",height:"71",fill:"none"})),u.a.createElement("g",{id:"Rectangle_272","data-name":"Rectangle 272",transform:"translate(192 112.647)",fill:"#88c6c3",stroke:"#707070",strokeWidth:"1",opacity:"0.747"},u.a.createElement("rect",{width:"66",height:"71.45",stroke:"none"}),u.a.createElement("rect",{x:"0.5",y:"0.5",width:"65",height:"70.45",fill:"none"})),u.a.createElement("g",{id:"Rectangle_284","data-name":"Rectangle 284",transform:"translate(60 112.647)",fill:"#88c6c3",stroke:"#707070",strokeWidth:"1",opacity:"0.747"},u.a.createElement("rect",{width:"66",height:"71.45",stroke:"none"}),u.a.createElement("rect",{x:"0.5",y:"0.5",width:"65",height:"70.45",fill:"none"})),u.a.createElement("g",{id:"Rectangle_285","data-name":"Rectangle 285",transform:"translate(126 112.647)",fill:"#88c6c3",stroke:"#707070",strokeWidth:"1",opacity:"0.747"},u.a.createElement("rect",{width:"66",height:"71.45",stroke:"none"}),u.a.createElement("rect",{x:"0.5",y:"0.5",width:"65",height:"70.45",fill:"none"})))))}function rn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function on(e,t,n){return t&&rn(e.prototype,t),n&&rn(e,n),e}function an(e,t){return(an=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=un(e);if(t){var o=un(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return cn(this,n)}}function cn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?ln(e):t}function ln(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function un(e){return(un=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var dn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&an(e,t)}(n,e);var t=sn(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).handleWorkspaceTypeChange=r.handleWorkspaceTypeChange.bind(ln(r)),r}return on(n,null,[{key:"setInitialFocus",value:function(e,t){var n=e.querySelectorAll('li[value="'.concat(t,'"]'));n&&0!==n.length&&n[0].focus()}}]),on(n,[{key:"handleWorkspaceTypeChange",value:function(e){var t=this.props,n=t.handleClose;(0,t.updateWorkspace)({type:e}),n()}},{key:"render",value:function(){var e=this,t=this.props,r=t.classes,o=t.container,i=t.handleClose,a=t.open,s=t.children,c=t.t,l=t.workspaceType;return u.a.createElement(z,{"aria-labelledby":"workspace-selection-dialog-title",container:o,id:"workspace-selection-dialog",onClose:i,onEntered:function(e){return n.setInitialFocus(e,l)},onEscapeKeyDown:i,open:a},u.a.createElement(W,{id:"workspace-selection-dialog-title",disableTypography:!0},u.a.createElement(L.a,{variant:"h2"},c("workspaceSelectionTitle"))),u.a.createElement(ie,null,s,u.a.createElement($.a,{classes:{root:r.list},selected:l},u.a.createElement(Z.a,{className:r.menuItem,onClick:function(){return e.handleWorkspaceTypeChange("elastic")},selected:"elastic"===l,value:"elastic"},u.a.createElement(Kt,{className:r.card},u.a.createElement(tn,{className:r.svgIcon,viewBox:"0 0 120 90"}),u.a.createElement("div",{className:r.details},u.a.createElement(Qt,{classes:{root:r.root},className:r.content},u.a.createElement(L.a,{className:r.headline,component:"p",variant:"h3"},c("elastic")),u.a.createElement(L.a,{variant:"body1"},c("elasticDescription")))))),u.a.createElement(Z.a,{className:r.menuItem,onClick:function(){return e.handleWorkspaceTypeChange("mosaic")},selected:"mosaic"===l,value:"mosaic"},u.a.createElement(Kt,{className:r.card},u.a.createElement(nn,{className:r.svgIcon,viewBox:"0 0 120 90"}),u.a.createElement("div",{className:r.details},u.a.createElement(Qt,{className:r.content,classes:{root:r.root}},u.a.createElement(L.a,{className:r.headline,component:"p",variant:"h3"},c("mosaic")),u.a.createElement(L.a,{variant:"body1"},c("mosaicDescription")))))))))}}]),n}(l.Component);dn.defaultProps={children:null,container:null,open:!1,t:function(e){return e}};var pn={updateWorkspace:f.i},hn=Object(r.compose)(Object(i.a)(),Object(s.a)((function(e){return{card:{backgroundColor:"transparent",borderRadius:"0",boxShadow:"0 0 transparent",display:"flex"},content:{flex:"1 0 auto"},details:{display:"flex",flexDirection:"column"},headline:{paddingBottom:"6px"},list:{"&active":{outline:"none"},"&focus":{outline:"none"},outline:"none"},media:{flex:"0 0 120px",height:"90px"},menuItem:{height:"auto",overflow:"auto",whiteSpace:"inherit"},root:{"&:last-child":{paddingBottom:"12px"},paddingBottom:0,paddingTop:0,textAlign:"left"},svgIcon:{flexShrink:0,height:"90px",width:"120px"}}})),Object(o.b)((function(e){return{workspaceType:Object(Re.d)(e)}}),pn),Object(c.a)("WorkspaceSelectionDialog"))(dn),fn=n(39),mn=n(982),gn=n.n(mn);function vn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yn(e,t,n){return t&&vn(e.prototype,t),n&&vn(e,n),e}function bn(e,t){return(bn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xn(e);if(t){var o=xn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return On(this,n)}}function On(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?En(e):t}function En(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xn(e){return(xn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Tn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bn(e,t)}(n,e);var t=wn(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).selectedItemRef=u.a.createRef(),r.handleThemeChange=r.handleThemeChange.bind(En(r)),r}return yn(n,null,[{key:"setInitialFocus",value:function(e,t){var n=e.querySelectorAll('li[value="'.concat(t,'"]'));n&&0!==n.length&&n[0].focus()}}]),yn(n,[{key:"handleThemeChange",value:function(e){var t=this.props,n=t.setSelectedTheme,r=t.handleClose;n(e),r()}},{key:"render",value:function(){var e=this,t=this.props,r=t.classes,o=t.handleClose,i=t.open,a=t.selectedTheme,s=t.t,c=t.themeIds;return u.a.createElement(z,{onClose:o,onEntered:function(e){return n.setInitialFocus(e,a)},open:i},u.a.createElement(W,{id:"change-the-dialog-title",disableTypography:!0},u.a.createElement(L.a,{variant:"h2"},s("changeTheme"))),u.a.createElement(te,{className:r.dialogContent},u.a.createElement($.a,null,c.map((function(t){return u.a.createElement(Z.a,{key:t,className:r.listitem,onClick:function(){e.handleThemeChange(t)},selected:t===a,value:t},u.a.createElement(Pt.a,null,u.a.createElement(gn.a,{className:r[t]})),u.a.createElement(Ct.a,null,s(t)))})))))}}]),n}(l.Component);Tn.defaultProps={open:!1,themeIds:[]};var Sn=Object(r.compose)(Object(i.a)(),Object(s.a)((function(e){return{dark:{color:"#000000"},dialogContent:{padding:0},light:{color:"#BDBDBD"},listitem:{"&:focus":{backgroundColor:e.palette.action.focus},"&:hover":{backgroundColor:e.palette.action.hover},cursor:"pointer"}}})),Object(o.b)((function(e){return{selectedTheme:Object(xt.a)(e).selectedTheme,themeIds:Object(xt.i)(e)}}),(function(e,t){t.windowId;return{setSelectedTheme:function(t){return e(St.d({selectedTheme:t}))}}})),Object(c.a)("ChangeThemeDialog"))(Tn),Pn=n(100);function Cn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _n(e,t){return(_n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=In(e);if(t){var o=In(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return kn(this,n)}}function kn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?Rn(e):t}function Rn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function In(e){return(In=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Dn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_n(e,t)}(i,e);var t,n,r,o=jn(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={changeTheme:{},toggleZoom:{},workspaceSelection:{}},t.handleMenuItemClick=t.handleMenuItemClick.bind(Rn(t)),t.handleMenuItemClose=t.handleMenuItemClose.bind(Rn(t)),t}return t=i,(n=[{key:"handleMenuItemClick",value:function(e,t){var n={};n[e]={},n[e].open=!0,n[e].anchorEl=t.currentTarget,this.setState(n)}},{key:"handleMenuItemClose",value:function(e){var t=this;return function(n){var r={};r[e]={},r[e].open=!1,r[e].anchorEl=null,t.setState(r)}}},{key:"handleZoomToggleClick",value:function(){var e=this.props;(0,e.toggleZoomControls)(!e.showZoomControls)}},{key:"render",value:function(){var e=this,t=this.props,n=t.containerId,r=t.handleClose,o=t.anchorEl,i=t.showThemePicker,a=t.isWorkspaceAddVisible,s=t.t,c=t.showZoomControls,l=this.state,d=l.changeTheme,p=l.toggleZoom,h=l.workspaceSelection,f=document.querySelector("#".concat(n," .").concat(Object(fn.a)("viewer")));return u.a.createElement(u.a.Fragment,null,u.a.createElement(Tt.a,{id:"workspace-menu",container:f,anchorEl:o,anchorOrigin:{horizontal:"right",vertical:"top"},transformOrigin:{horizontal:"left",vertical:"top"},open:Boolean(o),onClose:r},u.a.createElement(Z.a,{"aria-haspopup":"true",disabled:a,onClick:function(t){e.handleZoomToggleClick(t),r(t)},"aria-owns":p.anchorEl?"toggle-zoom-menu":void 0},u.a.createElement(L.a,{variant:"body1"},s(c?"hideZoomControls":"showZoomControls"))),u.a.createElement(Z.a,{"aria-haspopup":"true",onClick:function(t){e.handleMenuItemClick("workspaceSelection",t),r(t)},"aria-owns":h.anchorEl?"workspace-selection":void 0},u.a.createElement(L.a,{variant:"body1"},s("selectWorkspaceMenu"))),u.a.createElement(Xt,{label:s("language")},u.a.createElement(Nt,{afterSelect:r})),i&&u.a.createElement(Z.a,{"aria-haspopup":"true",onClick:function(t){e.handleMenuItemClick("changeTheme",t),r(t)},"aria-owns":d.anchorEl?"change-theme":void 0},u.a.createElement(L.a,{variant:"body1"},s("changeTheme"))),u.a.createElement(Pn.a,this.props)),Boolean(d.open)&&u.a.createElement(Sn,{container:f,handleClose:this.handleMenuItemClose("changeTheme"),open:Boolean(d.open)}),Boolean(h.open)&&u.a.createElement(hn,{open:Boolean(h.open),container:f,handleClose:this.handleMenuItemClose("workspaceSelection")}))}}])&&Cn(t.prototype,n),r&&Cn(t,r),i}(l.Component);Dn.defaultProps={anchorEl:null,isWorkspaceAddVisible:!1,showThemePicker:!1,showZoomControls:!1,t:function(e){return e},toggleZoomControls:function(){}};var Mn={toggleZoomControls:f.h},An=Object(r.compose)(Object(i.a)(),Object(o.b)((function(e){return{containerId:Object(xt.b)(e),isWorkspaceAddVisible:Object(m.i)(e).isWorkspaceAddVisible,showThemePicker:Object(xt.i)(e).length>0,showZoomControls:Object(xt.f)(e)}}),Mn),Object(c.a)("WorkspaceMenu"))(Dn);function Bn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nn(e,t){return(Nn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Wn(e);if(t){var o=Wn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ln(this,n)}}function Ln(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?Hn(e):t}function Hn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wn(e){return(Wn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Fn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nn(e,t)}(i,e);var t,n,r,o=zn(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={anchorEl:null},t.handleMenuClick=t.handleMenuClick.bind(Hn(t)),t.handleMenuClose=t.handleMenuClose.bind(Hn(t)),t}return t=i,(n=[{key:"handleMenuClick",value:function(e){this.setState({anchorEl:e.currentTarget})}},{key:"handleMenuClose",value:function(){this.setState({anchorEl:null})}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.t,r=this.state.anchorEl;return u.a.createElement(u.a.Fragment,null,u.a.createElement(dt.a,{"aria-haspopup":"true","aria-label":n("workspaceMenu"),"aria-owns":r?"workspace-menu":void 0,className:p()(t.ctrlBtn,r?t.ctrlBtnSelected:null),id:"menuBtn",onClick:this.handleMenuClick},u.a.createElement(Et.a,null)),u.a.createElement(An,{anchorEl:r,handleClose:this.handleMenuClose}))}}])&&Bn(t.prototype,n),r&&Bn(t,r),i}(l.Component);Fn.defaultProps={t:function(e){return e}};var Vn=Object(r.compose)(Object(i.a)(),Object(s.a)((function(e){return{ctrlBtn:{margin:e.spacing(1)},ctrlBtnSelected:{backgroundColor:e.palette.action.selected}}})),Object(c.a)("WorkspaceMenuButton"))(Fn),Un=n(983),$n=n.n(Un),Zn=n(985),Gn=n.n(Zn),qn=n(984),Xn=n.n(qn),Yn=n(357),Kn=n(35),Jn=n(111),Qn=n(481),er=l.forwardRef((function(e,t){var n=e.action,r=e.classes,o=e.className,i=e.message,a=e.role,s=void 0===a?"alert":a,c=Object(b.a)(e,["action","classes","className","message","role"]);return l.createElement(A.a,Object(y.a)({role:s,square:!0,elevation:6,className:Object(O.a)(r.root,o),ref:t},c),l.createElement("div",{className:r.message},i),n?l.createElement("div",{className:r.action},n):null)})),tr=Object(s.a)((function(e){var t="light"===e.palette.type?.8:.98,n=Object(a.c)(e.palette.background.default,t);return{root:Object(y.a)({},e.typography.body2,Object(w.a)({color:e.palette.getContrastText(n),backgroundColor:n,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:e.shape.borderRadius,flexGrow:1},e.breakpoints.up("sm"),{flexGrow:"initial",minWidth:288})),message:{padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}}}),{name:"MuiSnackbarContent"})(er),nr=l.forwardRef((function(e,t){var n=e.action,r=e.anchorOrigin,o=(r=void 0===r?{vertical:"bottom",horizontal:"center"}:r).vertical,i=r.horizontal,a=e.autoHideDuration,s=void 0===a?null:a,c=e.children,u=e.classes,d=e.className,p=e.ClickAwayListenerProps,h=e.ContentProps,f=e.disableWindowBlurListener,m=void 0!==f&&f,g=e.message,v=e.onClose,w=e.onEnter,x=e.onEntered,T=e.onEntering,S=e.onExit,C=e.onExited,_=e.onExiting,j=e.onMouseEnter,k=e.onMouseLeave,R=e.open,I=e.resumeHideDuration,D=e.TransitionComponent,M=void 0===D?Qn.a:D,A=e.transitionDuration,B=void 0===A?{enter:P.b.enteringScreen,exit:P.b.leavingScreen}:A,N=e.TransitionProps,z=Object(b.a)(e,["action","anchorOrigin","autoHideDuration","children","classes","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onClose","onEnter","onEntered","onEntering","onExit","onExited","onExiting","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"]),L=l.useRef(),H=l.useState(!0),W=H[0],F=H[1],V=Object(Kn.a)((function(){v&&v.apply(void 0,arguments)})),U=Object(Kn.a)((function(e){v&&null!=e&&(clearTimeout(L.current),L.current=setTimeout((function(){V(null,"timeout")}),e))}));l.useEffect((function(){return R&&U(s),function(){clearTimeout(L.current)}}),[R,s,U]);var $=function(){clearTimeout(L.current)},Z=l.useCallback((function(){null!=s&&U(null!=I?I:.5*s)}),[s,I,U]);return l.useEffect((function(){if(!m&&R)return window.addEventListener("focus",Z),window.addEventListener("blur",$),function(){window.removeEventListener("focus",Z),window.removeEventListener("blur",$)}}),[m,Z,R]),!R&&W?null:l.createElement(Yn.a,Object(y.a)({onClickAway:function(e){v&&v(e,"clickaway")}},p),l.createElement("div",Object(y.a)({className:Object(O.a)(u.root,u["anchorOrigin".concat(Object(E.a)(o)).concat(Object(E.a)(i))],d),onMouseEnter:function(e){j&&j(e),$()},onMouseLeave:function(e){k&&k(e),Z()},ref:t},z),l.createElement(M,Object(y.a)({appear:!0,in:R,onEnter:Object(Jn.a)((function(){F(!1)}),w),onEntered:x,onEntering:T,onExit:S,onExited:Object(Jn.a)((function(){F(!0)}),C),onExiting:_,timeout:B,direction:"top"===o?"down":"up"},N),c||l.createElement(tr,Object(y.a)({message:g,action:n},h)))))})),rr=Object(s.a)((function(e){var t={top:8},n={bottom:8},r={justifyContent:"flex-end"},o={justifyContent:"flex-start"},i={top:24},a={bottom:24},s={right:24},c={left:24},l={left:"50%",right:"auto",transform:"translateX(-50%)"};return{root:{zIndex:e.zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},anchorOriginTopCenter:Object(y.a)({},t,Object(w.a)({},e.breakpoints.up("sm"),Object(y.a)({},i,l))),anchorOriginBottomCenter:Object(y.a)({},n,Object(w.a)({},e.breakpoints.up("sm"),Object(y.a)({},a,l))),anchorOriginTopRight:Object(y.a)({},t,r,Object(w.a)({},e.breakpoints.up("sm"),Object(y.a)({left:"auto"},i,s))),anchorOriginBottomRight:Object(y.a)({},n,r,Object(w.a)({},e.breakpoints.up("sm"),Object(y.a)({left:"auto"},a,s))),anchorOriginTopLeft:Object(y.a)({},t,o,Object(w.a)({},e.breakpoints.up("sm"),Object(y.a)({right:"auto"},i,c))),anchorOriginBottomLeft:Object(y.a)({},n,o,Object(w.a)({},e.breakpoints.up("sm"),Object(y.a)({right:"auto"},a,c)))}}),{flip:!1,name:"MuiSnackbar"})(nr),or=n(870),ir=n(990),ar=n.n(ir),sr=n(986);function cr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lr(e,t){return(lr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ur(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=hr(e);if(t){var o=hr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return dr(this,n)}}function dr(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?pr(e):t}function pr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hr(e){return(hr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var fr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lr(e,t)}(i,e);var t,n,r,o=ur(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={copied:!1},t.onCopy=t.onCopy.bind(pr(t)),t.handleClose=t.handleClose.bind(pr(t)),t}return t=i,(n=[{key:"onCopy",value:function(){this.setState({copied:!0})}},{key:"handleClose",value:function(){var e=this.props.handleClose;e()}},{key:"exportedState",value:function(){var e=this.props.exportableState;return JSON.stringify(e,null,2)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.container,r=e.open,o=e.t;return this.state.copied?u.a.createElement(rr,{anchorOrigin:{horizontal:"center",vertical:"top"},open:!0,autoHideDuration:6e3,onClose:this.handleClose,message:o("exportCopied"),action:u.a.createElement(or.a,{size:"small","aria-label":o("dismiss"),color:"inherit",onClick:this.handleClose},u.a.createElement(ar.a,{fontSize:"small"}))}):u.a.createElement(z,{id:"workspace-settings",container:n,open:r,onClose:this.handleClose,scroll:"paper",fullWidth:!0,maxWidth:"sm"},u.a.createElement(W,{id:"form-dialog-title",disableTypography:!0},u.a.createElement(L.a,{variant:"h2"},o("downloadExport"))),u.a.createElement(ie,null,t,u.a.createElement("pre",null,this.exportedState())),u.a.createElement(q,null,u.a.createElement(F.a,{onClick:this.handleClose},o("cancel")),u.a.createElement(sr.CopyToClipboard,{onCopy:this.onCopy,text:this.exportedState()},u.a.createElement(F.a,{variant:"contained",color:"primary"},o("copy")))))}}])&&cr(t.prototype,n),r&&cr(t,r),i}(l.Component);fr.defaultProps={children:null,container:null,open:!1,t:function(e){return e}};var mr=Object(r.compose)(Object(i.a)(),Object(o.b)((function(e){return{exportableState:Object(xt.c)(e)}}),{}),Object(c.a)("WorkspaceExport"))(fr),gr=n(930);function vr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yr(e,t){return(yr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function br(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Er(e);if(t){var o=Er(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return wr(this,n)}}function wr(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?Or(e):t}function Or(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Er(e){return(Er=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yr(e,t)}(i,e);var t,n,r,o=br(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={configImportValue:""},t.handleImportConfig=t.handleImportConfig.bind(Or(t)),t.handleChange=t.handleChange.bind(Or(t)),t}return t=i,(n=[{key:"handleChange",value:function(e){e.preventDefault(),this.setState({configImportValue:e.target.value})}},{key:"handleImportConfig",value:function(e){var t=this.props,n=t.handleClose,r=t.importConfig,o=this.state.configImportValue;try{r(JSON.parse(o)),n()}catch(e){(0,this.props.addError)(e.toString())}}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.handleClose,r=e.open,o=e.t;return u.a.createElement(z,{"aria-labelledby":"workspace-import-title",id:"workspace-import",onEscapeKeyDown:n,onClose:n,open:r,fullWidth:!0,maxWidth:"sm"},u.a.createElement(W,{id:"workspace-import-title",disableTypography:!0},u.a.createElement(L.a,{variant:"h2"},o("importWorkspace"))),u.a.createElement(ie,null,u.a.createElement(gr.a,{className:t.textField,id:"workspace-import-input",multiline:!0,onChange:this.handleChange,rows:"15",variant:"filled",inputProps:{autoFocus:"autofocus",className:t.textInput},helperText:o("importWorkspaceHint")})),u.a.createElement(q,null,u.a.createElement(F.a,{className:t.cancelBtn,onClick:n},o("cancel")),u.a.createElement(F.a,{color:"primary",onClick:this.handleImportConfig,variant:"contained"},o("import"))))}}])&&vr(t.prototype,n),r&&vr(t,r),i}(l.Component);xr.defaultProps={classes:{},open:!1,t:function(e){return e}};var Tr={addError:ke.a,importConfig:St.b},Sr=Object(r.compose)(Object(i.a)(),Object(s.a)((function(e){return{cancelBtn:{color:e.palette.text.primary},textField:{width:"100%"},textInput:{fontFamily:"monospace"}}})),Object(o.b)(null,Tr),Object(c.a)("WorkspaceImport"))(xr);function Pr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Cr(e,t){return(Cr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Rr(e);if(t){var o=Rr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return jr(this,n)}}function jr(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?kr(e):t}function kr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rr(e){return(Rr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ir=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cr(e,t)}(i,e);var t,n,r,o=_r(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={exportWorkspace:{},importWorkspace:{}},t.handleMenuItemClick=t.handleMenuItemClick.bind(kr(t)),t.handleMenuItemClose=t.handleMenuItemClose.bind(kr(t)),t}return t=i,(n=[{key:"handleMenuItemClick",value:function(e){var t={};t[e]={},t[e].open=!0,this.setState(t)}},{key:"handleMenuItemClose",value:function(e){var t=this;return function(n){var r={};r[e]={},r[e].open=!1,t.setState(r)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.anchorEl,r=t.containerId,o=t.handleClose,i=t.t,a=this.state,s=a.exportWorkspace,c=a.importWorkspace,l=document.querySelector("#".concat(r," .").concat(Object(fn.a)("viewer")));return u.a.createElement(u.a.Fragment,null,u.a.createElement(Tt.a,{id:"workspace-options-menu",container:l,anchorEl:n,anchorOrigin:{horizontal:"right",vertical:"top"},transformOrigin:{horizontal:"left",vertical:"top"},open:Boolean(n),onClose:o},u.a.createElement(Z.a,{"aria-haspopup":"true",onClick:function(){e.handleMenuItemClick("exportWorkspace"),o()},"aria-owns":s.open?"workspace-export":void 0},u.a.createElement(Pt.a,null,u.a.createElement(Xn.a,null)),u.a.createElement(L.a,{variant:"body1"},i("downloadExportWorkspace"))),u.a.createElement(Z.a,{"aria-haspopup":"true",id:"workspace-menu-import",onClick:function(){e.handleMenuItemClick("importWorkspace"),o()},"aria-owns":s.open?"workspace-import":void 0},u.a.createElement(Pt.a,null,u.a.createElement(Gn.a,null)),u.a.createElement(L.a,{variant:"body1"},i("importWorkspace"))),u.a.createElement(Pn.a,this.props)),Boolean(s.open)&&u.a.createElement(mr,{open:Boolean(s.open),container:l,handleClose:this.handleMenuItemClose("exportWorkspace")}),Boolean(c.open)&&u.a.createElement(Sr,{open:Boolean(c.open),container:l,handleClose:this.handleMenuItemClose("importWorkspace")}))}}])&&Pr(t.prototype,n),r&&Pr(t,r),i}(l.Component);Ir.defaultProps={anchorEl:null};var Dr=Object(r.compose)(Object(i.a)(),Object(o.b)((function(e){return{containerId:Object(xt.b)(e)}}),null))(Ir);function Mr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ar(e,t){return(Ar=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Br(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Lr(e);if(t){var o=Lr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Nr(this,n)}}function Nr(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?zr(e):t}function zr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lr(e){return(Lr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Hr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ar(e,t)}(i,e);var t,n,r,o=Br(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={anchorEl:null},t.handleMenuClick=t.handleMenuClick.bind(zr(t)),t.handleMenuClose=t.handleMenuClose.bind(zr(t)),t}return t=i,(n=[{key:"handleMenuClick",value:function(e){this.setState({anchorEl:e.currentTarget})}},{key:"handleMenuClose",value:function(){this.setState({anchorEl:null})}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.t,r=this.state.anchorEl;return u.a.createElement(u.a.Fragment,null,u.a.createElement(dt.a,{"aria-label":n("workspaceOptions"),className:p()(t.ctrlBtn,r?t.ctrlBtnSelected:null),onClick:this.handleMenuClick},u.a.createElement($n.a,null)),u.a.createElement(Dr,{anchorEl:r,handleClose:this.handleMenuClose}))}}])&&Mr(t.prototype,n),r&&Mr(t,r),i}(l.Component),Wr=Object(r.compose)(Object(s.a)((function(e){return{ctrlBtn:{margin:e.spacing(1)},ctrlBtnSelected:{backgroundColor:e.palette.action.selected}}})),Object(i.a)(),Object(c.a)("WorkspaceOptionsButton"))(Hr),Fr=n(978),Vr=n.n(Fr),Ur=n(201),$r=n(926);function Zr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qr(e,t){return(qr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kr(e);if(t){var o=Kr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Yr(this,n)}}function Yr(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Kr(e){return(Kr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Jr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qr(e,t)}(i,e);var t,n,r,o=Xr(i);function i(){return Zr(this,i),o.apply(this,arguments)}return t=i,r=[{key:"focus2ndListIitem",value:function(e){!e.querySelectorAll("li")||e.querySelectorAll("li").length<2||e.querySelectorAll("li")[1].focus()}}],(n=[{key:"titleContent",value:function(e){var t=this.props,n=t.titles,r=t.t;return n[e]||r("untitled")}},{key:"render",value:function(){var e=this,t=this.props,n=t.containerId,r=t.handleClose,o=t.anchorEl,a=t.windowIds,s=t.focusWindow,c=t.t;return u.a.createElement(Tt.a,{anchorOrigin:{horizontal:"right",vertical:"top"},transformOrigin:{horizontal:"left",vertical:"top"},id:"window-list-menu",container:document.querySelector("#".concat(n," .").concat(Object(fn.a)("viewer"))),disableAutoFocusItem:!0,anchorEl:o,open:Boolean(o),onClose:r,onEntering:i.focus2ndListIitem},u.a.createElement($r.a,{role:"presentation",selected:!1,disabled:!0,tabIndex:"-1"},c("openWindows")),a.map((function(t,n){return u.a.createElement(Z.a,{key:t,onClick:function(e){s(t,!0),r(e)}},u.a.createElement(Ct.a,{primaryTypographyProps:{variant:"body1"}},e.titleContent(t)))})))}}])&&Gr(t.prototype,n),r&&Gr(t,r),i}(l.Component);Jr.defaultProps={anchorEl:null,t:function(e){return e},titles:{}};var Qr={focusWindow:h.b},eo=Object(r.compose)(Object(i.a)(),Object(o.b)((function(e){return{containerId:Object(xt.b)(e),titles:Object(Ur.e)(e),windowIds:Object(m.f)(e)}}),Qr),Object(c.a)("WindowList"))(Jr);function to(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function no(e,t){return(no=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ro(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ao(e);if(t){var o=ao(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return oo(this,n)}}function oo(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?io(e):t}function io(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ao(e){return(ao=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var so=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&no(e,t)}(i,e);var t,n,r,o=ro(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={windowListAnchor:null},t.handleClose=t.handleClose.bind(io(t)),t.handleOpen=t.handleOpen.bind(io(t)),t}return t=i,(n=[{key:"handleClose",value:function(){this.setState({windowListAnchor:null})}},{key:"handleOpen",value:function(e){this.setState({windowListAnchor:e.currentTarget})}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,r=t.disabled,o=t.t,i=t.windowCount,a=this.state.windowListAnchor;return u.a.createElement(u.a.Fragment,null,u.a.createElement(dt.a,{"aria-haspopup":"true","aria-label":o("listAllOpenWindows"),"aria-owns":a?"window-list":null,className:p()(n.ctrlBtn,a?n.ctrlBtnSelected:null),disabled:r,badge:!0,BadgeProps:{badgeContent:i,classes:{badge:n.badge}},onClick:function(t){return e.handleOpen(t)}},u.a.createElement(Vr.a,null)),Boolean(a)&&u.a.createElement(eo,{anchorEl:a,id:"window-list",open:Boolean(a),handleClose:this.handleClose}))}}])&&to(t.prototype,n),r&&to(t,r),i}(l.Component);so.defaultProps={classes:{},disabled:!1};var co=Object(r.compose)(Object(i.a)(),Object(s.a)((function(e){return{badge:{paddingLeft:12},ctrlBtn:{margin:e.spacing(1)},ctrlBtnSelected:{backgroundColor:e.palette.action.selected}}})),Object(o.b)((function(e){return{disabled:Object(m.i)(e).isWorkspaceAddVisible,windowCount:Object(m.f)(e).length}}),null),Object(c.a)("WindowListButton"))(so);function lo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function po(e,t){return(po=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ho(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=mo(e);if(t){var o=mo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return fo(this,n)}}function fo(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mo(e){return(mo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var go=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&po(e,t)}(i,e);var t,n,r,o=ho(i);function i(){return lo(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props.classes;return u.a.createElement(u.a.Fragment,null,u.a.createElement(co,null),u.a.createElement(Vn,null),u.a.createElement(Wr,null),u.a.createElement(wt,{className:e.ctrlBtn}),u.a.createElement(Pn.a,this.props))}}])&&uo(t.prototype,n),r&&uo(t,r),i}(l.Component);go.defaultProps={classes:{}};var vo=Object(r.compose)(Object(s.a)((function(e){return{ctrlBtn:{margin:e.spacing(1)}}})),Object(c.a)("WorkspaceControlPanelButtons"))(go);function yo(e){return u.a.createElement(en.a,Object.assign({viewBox:"0 0 60 55"},e),u.a.createElement("rect",{width:"18",height:"55"}),u.a.createElement("rect",{width:"18",height:"55",transform:"translate(42)"}),u.a.createElement("rect",{width:"18",height:"34",transform:"translate(21)"}))}function bo(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function wo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Eo(e,t){return(Eo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=So(e);if(t){var o=So(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return To(this,n)}}function To(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function So(e){return(So=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Po=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Eo(e,t)}(i,e);var t,n,r,o=xo(i);function i(){return wo(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.t,n=e.variant,r=bo(e,["t","variant"]);return u.a.createElement("div",r,"wide"===n&&u.a.createElement("div",null,u.a.createElement(L.a,{align:"center",component:"p",variant:"h3"},t("mirador"))),u.a.createElement(L.a,{align:"center"},u.a.createElement(or.a,{component:"a",href:"https://projectmirador.org",target:"_blank",rel:"noopener"},u.a.createElement(yo,{"aria-label":t("aboutMirador"),titleAccess:t("aboutMirador"),fontSize:"large"}))))}}])&&Oo(t.prototype,n),r&&Oo(t,r),i}(l.Component);Po.defaultProps={t:function(e){return e},variant:"default"};var Co=Object(c.a)("Branding")(Po);function _o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ko(e,t){return(ko=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ro(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Do(e);if(t){var o=Do(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Io(this,n)}}function Io(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Do(e){return(Do=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Mo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ko(e,t)}(i,e);var t,n,r,o=Ro(i);function i(){return _o(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.t,r=e.variant;return u.a.createElement(Ae,{className:p()(t.root,Object(fn.a)("workspace-control-panel"),"wide"===r?t.wide:null),color:"default",position:"absolute",component:"nav","aria-label":n("workspaceNavigation")},u.a.createElement(Be.a,{disableGutters:!0,className:t.toolbar},u.a.createElement(at,null),u.a.createElement("div",{className:t.workspaceButtons},u.a.createElement(vo,null))),u.a.createElement(Co,{className:t.branding,t:n,variant:r}))}}])&&jo(t.prototype,n),r&&jo(t,r),i}(l.Component);function Ao(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Mo.defaultProps={variant:"default"};var Bo=Object(r.compose)(Object(i.a)(),Object(s.a)((function(e){var t;return{branding:(t={display:"flex",position:"absolute"},Ao(t,e.breakpoints.up("xs"),{display:"none"}),Ao(t,e.breakpoints.up("sm"),{bottom:0,display:"block",float:"none",right:"auto",width:"100%"}),Ao(t,"right",0),t),ctrlBtn:{margin:e.spacing(1)},drawer:{overflowX:"hidden"},root:Ao({height:64},e.breakpoints.up("sm"),{height:"100%",left:0,right:"auto",width:64}),toolbar:Ao({display:"flex",justifyContent:"space-between"},e.breakpoints.up("sm"),{flexDirection:"column",justifyContent:"flex-start",minHeight:0}),wide:{width:"auto"},workspaceButtons:Ao({},e.breakpoints.up("sm"),{display:"flex",flexDirection:"column"})}})),Object(c.a)("WorkspaceControlPanel"))(Mo),No=n(354),zo=n(934),Lo=n(955),Ho=n.n(Lo),Wo=n(105),Fo=n(84),Vo=l.forwardRef((function(e,t){e.checked;var n=e.classes,r=e.className,o=e.control,i=e.disabled,a=(e.inputRef,e.label),s=e.labelPlacement,c=void 0===s?"end":s,u=(e.name,e.onChange,e.value,Object(b.a)(e,["checked","classes","className","control","disabled","inputRef","label","labelPlacement","name","onChange","value"])),d=Object(Fo.a)(),p=i;void 0===p&&void 0!==o.props.disabled&&(p=o.props.disabled),void 0===p&&d&&(p=d.disabled);var h={disabled:p};return["checked","name","onChange","value","inputRef"].forEach((function(t){void 0===o.props[t]&&void 0!==e[t]&&(h[t]=e[t])})),l.createElement("label",Object(y.a)({className:Object(O.a)(n.root,r,"end"!==c&&n["labelPlacement".concat(Object(E.a)(c))],p&&n.disabled),ref:t},u),l.cloneElement(o,h),l.createElement(L.a,{component:"span",className:Object(O.a)(n.label,p&&n.disabled)},a))})),Uo=Object(s.a)((function(e){return{root:{display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,"&$disabled":{cursor:"default"}},labelPlacementStart:{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},labelPlacementTop:{flexDirection:"column-reverse",marginLeft:16},labelPlacementBottom:{flexDirection:"column",marginLeft:16},disabled:{},label:{"&$disabled":{color:e.palette.text.disabled}}}}),{name:"MuiFormControlLabel"})(Vo),$o=n(997),Zo=n.n($o);function Go(e){return u.a.createElement(en.a,e,u.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},u.a.createElement("path",{d:"M3,3H21V5H3Z",transform:"translate(0 16)"}),u.a.createElement("path",{d:"M21,5H3V19H21ZM19,17H5V7H19Z",transform:"translate(0 -2)"})))}function qo(e){return u.a.createElement(en.a,e,u.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},u.a.createElement("path",{d:"M0,0H24V24H0Z",transform:"translate(24) rotate(90)",fill:"none"}),u.a.createElement("path",{d:"M3,3H21V5H3Z",transform:"translate(24) rotate(90)"}),u.a.createElement("path",{d:"M19,3H5V21H19ZM17,19H7V5H17Z",transform:"translate(-2)"})))}function Xo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yo(e,t){return(Yo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ko(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ei(e);if(t){var o=ei(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Jo(this,n)}}function Jo(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?Qo(e):t}function Qo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ei(e){return(ei=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ti=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yo(e,t)}(i,e);var t,n,r,o=Ko(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).handleChange=t.handleChange.bind(Qo(t)),t}return t=i,(n=[{key:"handleChange",value:function(e){var t=this.props,n=t.windowId;(0,t.setWindowThumbnailPosition)(n,e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,r=t.handleClose,o=t.t,i=t.thumbnailNavigationPosition,a=t.direction;return u.a.createElement(u.a.Fragment,null,u.a.createElement($r.a,{role:"presentation",disableSticky:!0,tabIndex:"-1"},o("thumbnails")),u.a.createElement(Z.a,{className:n.MenuItem,onClick:function(){e.handleChange("off"),r()}},u.a.createElement(Uo,{value:"off",classes:{label:"off"===i?n.selectedLabel:n.label},control:u.a.createElement(Zo.a,{color:"off"===i?"secondary":void 0}),label:o("off"),labelPlacement:"bottom"})),u.a.createElement(Z.a,{className:n.MenuItem,onClick:function(){e.handleChange("far-bottom"),r()}},u.a.createElement(Uo,{value:"far-bottom",classes:{label:"far-bottom"===i?n.selectedLabel:n.label},control:u.a.createElement(Go,{color:"far-bottom"===i?"secondary":void 0}),label:o("bottom"),labelPlacement:"bottom"})),u.a.createElement(Z.a,{className:n.MenuItem,onClick:function(){e.handleChange("far-right"),r()}},u.a.createElement(Uo,{value:"far-right",classes:{label:"far-right"===i?n.selectedLabel:n.label},control:u.a.createElement(qo,{color:"far-right"===i?"secondary":void 0,style:"rtl"===a?{transform:"rotate(180deg)"}:{}}),label:o("right"),labelPlacement:"bottom"})))}}])&&Xo(t.prototype,n),r&&Xo(t,r),i}(l.Component);ti.defaultProps={handleClose:function(){},t:function(e){return e}};var ni={setWindowThumbnailPosition:h.g},ri=Object(r.compose)(Object(s.a)((function(e){return{label:{borderBottom:"2px solid transparent"},MenuItem:{display:"inline-block"},selectedLabel:{borderBottom:"2px solid ".concat(e.palette.secondary.main),color:e.palette.secondary.main}}})),Object(i.a)(null,{withRef:!0}),Object(o.b)((function(e,t){var n=t.windowId;return{direction:Object(xt.h)(e),thumbnailNavigationPosition:Object(Wo.getThumbnailNavigationPosition)(e,{windowId:n})}}),ni,null,{forwardRef:!0}),Object(c.a)("WindowThumbnailSettings"))(ti),oi=n(996),ii=n.n(oi),ai=n(995),si=n.n(ai);function ci(e){return u.a.createElement(en.a,e,u.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},u.a.createElement("path",{d:"M1,4V21H22.853V4.1ZM3,19V6h8V19Zm18,0H13V6h8ZM14,9.5h6V11H14ZM14,12h6v1.5H14Zm0,2.5h6V16H14Z"})))}function li(e){return u.a.createElement(en.a,e,u.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},u.a.createElement("path",{d:"M19.974,2H2V19.974H19.974V2ZM7.392,18.177H3.8V14.582H7.392Zm0-5.392H3.8V9.19H7.392Zm0-5.392H3.8V3.8H7.392Zm5.392,10.785H9.19V14.582h3.595Zm0-5.392H9.19V9.19h3.595Zm0-5.392H9.19V3.8h3.595Zm5.392,10.785H14.582V14.582h3.595Zm0-5.392H14.582V9.19h3.595Zm0-5.392H14.582V3.8h3.595Z",transform:"translate(1 1)"})))}function ui(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function di(e,t){return(di=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=mi(e);if(t){var o=mi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return hi(this,n)}}function hi(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?fi(e):t}function fi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mi(e){return(mi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var gi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&di(e,t)}(i,e);var t,n,r,o=pi(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).handleChange=t.handleChange.bind(fi(t)),t}return t=i,(n=[{key:"handleChange",value:function(e){var t=this.props,n=t.windowId;(0,t.setWindowViewType)(n,e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,r=t.handleClose,o=t.t,i=t.windowViewType,a=t.viewTypes,s={book:ci,gallery:li,scroll:si.a,single:ii.a};return 0===a.length?null:u.a.createElement(u.a.Fragment,null,u.a.createElement($r.a,{role:"presentation",disableSticky:!0,tabIndex:"-1"},o("view")),a.map((function(t){return function(t){var a=t.value,s=t.Icon;return u.a.createElement(Z.a,{key:a,className:n.MenuItem,autoFocus:i===a,onClick:function(){e.handleChange(a),r()}},u.a.createElement(Uo,{value:a,classes:{label:i===a?n.selectedLabel:n.label},control:u.a.createElement(s,{color:i===a?"secondary":void 0}),label:o(a),labelPlacement:"bottom"}))}({Icon:s[t],value:t})})))}}])&&ui(t.prototype,n),r&&ui(t,r),i}(l.Component);gi.defaultProps={handleClose:function(){},t:function(e){return e},viewTypes:[]};var vi={setWindowViewType:h.h},yi=Object(r.compose)(Object(s.a)((function(e){return{label:{borderBottom:"2px solid transparent"},MenuItem:{display:"inline-block"},selectedLabel:{borderBottom:"2px solid ".concat(e.palette.secondary.main),color:e.palette.secondary.main}}})),Object(i.a)(null,{withRef:!0}),Object(o.b)((function(e,t){var n=t.windowId;return{viewTypes:Object(Ur.a)(e,{windowId:n}),windowViewType:Object(Ur.f)(e,{windowId:n})}}),vi,null,{forwardRef:!0}),Object(c.a)("WindowViewSettings"))(gi);function bi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oi(e,t){return(Oi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ei(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ti(e);if(t){var o=Ti(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return xi(this,n)}}function xi(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ti(e){return(Ti=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Si(e){var t=e.PluginComponents,n=e.t;return t?u.a.createElement(u.a.Fragment,null,u.a.createElement($r.a,{role:"presentation",disableSticky:!0,tabIndex:"-1"},n("windowPluginButtons")),u.a.createElement(Pn.a,e)):null}var Pi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oi(e,t)}(i,e);var t,n,r,o=Ei(i);function i(){return bi(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.containerId,n=e.handleClose,r=e.anchorEl,o=e.toggleDraggingEnabled,i=e.windowId;return u.a.createElement(Tt.a,{id:"window-menu_".concat(i),container:document.querySelector("#".concat(t," .").concat(Object(fn.a)("viewer"))),anchorEl:r,anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"},getContentAnchorEl:null,open:Boolean(r),onClose:n,onEntering:o,onExit:o,orientation:"horizontal"},u.a.createElement(yi,{windowId:i,handleClose:n}),u.a.createElement(ri,{windowId:i,handleClose:n}),u.a.createElement(Si,this.props))}}])&&wi(t.prototype,n),r&&wi(t,r),i}(l.Component);Pi.defaultProps={anchorEl:null};var Ci=Object(r.compose)(Object(i.a)(),Object(o.b)((function(e){return{containerId:Object(xt.b)(e)}}),(function(e){return{toggleDraggingEnabled:function(){return e(f.g())}}})),Object(c.a)("WindowTopMenu"))(Pi);function _i(e){return u.a.createElement(en.a,e,u.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},u.a.createElement("path",{d:"M0,0H24V24H0Z",fill:"none"}),u.a.createElement("path",{d:"M24.852,17.981,3,18V15.945l21.852-.019Z",transform:"translate(-2 5)"}),u.a.createElement("path",{d:"M1,4V21H22.853V4.1ZM3,19V6h8V19Zm18,0H13V6h8Z",transform:"translate(0 -2)"})))}function ji(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ki(e,t){return(ki=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ri(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Mi(e);if(t){var o=Mi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ii(this,n)}}function Ii(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?Di(e):t}function Di(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mi(e){return(Mi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ai=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ki(e,t)}(i,e);var t,n,r,o=Ri(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={anchorEl:null},t.handleMenuClick=t.handleMenuClick.bind(Di(t)),t.handleMenuClose=t.handleMenuClose.bind(Di(t)),t}return t=i,(n=[{key:"handleMenuClick",value:function(e){this.setState({anchorEl:e.currentTarget})}},{key:"handleMenuClose",value:function(){this.setState({anchorEl:null})}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.t,r=e.windowId,o=this.state.anchorEl;return u.a.createElement(u.a.Fragment,null,u.a.createElement(dt.a,{"aria-haspopup":"true","aria-label":n("windowMenu"),"aria-owns":o?"window-menu_".concat(r):void 0,className:o?t.ctrlBtnSelected:null,onClick:this.handleMenuClick},u.a.createElement(_i,null)),u.a.createElement(Ci,{windowId:r,anchorEl:o,handleClose:this.handleMenuClose}))}}])&&ji(t.prototype,n),r&&ji(t,r),i}(l.Component);Ai.defaultProps={t:function(e){return e}};var Bi=Object(r.compose)(Object(i.a)(),Object(s.a)((function(e){return{ctrlBtnSelected:{backgroundColor:e.palette.action.selected}}})),Object(c.a)("WindowTopMenuButtons"))(Ai);function Ni(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Li(e,t){return(Li=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Hi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Fi(e);if(t){var o=Fi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Wi(this,n)}}function Wi(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fi(e){return(Fi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Vi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Li(e,t)}(i,e);var t,n,r,o=Hi(i);function i(){return Ni(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){return u.a.createElement(u.a.Fragment,null,u.a.createElement(Pn.a,this.props))}}])&&zi(t.prototype,n),r&&zi(t,r),i}(l.Component),Ui=Object(r.compose)(Object(i.a)(),Object(s.a)({}),Object(o.b)(null,null),Object(c.a)("WindowTopBarPluginArea"))(Vi),$i=n(998),Zi=n.n($i);function Gi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qi(e,t){return(qi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ji(e);if(t){var o=Ji(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Yi(this,n)}}function Yi(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?Ki(e):t}function Ki(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ji(e){return(Ji=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Qi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qi(e,t)}(i,e);var t,n,r,o=Xi(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={anchorEl:null},t.handleMenuClick=t.handleMenuClick.bind(Ki(t)),t.handleMenuClose=t.handleMenuClose.bind(Ki(t)),t}return t=i,(n=[{key:"handleMenuClick",value:function(e){this.setState({anchorEl:e.currentTarget})}},{key:"handleMenuClose",value:function(){this.setState({anchorEl:null})}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,r=t.containerId,o=t.PluginComponents,i=t.t,a=t.windowId,s=t.menuIcon,c=this.state.anchorEl;return o&&0!==o.length?u.a.createElement(u.a.Fragment,null,u.a.createElement(dt.a,{"aria-haspopup":"true","aria-label":i("windowPluginMenu"),"aria-owns":c?"window-plugin-menu_".concat(a):void 0,className:c?n.ctrlBtnSelected:null,onClick:this.handleMenuClick},s),u.a.createElement(Tt.a,{id:"window-plugin-menu_".concat(a),container:document.querySelector("#".concat(r," .").concat(Object(fn.a)("viewer"))),anchorEl:c,anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"},getContentAnchorEl:null,open:Boolean(c),onClose:function(){return e.handleMenuClose()}},u.a.createElement(Pn.a,Object.assign({handleClose:function(){return e.handleMenuClose()}},this.props)))):u.a.createElement(u.a.Fragment,null)}}])&&Gi(t.prototype,n),r&&Gi(t,r),i}(l.Component);Qi.defaultProps={classes:{},menuIcon:u.a.createElement(Zi.a,null),PluginComponents:[]};var ea=Object(r.compose)(Object(i.a)(),Object(s.a)((function(e){return{ctrlBtnSelected:{backgroundColor:e.palette.action.selected}}})),Object(o.b)((function(e){return{containerId:Object(xt.b)(e)}}),null),Object(c.a)("WindowTopBarPluginMenu"))(Qi),ta=n(950),na=n.n(ta);function ra(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ia(e,t){return(ia=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function aa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ca(e);if(t){var o=ca(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return sa(this,n)}}function sa(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ca(e){return(ca=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var la=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ia(e,t)}(i,e);var t,n,r,o=aa(i);function i(){return ra(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.error,r=e.hideWindowTitle,o=e.isFetching,i=e.manifestTitle,a=function(e){return u.a.createElement(L.a,Object.assign({variant:"h2",noWrap:!0,color:"inherit",className:t.title},e),e.children)};return o?u.a.createElement(a,null,u.a.createElement(K.a,{variant:"text"})):n?u.a.createElement(u.a.Fragment,null,u.a.createElement(na.a,{color:"error"}),u.a.createElement(a,{color:"textSecondary"},n)):r?u.a.createElement("div",{className:t.title}):u.a.createElement(a,null,i)}}])&&oa(t.prototype,n),r&&oa(t,r),i}(l.Component);function ua(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function da(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ua(Object(n),!0).forEach((function(t){pa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ua(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}la.defaultProps={error:null,hideWindowTitle:!1,isFetching:!1,manifestTitle:""};var ha=Object(r.compose)(Object(i.a)(),Object(s.a)((function(e){return{title:da(da({},e.typography.h6),{},{flexGrow:1,paddingLeft:e.spacing(.5)})}})),Object(o.b)((function(e,t){var n=t.windowId;return{error:Object(g.m)(e,{windowId:n}).error,hideWindowTitle:Object(Ur.c)(e,{windowId:n}).hideWindowTitle,isFetching:Object(g.m)(e,{windowId:n}).isFetching,manifestTitle:Object(g.o)(e,{windowId:n})}}),null),Object(c.a)("WindowTopBarTitle"))(la);function fa(e){return u.a.createElement(en.a,e,u.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},u.a.createElement("path",{d:"M7,14H5v5h5V17H7Zm7-9V7h3v3h2V5Z"}),u.a.createElement("path",{d:"M22.517,1.524H1.736V22.37H22.517Zm-2,18.845H3.736V3.524H20.517Z"})))}function ma(e){return u.a.createElement(en.a,e,u.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},u.a.createElement("path",{d:"M5,16H8v3h2V14H5ZM16,8V5H14v5h5V8Z"}),u.a.createElement("path",{d:"M22.517,1.524H1.736V22.37H22.517Zm-2,18.845H3.736V3.524H20.517Z"})))}function ga(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function va(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ya(e,t){return(ya=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ba(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Oa(e);if(t){var o=Oa(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return wa(this,n)}}function wa(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Oa(e){return(Oa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ea=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ya(e,t)}(i,e);var t,n,r,o=ba(i);function i(){return ga(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.removeWindow,n=e.windowId,r=e.classes,o=e.toggleWindowSideBar,i=e.t,a=e.windowDraggable,s=e.maximizeWindow,c=e.maximized,l=e.minimizeWindow,d=e.focused,h=e.allowClose,f=e.allowMaximize,m=e.focusWindow,g=e.allowFullscreen,v=e.allowTopMenuButton,y=e.allowWindowSideBar;return u.a.createElement(Ae,{position:"relative",color:"default"},u.a.createElement("nav",{"aria-label":i("windowNavigation")},u.a.createElement(Be.a,{disableGutters:!0,onMouseDown:m,className:p()(r.windowTopBarStyle,a?r.windowTopBarStyleDraggable:null,d?r.focused:null,Object(fn.a)("window-top-bar")),variant:"dense"},y&&u.a.createElement(dt.a,{"aria-label":i("toggleWindowSideBar"),onClick:o},u.a.createElement(Ho.a,null)),u.a.createElement(ha,{windowId:n}),v&&u.a.createElement(Bi,{className:Object(fn.a)("window-menu-btn"),windowId:n}),u.a.createElement(Ui,{windowId:n}),u.a.createElement(ea,{windowId:n}),f&&u.a.createElement(dt.a,{"aria-label":i(c?"minimizeWindow":"maximizeWindow"),className:Object(fn.a)("window-maximize"),onClick:c?l:s},c?u.a.createElement(ma,null):u.a.createElement(fa,null)),g&&u.a.createElement(wt,null),h&&u.a.createElement(dt.a,{"aria-label":i("closeWindow"),className:Object(fn.a)("window-close"),onClick:t},u.a.createElement(Ke.a,null)))))}}])&&va(t.prototype,n),r&&va(t,r),i}(l.Component);Ea.defaultProps={allowClose:!0,allowFullscreen:!1,allowMaximize:!0,allowTopMenuButton:!0,allowWindowSideBar:!0,focused:!1,focusWindow:function(){},maximized:!1,maximizeWindow:function(){},minimizeWindow:function(){},t:function(e){return e},windowDraggable:!0};var xa=Object(r.compose)(Object(i.a)(),Object(s.a)((function(e){return{focused:{},windowTopBarStyle:{"&$focused":{borderTop:"2px solid ".concat(e.palette.primary.main)},backgroundColor:e.palette.shades.main,borderTop:"2px solid transparent",minHeight:32,paddingLeft:e.spacing(.5),paddingRight:e.spacing(.5)},windowTopBarStyleDraggable:{cursor:"move"}}})),Object(o.b)((function(e,t){var n=t.windowId,r=Object(Ur.c)(e,{windowId:n});return{allowClose:r.allowClose,allowFullscreen:r.allowFullscreen,allowMaximize:r.allowMaximize,allowTopMenuButton:r.allowTopMenuButton,allowWindowSideBar:r.allowWindowSideBar,focused:Object(Re.e)(e,{windowId:n}),maximized:r.maximized}}),(function(e,t){var n=t.windowId;return{focusWindow:function(){return e(h.b(n))},maximizeWindow:function(){return e(h.c(n))},minimizeWindow:function(){return e(h.d(n))},removeWindow:function(){return e(h.e(n))},toggleWindowSideBar:function(){return e(h.i(n))}}})),Object(c.a)("WindowTopBar"))(Ea),Ta=n(18),Sa=n.n(Ta),Pa=n(94);function Ca(e,t){var n=function(e,t){var n,r=t.getBoundingClientRect();if(t.fakeTransform)n=t.fakeTransform;else{var o=window.getComputedStyle(t);n=o.getPropertyValue("-webkit-transform")||o.getPropertyValue("transform")}var i=0,a=0;if(n&&"none"!==n&&"string"==typeof n){var s=n.split("(")[1].split(")")[0].split(",");i=parseInt(s[4],10),a=parseInt(s[5],10)}return"left"===e?"translateX(".concat(window.innerWidth,"px) translateX(").concat(i-r.left,"px)"):"right"===e?"translateX(-".concat(r.left+r.width-i,"px)"):"up"===e?"translateY(".concat(window.innerHeight,"px) translateY(").concat(a-r.top,"px)"):"translateY(-".concat(r.top+r.height-a,"px)")}(e,t);n&&(t.style.webkitTransform=n,t.style.transform=n)}var _a={enter:P.b.enteringScreen,exit:P.b.leavingScreen},ja=l.forwardRef((function(e,t){var n=e.children,r=e.direction,o=void 0===r?"down":r,i=e.in,a=e.onEnter,s=e.onEntered,c=e.onEntering,u=e.onExit,d=e.onExited,p=e.onExiting,h=e.style,f=e.timeout,m=void 0===f?_a:f,g=e.TransitionComponent,v=void 0===g?S.a:g,w=Object(b.a)(e,["children","direction","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),O=Object(C.a)(),E=l.useRef(null),x=l.useCallback((function(e){E.current=Ta.findDOMNode(e)}),[]),T=Object(j.a)(n.ref,x),P=Object(j.a)(T,t),k=function(e){return function(t){e&&(void 0===t?e(E.current):e(E.current,t))}},R=k((function(e,t){Ca(o,e),Object(_.b)(e),a&&a(e,t)})),I=k((function(e,t){var n=Object(_.a)({timeout:m,style:h},{mode:"enter"});e.style.webkitTransition=O.transitions.create("-webkit-transform",Object(y.a)({},n,{easing:O.transitions.easing.easeOut})),e.style.transition=O.transitions.create("transform",Object(y.a)({},n,{easing:O.transitions.easing.easeOut})),e.style.webkitTransform="none",e.style.transform="none",c&&c(e,t)})),D=k(s),M=k(p),A=k((function(e){var t=Object(_.a)({timeout:m,style:h},{mode:"exit"});e.style.webkitTransition=O.transitions.create("-webkit-transform",Object(y.a)({},t,{easing:O.transitions.easing.sharp})),e.style.transition=O.transitions.create("transform",Object(y.a)({},t,{easing:O.transitions.easing.sharp})),Ca(o,e),u&&u(e)})),B=k((function(e){e.style.webkitTransition="",e.style.transition="",d&&d(e)})),N=l.useCallback((function(){E.current&&Ca(o,E.current)}),[o]);return l.useEffect((function(){if(!i&&"down"!==o&&"right"!==o){var e=Object(Pa.a)((function(){E.current&&Ca(o,E.current)}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}}),[o,i]),l.useEffect((function(){i||N()}),[i,N]),l.createElement(v,Object(y.a)({nodeRef:E,onEnter:R,onEntered:D,onEntering:I,onExit:A,onExited:B,onExiting:M,appear:!0,in:i,timeout:m},w),(function(e,t){return l.cloneElement(n,Object(y.a)({ref:P,style:Object(y.a)({visibility:"exited"!==e||i?void 0:"hidden"},h,n.props.style)},t))}))})),ka={left:"right",right:"left",top:"down",bottom:"up"};var Ra={enter:P.b.enteringScreen,exit:P.b.leavingScreen},Ia=l.forwardRef((function(e,t){var n=e.anchor,r=void 0===n?"left":n,o=e.BackdropProps,i=e.children,a=e.classes,s=e.className,c=e.elevation,u=void 0===c?16:c,d=e.ModalProps,p=(d=void 0===d?{}:d).BackdropProps,h=Object(b.a)(d,["BackdropProps"]),f=e.onClose,m=e.open,g=void 0!==m&&m,v=e.PaperProps,w=void 0===v?{}:v,T=e.SlideProps,S=e.TransitionComponent,P=void 0===S?ja:S,_=e.transitionDuration,j=void 0===_?Ra:_,k=e.variant,R=void 0===k?"temporary":k,I=Object(b.a)(e,["anchor","BackdropProps","children","classes","className","elevation","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"]),D=Object(C.a)(),B=l.useRef(!1);l.useEffect((function(){B.current=!0}),[]);var N=function(e,t){return"rtl"===e.direction&&function(e){return-1!==["left","right"].indexOf(e)}(t)?ka[t]:t}(D,r),z=l.createElement(A.a,Object(y.a)({elevation:"temporary"===R?u:0,square:!0},w,{className:Object(O.a)(a.paper,a["paperAnchor".concat(Object(E.a)(N))],w.className,"temporary"!==R&&a["paperAnchorDocked".concat(Object(E.a)(N))])}),i);if("permanent"===R)return l.createElement("div",Object(y.a)({className:Object(O.a)(a.root,a.docked,s),ref:t},I),z);var L=l.createElement(P,Object(y.a)({in:g,direction:ka[N],timeout:j,appear:B.current},T),z);return"persistent"===R?l.createElement("div",Object(y.a)({className:Object(O.a)(a.root,a.docked,s),ref:t},I),L):l.createElement(x.a,Object(y.a)({BackdropProps:Object(y.a)({},o,p,{transitionDuration:j}),BackdropComponent:M,className:Object(O.a)(a.root,a.modal,s),open:g,onClose:f,ref:t},I,h),L)})),Da=Object(s.a)((function(e){return{root:{},docked:{flex:"0 0 auto"},paper:{overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:e.zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},paperAnchorLeft:{left:0,right:"auto"},paperAnchorRight:{left:"auto",right:0},paperAnchorTop:{top:0,left:0,bottom:"auto",right:0,height:"auto",maxHeight:"100%"},paperAnchorBottom:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},paperAnchorDockedLeft:{borderRight:"1px solid ".concat(e.palette.divider)},paperAnchorDockedTop:{borderBottom:"1px solid ".concat(e.palette.divider)},paperAnchorDockedRight:{borderLeft:"1px solid ".concat(e.palette.divider)},paperAnchorDockedBottom:{borderTop:"1px solid ".concat(e.palette.divider)},modal:{}}}),{name:"MuiDrawer",flip:!1})(Ia),Ma=n(314),Aa=n(47),Ba=n(436),Na=n(41),za=n(426),La=n(871),Ha=n(927),Wa=n(921),Fa=n(1011),Va=n.n(Fa),Ua=n(956),$a=n.n(Ua),Za=n(1012),Ga=n.n(Za),qa=n(1013),Xa=n.n(qa),Ya=n(309),Ka=n.n(Ya);function Ja(e){return u.a.createElement(en.a,e,u.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},u.a.createElement("path",{d:"M6.924,21H21V19H6.924ZM3,17H21V15H3Zm3.924-4H21V11H6.924Zm0-4H21V7H6.924ZM3,3V5H21V3Z"})))}function Qa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function es(e,t){return(es=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ts(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=os(e);if(t){var o=os(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ns(this,n)}}function ns(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?rs(e):t}function rs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function os(e){return(os=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var is=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&es(e,t)}(i,e);var t,n,r,o=ts(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).handleChange=t.handleChange.bind(rs(t)),t}return t=i,(n=[{key:"handleChange",value:function(e,t){(0,this.props.addCompanionWindow)(t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,r=t.hasAnnotations,o=t.hasAnyAnnotations,i=t.hasAnyLayers,a=t.hasCurrentLayers,s=t.hasSearchResults,c=t.hasSearchService,l=t.panels,d=t.PluginComponents,p=t.sideBarPanel,h=t.t,f=function(t){return u.a.createElement(Ge.a,{title:h("openCompanionWindow",{context:t.value})},u.a.createElement(Wa.a,Object.assign({},t,{classes:{root:n.tab,selected:n.tabSelected},"aria-label":h("openCompanionWindow",{context:t.value}),disableRipple:!0,onKeyUp:e.handleKeyUp})))};return u.a.createElement(Ha.a,{classes:{flexContainer:n.tabsFlexContainer,indicator:n.tabsIndicator},value:"closed"!==p&&p,onChange:this.handleChange,variant:"fullWidth",indicatorColor:"primary",textColor:"primary",orientation:"vertical","aria-orientation":"vertical","aria-label":h("sidebarPanelsNavigation")},l.info&&u.a.createElement(f,{value:"info",icon:u.a.createElement(Va.a,null)}),l.attribution&&u.a.createElement(f,{value:"attribution",icon:u.a.createElement(Ga.a,null)}),l.canvas&&u.a.createElement(f,{value:"canvas",icon:u.a.createElement(Ja,null)}),l.annotations&&(r||o)&&u.a.createElement(f,{value:"annotations",icon:u.a.createElement(La.a,{classes:{badge:n.badge},invisible:!r,variant:"dot"},u.a.createElement($a.a,null))}),l.search&&c&&u.a.createElement(f,{value:"search",icon:u.a.createElement(La.a,{classes:{badge:n.badge},invisible:!s,variant:"dot"},u.a.createElement(Ka.a,null))}),l.layers&&i&&u.a.createElement(f,{value:"layers",icon:u.a.createElement(La.a,{classes:{badge:n.badge},invisible:!a,variant:"dot"},u.a.createElement(Xa.a,null))}),d&&d.map((function(e){return u.a.createElement(f,{key:e.value,value:e.value,icon:u.a.createElement(e,null)})})))}}])&&Qa(t.prototype,n),r&&Qa(t,r),i}(l.Component);is.defaultProps={classes:{},hasAnnotations:!1,hasAnyAnnotations:!1,hasAnyLayers:!1,hasCurrentLayers:!1,hasSearchResults:!1,hasSearchService:!1,panels:[],PluginComponents:null,sideBarPanel:"closed",t:function(e){return e}};function as(e){return e&&e.some((function(e){return new Aa.a(e).imageResources.length>1}))}var ss=Object(r.compose)(Object(i.a)(),Object(s.a)((function(e){return{badge:{backgroundColor:e.palette.notification.main},tab:{"&:active":{backgroundColor:e.palette.action.active},"&:focus":{"@media (hover: none)":{backgroundColor:"transparent"},backgroundColor:e.palette.action.hover,textDecoration:"none"},"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"},backgroundColor:e.palette.action.hover,textDecoration:"none"},borderRight:"2px solid transparent",minWidth:"auto"},tabSelected:{borderRight:"2px solid ".concat(e.palette.primary.main)},tabsFlexContainer:{flexDirection:"column"},tabsIndicator:{display:"none"}}})),Object(o.b)((function(e,t){var n,r=t.windowId;return{hasAnnotations:Object(Ba.a)(e,{windowId:r}).length>0,hasAnyAnnotations:(n=Object(Na.getCanvases)(e,{windowId:r}),n&&n.some((function(e){var t=new Aa.a(e);return t.annotationListUris.length>0||t.canvasAnnotationPages.length>0}))),hasAnyLayers:as(Object(Na.getCanvases)(e,{windowId:r})),hasCurrentLayers:as(Object(Na.getVisibleCanvases)(e,{windowId:r})),hasSearchResults:Object(m.e)(e,{windowId:r}).suggestedSearches||Object(za.i)(e,{companionWindowId:(Object(Wo.getCompanionWindowsForPosition)(e,{position:"left",windowId:r})[0]||{}).id,windowId:r}),hasSearchService:null!==Object(g.l)(e,{windowId:r}),panels:Object(Ur.c)(e,{windowId:r}).panels,sideBarPanel:(Object(Wo.getCompanionWindowsForPosition)(e,{position:"left",windowId:r})[0]||{}).content}}),(function(e,t){var n=t.windowId;return{addCompanionWindow:function(t){return e(Ma.b(n,{content:t,position:"left"}))}}})),Object(c.a)("WindowSideBarButtons"))(is);function cs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ls(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function us(e,t){return(us=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ds(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=hs(e);if(t){var o=hs(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ps(this,n)}}function ps(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hs(e){return(hs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var fs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&us(e,t)}(i,e);var t,n,r,o=ds(i);function i(){return cs(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.direction,r=e.t,o=e.windowId,i=e.sideBarOpen;return u.a.createElement(u.a.Fragment,null,u.a.createElement(Da,{variant:"persistent",className:p()(t.drawer),classes:{paper:p()(t.paper)},anchor:"rtl"===n?"right":"left",PaperProps:{"aria-label":r("sidebarPanelsNavigation"),component:"nav",style:{height:"100%",position:"relative"}},SlideProps:{direction:"rtl"===n?"left":"right",mountOnEnter:!0,unmountOnExit:!0},open:i},u.a.createElement(ss,{windowId:o})))}}])&&ls(t.prototype,n),r&&ls(t,r),i}(l.Component);fs.defaultProps={sideBarOpen:!1};var ms=Object(r.compose)(Object(s.a)((function(e){return{drawer:{flexShrink:0,height:"100%",order:-1e3,zIndex:e.zIndex.appBar-1},grow:{flexGrow:1},paper:{borderInlineEnd:"1px solid ".concat(e.palette.divider),overflowX:"hidden",width:48},toolbar:e.mixins.toolbar}})),Object(i.a)(),Object(o.b)((function(e,t){var n=t.windowId;return{direction:Object(xt.h)(e),sideBarOpen:(Object(m.e)(e,{windowId:n})||{}).sideBarOpen,sideBarPanel:(Object(m.e)(e,{windowId:n})||{}).sideBarPanel}}),null),Object(c.a)("WindowSideBar"))(fs),gs=n(19),vs=n.n(gs),ys=n(174),bs=n.n(ys),ws=n(486),Os=n.n(ws),Es=n(957),xs=n.n(Es),Ts=n(1001),Ss=n.n(Ts),Ps=n(1006),Cs=n.n(Ps);function _s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var js=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.viewer=t,this.ref=n,this.containerWidth=0,this.containerHeight=0,this.imgAspectRatio=1}var t,n,r;return t=e,(n=[{key:"clear",value:function(){this.context2d.clearRect(0,0,this.containerWidth,this.containerHeight)}},{key:"resize",value:function(){this.containerWidth!==this.viewer.container.clientWidth&&(this.containerWidth=this.viewer.container.clientWidth,this.canvasDiv.setAttribute("width",this.containerWidth),this.canvas.setAttribute("width",this.containerWidth)),this.containerHeight!==this.viewer.container.clientHeight&&(this.containerHeight=this.viewer.container.clientHeight,this.canvasDiv.setAttribute("height",this.containerHeight),this.canvas.setAttribute("height",this.containerHeight)),this.viewportOrigin=new xs.a.Point(0,0);var e=this.viewer.viewport.getBoundsNoRotate(!0);this.viewportOrigin.x=e.x,this.viewportOrigin.y=e.y*this.imgAspectRatio,this.viewportWidth=e.width,this.viewportHeight=e.height*this.imgAspectRatio;var t=this.viewer.world.getItemAt(0);t&&(this.imgWidth=t.source.dimensions.x,this.imgHeight=t.source.dimensions.y,this.imgAspectRatio=this.imgWidth/this.imgHeight)}},{key:"canvasUpdate",value:function(e){var t=this.viewer.viewport.getZoom(!0),n=this.viewer.world.getItemAt(0);if(n){var r=n.viewportToImageZoom(t),o=(this.viewportOrigin.x/this.imgWidth-this.viewportOrigin.x)/this.viewportWidth*this.containerWidth,i=(this.viewportOrigin.y/this.imgHeight-this.viewportOrigin.y)/this.viewportHeight*this.containerHeight;this.clearBeforeRedraw&&this.clear(),this.context2d.translate(o,i),this.context2d.scale(r,r);var a=this.viewer.viewport.getCenter();this.viewer.viewport.getFlip()&&(this.context2d.translate(2*a.x,0),this.context2d.scale(-1,1));var s=this.viewer.viewport.getRotation();0!==s&&(this.context2d.translate(a.x,a.y),this.context2d.rotate(s*Math.PI/180),this.context2d.translate(-1*a.x,-1*a.y)),e(),this.context2d.setTransform(1,0,0,1,0,0)}}},{key:"canvas",get:function(){return this.canvasDiv.firstElementChild}},{key:"canvasDiv",get:function(){return this.ref.current}},{key:"context2d",get:function(){return this.canvas.getContext("2d")}}])&&_s(t.prototype,n),r&&_s(t,r),e}();function ks(e){return function(e){if(Array.isArray(e))return Rs(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Rs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rs(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Is(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ds=function(){function e(t){var n=t.resource,r=t.palette,o=t.zoomRatio,i=t.offset,a=t.selected,s=t.hovered;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.resource=n,this.palette=r,this.zoomRatio=o,this.offset=i,this.selected=a,this.hovered=s}var t,n,r;return t=e,(n=[{key:"toContext",value:function(e){this.context=e,this.resource.svgSelector?this.svgContext():this.fragmentContext()}},{key:"svgContext",value:function(){var e,t=this;0!==(e=this.hovered?this.palette.hovered:this.selected?this.palette.selected:this.palette.default).globalAlpha&&ks(this.svgPaths).forEach((function(n){t.context.save(),t.context.translate(t.offset.x,t.offset.y);var r=new Path2D(n.attributes.d.nodeValue);t.context.strokeStyle=t.color,n.attributes["stroke-dasharray"]&&t.context.setLineDash(n.attributes["stroke-dasharray"].nodeValue.split(","));var o={fill:"fillStyle",stroke:"strokeStyle","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterlimit","stroke-width":"lineWidth"};Object.keys(o).forEach((function(e){n.attributes[e]&&(t.context[o[e]]=n.attributes[e].nodeValue)})),t.context.lineWidth/=t.zoomRatio,(t.selected||t.hovered)&&(t.context.strokeStyle=e.strokeStyle||e.fillStyle),n.attributes["stroke-opacity"]?t.context.globalAlpha=e.globalAlpha*n.attributes["stroke-opacity"].nodeValue:t.context.globalAlpha=e.globalAlpha,t.context.stroke(r),n.attributes.fill&&"none"!==n.attributes.fill.nodeValue&&(n.attributes["fill-opacity"]?t.context.globalAlpha=e.globalAlpha*n.attributes["fill-opacity"].nodeValue:t.context.globalAlpha=e.globalAlpha,t.context.fill(r)),t.context.restore()}))}},{key:"fragmentContext",value:function(){var e,t,n,r=this,o=this.resource.fragmentSelector;(o[0]+=this.offset.x,o[1]+=this.offset.y,e=this.selected?this.palette.selected:this.hovered?this.palette.hovered:this.palette.default,this.context.save(),Object.keys(e).forEach((function(t){r.context[t]=e[t]})),0!==e.globalAlpha)&&(e.fillStyle?(t=this.context).fillRect.apply(t,ks(o)):(this.context.lineWidth=1/this.zoomRatio,(n=this.context).strokeRect.apply(n,ks(o))),this.context.restore())}},{key:"svgString",get:function(){return this.resource.svgSelector.value}},{key:"svgPaths",get:function(){return(new DOMParser).parseFromString(this.svgString,"text/xml").getElementsByTagName("path")}}])&&Is(t.prototype,n),r&&Is(t,r),e}();function Ms(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function As(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ms(Object(n),!0).forEach((function(t){Bs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ms(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ns(e){return function(e){if(Array.isArray(e))return Hs(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Ls(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||Ls(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ls(e,t){if(e){if("string"==typeof e)return Hs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hs(e,t):void 0}}function Hs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ws(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fs(e,t,n){return t&&Ws(e.prototype,t),n&&Ws(e,n),e}function Vs(e,t){return(Vs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Us(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Gs(e);if(t){var o=Gs(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return $s(this,n)}}function $s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?Zs(e):t}function Zs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gs(e){return(Gs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var qs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vs(e,t)}(n,e);var t=Us(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).ref=u.a.createRef(),r.osdCanvasOverlay=null,r.updateCanvas=function(){},r.onUpdateViewport=r.onUpdateViewport.bind(Zs(r)),r.onCanvasClick=r.onCanvasClick.bind(Zs(r)),r.onCanvasMouseMove=bs()(r.onCanvasMouseMove.bind(Zs(r)),10),r.onCanvasExit=r.onCanvasExit.bind(Zs(r)),r}return Fs(n,null,[{key:"annotationsMatch",value:function(e,t){return!e&&!t||!(e&&!t||!e&&t)&&(0===e.length&&0===t.length||e.length===t.length&&e.every((function(e,n){var r=e.resources.map((function(e){return e.id})),o=t[n].resources.map((function(e){return e.id}));return 0===r.length&&0===o.length||r.length===o.length&&!(e.id!==t[n].id||!Os()(r,o))})))}}]),Fs(n,[{key:"componentDidMount",value:function(){this.initializeViewer()}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.drawAnnotations,o=t.drawSearchAnnotations,i=t.annotations,a=t.searchAnnotations,s=t.hoveredAnnotationIds,c=t.selectedAnnotationId,l=t.highlightAllAnnotations,u=t.viewer;this.initializeViewer();var d=!n.annotationsMatch(i,e.annotations),p=!n.annotationsMatch(a,e.searchAnnotations),h=Cs()(s,e.hoveredAnnotationIds).length>0;this.osdCanvasOverlay&&h&&(s.length>0?this.osdCanvasOverlay.canvasDiv.style.cursor="pointer":this.osdCanvasOverlay.canvasDiv.style.cursor="");var f=c!==e.selectedAnnotationId,m=r!==e.drawAnnotations||o!==e.drawSearchAnnotations||l!==e.highlightAllAnnotations;(p||d||f||h||m)&&(this.updateCanvas=this.canvasUpdateCallback(),u.forceRedraw())}},{key:"componentWillUnmount",value:function(){var e=this.props.viewer;e.removeHandler("canvas-click",this.onCanvasClick),e.removeHandler("canvas-exit",this.onCanvasExit),e.removeHandler("update-viewport",this.onUpdateViewport),e.removeHandler("mouse-move",this.onCanvasMouseMove)}},{key:"onCanvasClick",value:function(e){var t=this,n=this.props.canvasWorld,r=e.position,o=e.eventSource.viewport.pointFromPixel(r),i=n.canvasAtPoint(o);if(i){var a=zs(n.canvasToWorldCoordinates(i.id),4),s=(a[0],a[1],a[2]),c=a[3],l=this.annotationsAtPoint(i,o);if(l.length>0&&(e.preventDefaultAction=!0),1===l.length)this.toggleAnnotation(l[0].id);else if(l.length>0){var u=function(e){var n=Math.PI/180;return function(r){for(var a=0,s=0;s<360;s+=1){var c=Math.cos(s*n)*e+o.x,l=Math.sin(s*n)*e+o.y;t.isAnnotationAtPoint(r,i,{x:c,y:l})&&(a+=1)}return{anno:r,score:a}}},d=[],p=1;for(d=Ss()(l.map(u(p)),"score");p<Math.max(s,c)&&d[0].score===d[1].score;)p*=2,d=Ss()(l.map(u(p)),"score");this.toggleAnnotation(d[0].anno.id)}}}},{key:"onCanvasMouseMove",value:function(e){var t=this.props,n=t.annotations,r=t.canvasWorld,o=t.hoverAnnotation,i=t.hoveredAnnotationIds,a=t.searchAnnotations,s=t.viewer,c=t.windowId;if(0!==n.length||0!==a.length){var l=e.position,u=s.viewport.pointFromPixel(l),d=r.canvasAtPoint(u);if(d){var p=this.annotationsAtPoint(d,u);Cs()(i,p.map((function(e){return e.id}))).length>0&&o(c,p.map((function(e){return e.id})))}else o(c,[])}}},{key:"onCanvasExit",value:function(e){var t=this.props,n=t.hoverAnnotation,r=t.windowId;this.onCanvasMouseMove.cancel(),n(r,[])}},{key:"onUpdateViewport",value:function(e){this.updateCanvas()}},{key:"initializeViewer",value:function(){var e=this.props.viewer;e&&(this.osdCanvasOverlay||(this.osdCanvasOverlay=new js(e,this.ref),e.addHandler("canvas-click",this.onCanvasClick),e.addHandler("canvas-exit",this.onCanvasExit),e.addHandler("update-viewport",this.onUpdateViewport),e.addHandler("mouse-move",this.onCanvasMouseMove),this.updateCanvas=this.canvasUpdateCallback()))}},{key:"canvasUpdateCallback",value:function(){var e=this;return function(){e.osdCanvasOverlay.clear(),e.osdCanvasOverlay.resize(),e.osdCanvasOverlay.canvasUpdate(e.renderAnnotations.bind(e))}}},{key:"isAnnotationAtPoint",value:function(e,t,n){var r=zs(this.props.canvasWorld.canvasToWorldCoordinates(t.id),2),o=r[0],i=r[1],a=n.x-o,s=n.y-i;if(e.svgSelector){var c=this.osdCanvasOverlay.context2d;return Ns(new Ds({resource:e}).svgPaths).some((function(e){return c.isPointInPath(new Path2D(e.attributes.d.nodeValue),a,s)}))}if(e.fragmentSelector){var l=zs(e.fragmentSelector,4),u=l[0],d=l[1],p=l[2],h=l[3];return u<=a&&a<=u+p&&d<=s&&s<=d+h}return!1}},{key:"annotationsAtPoint",value:function(e,t){var n=this,r=this.props,o=r.annotations,i=r.searchAnnotations,a=[].concat(Ns(o),Ns(i));return vs()(a.map((function(e){return e.resources}))).filter((function(r){return e.id===r.targetId&&n.isAnnotationAtPoint(r,e,t)}))}},{key:"toggleAnnotation",value:function(e){var t=this.props,n=t.selectedAnnotationId,r=t.selectAnnotation,o=t.deselectAnnotation,i=t.windowId;n===e?o(i,e):r(i,e)}},{key:"annotationsToContext",value:function(e,t){var n=this.props,r=n.highlightAllAnnotations,o=n.hoveredAnnotationIds,i=n.selectedAnnotationId,a=n.canvasWorld,s=n.viewer,c=this.osdCanvasOverlay.context2d,l=s.viewport.getZoom(!0)/s.viewport.getMaxZoom();e.forEach((function(e){e.resources.forEach((function(e){if(a.canvasIds.includes(e.targetId)){var n=a.offsetByCanvas(e.targetId);new Ds({hovered:o.includes(e.id),offset:n,palette:As(As({},t),{},{default:As(As({},t.default),!r&&t.hidden)}),resource:e,selected:i===e.id,zoomRatio:l}).toContext(c)}}))}))}},{key:"renderAnnotations",value:function(){var e=this.props,t=e.annotations,n=e.drawAnnotations,r=e.drawSearchAnnotations,o=e.searchAnnotations,i=e.palette;r&&this.annotationsToContext(o,i.search),n&&this.annotationsToContext(t,i.annotations)}},{key:"render",value:function(){var e=this.props.viewer;return e?Sa.a.createPortal(u.a.createElement("div",{ref:this.ref,style:{height:"100%",left:0,position:"absolute",top:0,width:"100%"}},u.a.createElement("canvas",null)),e.canvas):u.a.createElement(u.a.Fragment,null)}}]),n}(l.Component);qs.defaultProps={annotations:[],deselectAnnotation:function(){},drawAnnotations:!0,drawSearchAnnotations:!0,highlightAllAnnotations:!1,hoverAnnotation:function(){},hoveredAnnotationIds:[],palette:{},searchAnnotations:[],selectAnnotation:function(){},selectedAnnotationId:void 0,viewer:null};var Xs=n(342),Ys=n(298),Ks=n(431),Js={deselectAnnotation:Xs.a,hoverAnnotation:Xs.b,selectAnnotation:Xs.g},Qs=Object(r.compose)(Object(i.a)(),Object(o.b)((function(e,t){var n=t.windowId;return{annotations:Object(Ba.d)(e,{windowId:n}),canvasWorld:new Ys.a(Object(Na.getVisibleCanvases)(e,{windowId:n}),Object(Ks.c)(e,{windowId:n}),Object(v.e)(e,{windowId:n})),drawAnnotations:Object(xt.a)(e).window.forceDrawAnnotations||Object(Wo.getCompanionWindowsForContent)(e,{content:"annotations",windowId:n}).length>0,drawSearchAnnotations:Object(xt.a)(e).window.forceDrawAnnotations||Object(Wo.getCompanionWindowsForContent)(e,{content:"search",windowId:n}).length>0,highlightAllAnnotations:Object(m.e)(e,{windowId:n}).highlightAllAnnotations,hoveredAnnotationIds:Object(m.e)(e,{windowId:n}).hoveredAnnotationIds,palette:Object(xt.g)(e).palette,searchAnnotations:Object(za.f)(e,{windowId:n}),selectedAnnotationId:Object(Ba.e)(e,{windowId:n})}}),Js),Object(c.a)("AnnotationsOverlay"))(qs),ec=n(501);function tc(e,t,n){return(tc=dc()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&cc(o,n.prototype),o}).apply(null,arguments)}function nc(e){return function(e){if(Array.isArray(e))return rc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return rc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rc(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function oc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ic(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oc(Object(n),!0).forEach((function(t){ac(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ac(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cc(e,t){return(cc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lc(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?uc(e):t}function uc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dc(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function pc(e){return(pc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var hc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cc(e,t)}(s,e);var t,n,r,o,i,a=(t=s,n=dc(),function(){var e,r=pc(t);if(n){var o=pc(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return lc(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=a.call(this,e)).state={viewer:void 0},t.ref=u.a.createRef(),t.apiRef=u.a.createRef(),ec.OSDReferences.set(e.windowId,t.apiRef),t.onCanvasMouseMove=bs()(t.onCanvasMouseMove.bind(uc(t)),10),t.onViewportChange=t.onViewportChange.bind(uc(t)),t.zoomToWorld=t.zoomToWorld.bind(uc(t)),t.osdUpdating=!1,t}return r=s,(o=[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.osdConfig,r=t.t,o=t.windowId;if(this.ref.current){var i=new xs.a(ic({id:this.ref.current.id},n)),a=i.canvas&&i.canvas.firstElementChild;a&&(a.setAttribute("role","img"),a.setAttribute("aria-label",r("digitizedView")),a.setAttribute("aria-describedby","".concat(o,"-osd"))),this.apiRef.current=i,this.setState({viewer:i}),i.addHandler("animation-start",(function(){e.osdUpdating=!0})),i.addHandler("animation-finish",this.onViewportChange),i.addHandler("animation-finish",(function(){e.osdUpdating=!1})),i.innerTracker&&(i.innerTracker.moveHandler=this.onCanvasMouseMove)}}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,r=n.viewerConfig,o=n.canvasWorld,i=this.state.viewer;if(this.apiRef.current=i,void 0===t.viewer)return r&&(i.viewport.panTo(r,!0),i.viewport.zoomTo(r.zoom,r,!0),void 0!==r.degrees&&i.viewport.setRotation(r.degrees),void 0!==r.flip&&i.viewport.setFlip(r.flip)),void this.addAllImageSources(!r);if(this.infoResponsesMatch(e.infoResponses)&&this.nonTiledImagedMatch(e.nonTiledImages))if(Os()(o.layers,e.canvasWorld.layers)){if(r&&!this.osdUpdating){var a=i.viewport;r.x===a.centerSpringX.target.value&&r.y===a.centerSpringY.target.value||a.panTo(r,!1),r.zoom!==a.zoomSpring.target.value&&a.zoomTo(r.zoom,r,!1),r.rotation!==a.getRotation()&&a.setRotation(r.rotation),r.flip!==a.getFlip()&&a.setFlip(r.flip)}}else this.refreshTileProperties();else{i.close();var s=!Os()(o.canvasIds,e.canvasWorld.canvasIds);this.addAllImageSources(s||!r)}}},{key:"componentWillUnmount",value:function(){var e=this.state.viewer;e.innerTracker&&e.innerTracker.moveHandler===this.onCanvasMouseMove&&(e.innerTracker.moveHandler=null),e.removeAllHandlers(),this.apiRef.current=void 0}},{key:"onCanvasMouseMove",value:function(e){this.state.viewer.raiseEvent("mouse-move",e)}},{key:"onViewportChange",value:function(e){var t=this.props,n=t.updateViewport,r=t.windowId,o=e.eventSource.viewport;n(r,{flip:o.getFlip(),rotation:o.getRotation(),x:Math.round(o.centerSpringX.target.value),y:Math.round(o.centerSpringY.target.value),zoom:o.zoomSpring.target.value})}},{key:"addAllImageSources",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this.props,r=n.nonTiledImages,o=n.infoResponses;Promise.all(o.map((function(t){return e.addTileSource(t)})),r.map((function(t){return e.addNonTiledImage(t)}))).then((function(){(o[0]||r[0])&&(t&&e.zoomToWorld(),e.refreshTileProperties())}))}},{key:"addNonTiledImage",value:function(e){var t=this.props.canvasWorld,n=this.state.viewer,r=e.getProperty("type"),o=e.getProperty("format")||"";return"Image"===r||"dctypes:Image"===r||o.startsWith("image/")?new Promise((function(r,o){n||o(),n.addSimpleImage({error:function(e){return o(e)},fitBounds:tc(xs.a.Rect,nc(t.contentResourceToWorldCoordinates(e))),index:t.layerIndexOfImageResource(e),opacity:t.layerOpacityOfImageResource(e),success:function(e){return r(e)},url:e.id})})):Promise.resolve()}},{key:"addTileSource",value:function(e){var t=this.props.canvasWorld,n=this.state.viewer;return new Promise((function(r,o){n||o();var i=ic({},e.json),a=t.contentResource(e.id);a&&n.addTiledImage({error:function(e){return o(e)},fitBounds:tc(xs.a.Rect,nc(t.contentResourceToWorldCoordinates(a))),index:t.layerIndexOfImageResource(a),opacity:t.layerOpacityOfImageResource(a),success:function(e){return r(e)},tileSource:i})}))}},{key:"refreshTileProperties",value:function(){for(var e=this.props.canvasWorld,t=this.state.viewer.world,n=[],r=0;r<t.getItemCount();r+=1)n.push(t.getItemAt(r));n.forEach((function(n,r){var o=e.contentResource(n.source["@id"]||n.source.id);if(o){var i=e.layerIndexOfImageResource(o);r!==i&&t.setItemIndex(n,i),n.setOpacity(e.layerOpacityOfImageResource(o))}}))}},{key:"fitBounds",value:function(e,t,n,r){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=this.state.viewer;i.viewport.fitBounds(new xs.a.Rect(e,t,n,r),o)}},{key:"infoResponsesMatch",value:function(e){var t=this.props.infoResponses;return 0===t.length&&0===e.length||t.length===e.length&&t.every((function(t,n){return!!(e[n]&&t.json&&e[n].json&&t.tokenServiceId===e[n].tokenServiceId&&(t.json["@id"]&&t.json["@id"]===e[n].json["@id"]||t.json.id&&t.json.id===e[n].json.id))}))}},{key:"nonTiledImagedMatch",value:function(e){var t=this.props.nonTiledImages;return 0===t.length&&0===e.length||t.some((function(t,n){return!!e[n]&&t.id===e[n].id}))}},{key:"zoomToWorld",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.props.canvasWorld;this.fitBounds.apply(this,nc(t.worldBounds()).concat([e]))}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=t.classes,o=t.label,i=t.t,a=t.windowId,s=t.drawAnnotations,c=this.state.viewer,l=u.a.Children.map(n,(function(t){return u.a.cloneElement(t,{zoomToWorld:e.zoomToWorld})}));return u.a.createElement(u.a.Fragment,null,u.a.createElement("section",{className:p()(Object(fn.a)("osd-container"),r.osdContainer),id:"".concat(a,"-osd"),ref:this.ref,"aria-label":i("item",{label:o}),"aria-live":"polite"},s&&u.a.createElement(Qs,{viewer:c,windowId:a}),l,u.a.createElement(Pn.a,Object.assign({viewer:c},ic(ic({},this.props),{},{children:null})))))}}])&&sc(r.prototype,o),i&&sc(r,i),s}(l.Component);hc.defaultProps={children:null,drawAnnotations:!1,infoResponses:[],label:null,nonTiledImages:[],osdConfig:{},viewerConfig:null};var fc=n(340),mc={updateViewport:fc.d},gc=Object(r.compose)(Object(s.a)({osdContainer:{flex:1,position:"relative"}}),Object(i.a)(),Object(o.b)((function(e,t){var n=t.windowId,r=new Ys.a(Object(Na.getVisibleCanvases)(e,{windowId:n}),Object(Ks.c)(e,{windowId:n}),Object(v.e)(e,{windowId:n})),o=Object(Na.selectInfoResponses)(e),i=vs()(r.canvases.map((function(e){return e.imageServiceIds})));return{canvasWorld:r,drawAnnotations:Object(xt.a)(e).window.forceDrawAnnotations||Object(Wo.getCompanionWindowsForContent)(e,{content:"annotations",windowId:n}).length>0||Object(Wo.getCompanionWindowsForContent)(e,{content:"search",windowId:n}).length>0,infoResponses:i.map((function(e){return o[e]})).filter((function(e){return void 0!==e&&!1===e.isFetching&&void 0===e.error})),label:Object(Na.getCanvasLabel)(e,{canvasId:(Object(Na.getCurrentCanvas)(e,{windowId:n})||{}).id,windowId:n}),nonTiledImages:Object(Na.getVisibleCanvasNonTiledResources)(e,{windowId:n}),osdConfig:Object(xt.a)(e).osdConfig,viewerConfig:Object(m.d)(e,{windowId:n})}}),mc),Object(c.a)("OpenSeadragonViewer"))(hc),vc=n(367),yc=n(308),bc=n(1008),wc=n.n(bc),Oc=n(1009),Ec=n.n(Oc);function xc(e){return u.a.createElement(en.a,e,u.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},u.a.createElement("path",{d:"M6,15H9v3h2V13H6Zm9-6V6H13v5h5V9Z"}),u.a.createElement("path",{d:"M12,2A10,10,0,1,0,22,12,10,10,0,0,0,12,2Zm0,18a8,8,0,1,1,8-8,8,8,0,0,1-8,8Z"})))}function Tc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sc(e,t){return(Sc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=jc(e);if(t){var o=jc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Cc(this,n)}}function Cc(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_c(e):t}function _c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jc(e){return(jc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var kc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sc(e,t)}(i,e);var t,n,r,o=Pc(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).handleZoomInClick=t.handleZoomInClick.bind(_c(t)),t.handleZoomOutClick=t.handleZoomOutClick.bind(_c(t)),t}return t=i,(n=[{key:"handleZoomInClick",value:function(){var e=this.props,t=e.windowId;(0,e.updateViewport)(t,{zoom:2*e.viewer.zoom})}},{key:"handleZoomOutClick",value:function(){var e=this.props,t=e.windowId;(0,e.updateViewport)(t,{zoom:e.viewer.zoom/2})}},{key:"render",value:function(){var e=this.props,t=e.displayDivider,n=e.showZoomControls,r=e.classes,o=e.t,i=e.zoomToWorld;return n?u.a.createElement("div",{className:r.zoom_controls},u.a.createElement(dt.a,{"aria-label":o("zoomIn"),onClick:this.handleZoomInClick},u.a.createElement(wc.a,null)),u.a.createElement(dt.a,{"aria-label":o("zoomOut"),onClick:this.handleZoomOutClick},u.a.createElement(Ec.a,null)),u.a.createElement(dt.a,{"aria-label":o("zoomReset"),onClick:function(){return i(!1)}},u.a.createElement(xc,null)),t&&u.a.createElement("span",{className:r.divider})):u.a.createElement(u.a.Fragment,null)}}])&&Tc(t.prototype,n),r&&Tc(t,r),i}(l.Component);kc.defaultProps={displayDivider:!0,showZoomControls:!1,t:function(e){return e},updateViewport:function(){},viewer:{},windowId:""};var Rc={updateViewport:fc.d},Ic=Object(r.compose)(Object(i.a)(),Object(s.a)((function(e){return{divider:{borderRight:"1px solid #808080",display:"inline-block",height:"24px",margin:"12px 6px"},ListItem:{paddingBottom:0,paddingTop:0},zoom_controls:{display:"flex",flexDirection:"row",justifyContent:"center"}}})),Object(o.b)((function(e,t){var n=t.windowId;return{showZoomControls:Object(xt.f)(e),viewer:Object(m.d)(e,{windowId:n})}}),Rc),Object(c.a)("ZoomControls"))(kc);function Dc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ac(e,t){return(Ac=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=zc(e);if(t){var o=zc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Nc(this,n)}}function Nc(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zc(e){return(zc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Lc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ac(e,t)}(i,e);var t,n,r,o=Bc(i);function i(){return Dc(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.canvasCount,n=e.canvasIndex,r=e.canvasLabel,o=e.classes,i=e.t;return u.a.createElement("div",{className:p()(Object(fn.a)("osd-info"),o.osdInfo)},u.a.createElement(L.a,{display:"inline",variant:"caption",className:Object(fn.a)("canvas-count")},i("pagination",{current:n+1,total:t})),u.a.createElement(L.a,{display:"inline",variant:"caption",className:Object(fn.a)("canvas-label")},r&&"  ".concat(r)))}}])&&Mc(t.prototype,n),r&&Mc(t,r),i}(l.Component);Lc.defaultProps={canvasLabel:void 0,t:function(){}};var Hc=Object(r.compose)(Object(s.a)({osdInfo:{order:2,overflow:"hidden",paddingBottom:3,textOverflow:"ellipsis",unicodeBidi:"plaintext",whiteSpace:"nowrap",width:"100%"}}),Object(i.a)(),Object(o.b)((function(e,t){var n=t.windowId,r=Object(Na.getCanvases)(e,{windowId:n}),o=Object(v.a)(e,{windowId:n});return{canvasCount:r.length,canvasIndex:o,canvasLabel:Object(Na.getCanvasLabel)(e,{canvasIndex:o,windowId:n})}}),null),Object(c.a)("ViewerInfo"))(Lc),Wc=n(1010),Fc=n.n(Wc);function Vc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Uc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $c(e,t){return($c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=qc(e);if(t){var o=qc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Gc(this,n)}}function Gc(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qc(e){return(qc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Xc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$c(e,t)}(i,e);var t,n,r,o=Zc(i);function i(){return Vc(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.hasNextCanvas,n=e.hasPreviousCanvas,r=e.setNextCanvas,o=e.setPreviousCanvas,i=e.t,a=e.classes,s="ltr",c={},l={};switch(e.viewingDirection){case"top-to-bottom":c={transform:"rotate(270deg)"},l={transform:"rotate(90deg)"};break;case"bottom-to-top":c={transform:"rotate(90deg)"},l={transform:"rotate(270deg)"};break;case"right-to-left":s="rtl",c={},l={transform:"rotate(180deg)"};break;default:c={transform:"rotate(180deg)"},l={}}return u.a.createElement("div",{className:p()(Object(fn.a)("osd-navigation"),a.osdNavigation),dir:s},u.a.createElement(dt.a,{"aria-label":i("previousCanvas"),className:Object(fn.a)("previous-canvas-button"),disabled:!n,onClick:function(){n&&o()}},u.a.createElement(Fc.a,{style:c})),u.a.createElement(dt.a,{"aria-label":i("nextCanvas"),className:Object(fn.a)("next-canvas-button"),disabled:!t,onClick:function(){t&&r()}},u.a.createElement(Fc.a,{style:l})))}}])&&Uc(t.prototype,n),r&&Uc(t,r),i}(l.Component);Xc.defaultProps={hasNextCanvas:!1,hasPreviousCanvas:!1,setNextCanvas:function(){},setPreviousCanvas:function(){},viewingDirection:""};var Yc=Object(r.compose)(Object(s.a)({osdNavigation:{order:1}}),Object(i.a)(),Object(o.b)((function(e,t){var n=t.windowId;return{hasNextCanvas:!!Object(Na.getNextCanvasGrouping)(e,{windowId:n}),hasPreviousCanvas:!!Object(Na.getPreviousCanvasGrouping)(e,{windowId:n}),viewingDirection:Object(v.e)(e,{windowId:n})}}),(function(e,t){var n=t.windowId;return{setNextCanvas:function(){return e(fc.b(n))},setPreviousCanvas:function(){return e(fc.c(n))}}})),Object(c.a)("ViewerNavigation"))(Xc);function Kc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qc(e,t){return(Qc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function el(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=nl(e);if(t){var o=nl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return tl(this,n)}}function tl(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nl(e){return(nl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var rl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qc(e,t)}(i,e);var t,n,r,o=el(i);function i(){return Kc(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"canvasNavControlsAreStacked",value:function(){var e=this.props.size;return e&&e.width&&e.width<=253}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.visible,r=e.windowId,o=e.zoomToWorld;return n?u.a.createElement(A.a,{square:!0,className:p()(t.controls,Object(fn.a)("canvas-nav"),t.canvasNav,this.canvasNavControlsAreStacked()?Object(fn.a)("canvas-nav-stacked"):null,this.canvasNavControlsAreStacked()?t.canvasNavStacked:null),elevation:0},u.a.createElement(Ic,{displayDivider:!this.canvasNavControlsAreStacked(),windowId:r,zoomToWorld:o}),u.a.createElement(Yc,{windowId:r}),u.a.createElement(Hc,{windowId:r}),u.a.createElement(Pn.a,this.props)):u.a.createElement(L.a,{variant:"srOnly",component:"div"},u.a.createElement(Hc,{windowId:r}))}}])&&Jc(t.prototype,n),r&&Jc(t,r),i}(l.Component);rl.defaultProps={classes:{},visible:!0};var ol=Object(r.compose)(Object(o.b)((function(e,t){var n=t.windowId;return{canvasLabel:Object(Na.getCanvasLabel)(e,{canvasId:(Object(Na.getCurrentCanvas)(e,{windowId:n})||{}).id,windowId:n}),visible:Object(m.i)(e).focusedWindowId===n}})),Object(s.a)((function(e){return{canvasNav:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",textAlign:"center"},canvasNavStacked:{flexDirection:"column"},controls:{backgroundColor:Object(yc.fade)(e.palette.background.paper,.5),bottom:0,position:"absolute",width:"100%",zIndex:50}}})),Object(vc.withSize)(),Object(c.a)("WindowCanvasNavigationControls"))(rl);function il(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function al(e,t){return(al=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ll(e);if(t){var o=ll(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return cl(this,n)}}function cl(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ll(e){return(ll=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ul=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&al(e,t)}(i,e);var t,n,r,o=sl(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={},t}return t=i,r=[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}],(n=[{key:"render",value:function(){var e=this.props.windowId;return this.state.hasError?u.a.createElement(u.a.Fragment,null):u.a.createElement(gc,{windowId:e},u.a.createElement(ol,{windowId:e}))}}])&&il(t.prototype,n),r&&il(t,r),i}(l.Component),dl=Object(r.compose)(Object(c.a)("WindowViewer"))(ul),pl=n(24),hl=n(95),fl=Object(hl.a)(l.createElement("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");var ml=l.forwardRef((function(e,t){var n=e.alt,r=e.children,o=e.classes,i=e.className,a=e.component,s=void 0===a?"div":a,c=e.imgProps,u=e.sizes,d=e.src,p=e.srcSet,h=e.variant,f=void 0===h?"circle":h,m=Object(b.a)(e,["alt","children","classes","className","component","imgProps","sizes","src","srcSet","variant"]),g=null,v=function(e){var t=e.src,n=e.srcSet,r=l.useState(!1),o=r[0],i=r[1];return l.useEffect((function(){if(t||n){i(!1);var e=!0,r=new Image;return r.src=t,r.srcSet=n,r.onload=function(){e&&i("loaded")},r.onerror=function(){e&&i("error")},function(){e=!1}}}),[t,n]),o}({src:d,srcSet:p}),w=d||p,E=w&&"error"!==v;return g=E?l.createElement("img",Object(y.a)({alt:n,src:d,srcSet:p,sizes:u,className:o.img},c)):null!=r?r:w&&n?n[0]:l.createElement(fl,{className:o.fallback}),l.createElement(s,Object(y.a)({className:Object(O.a)(o.root,o.system,o[f],i,!E&&o.colorDefault),ref:t},m),g)})),gl=Object(s.a)((function(e){return{root:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},colorDefault:{color:e.palette.background.default,backgroundColor:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[600]},circle:{},rounded:{borderRadius:e.shape.borderRadius},square:{borderRadius:0},img:{width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4},fallback:{width:"75%",height:"75%"}}}),{name:"MuiAvatar"})(ml),vl=(n(506),n(439)),yl=n(109);function bl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wl(e,t){return(wl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ol(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Tl(e);if(t){var o=Tl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return El(this,n)}}function El(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?xl(e):t}function xl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tl(e){return(Tl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Sl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wl(e,t)}(i,e);var t,n,r,o=Ol(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={requestedAnnotations:!1},t.handleSelect=t.handleSelect.bind(xl(t)),t.handleKey=t.handleKey.bind(xl(t)),t.handleIntersection=t.handleIntersection.bind(xl(t)),t}return t=i,(n=[{key:"handleSelect",value:function(){var e=this.props,t=e.canvas,n=e.selected,r=e.setCanvas,o=e.focusOnCanvas;n?o():r(t.id)}},{key:"handleKey",value:function(e){var t=this.props,n=t.canvas,r=t.setCanvas,o=t.focusOnCanvas;this.keys={enter:"Enter",space:" "},this.chars={enter:13,space:32},e.key===this.keys.enter||e.which===this.chars.enter||e.key===this.keys.space||e.which===this.chars.space?o():r(n.index,n.id)}},{key:"handleIntersection",value:function(e){var t=e.isIntersecting,n=this.props,r=n.annotationsCount,o=n.requestCanvasAnnotations,i=this.state.requestedAnnotations;!t||void 0===r||r>0||i||(this.setState({requestedAnnotations:!0}),o())}},{key:"render",value:function(){var e=this.props,t=e.annotationsCount,n=e.searchAnnotationsCount,r=e.canvas,o=e.classes,i=e.config,a=e.selected,s=new Aa.a(r);return u.a.createElement(vl.a,{onChange:this.handleIntersection},u.a.createElement("div",{key:r.index,className:p()(o.galleryViewItem,a?o.selected:"",n>0?o.hasAnnotations:""),onClick:this.handleSelect,onKeyUp:this.handleKey,role:"button",tabIndex:0},u.a.createElement(yl.a,{resource:r,labelled:!0,variant:"outside",maxWidth:i.width,maxHeight:i.height,style:{margin:"0 auto",maxWidth:"".concat(Math.ceil(i.height*s.aspectRatio),"px")}},u.a.createElement("div",{className:o.chips},n>0&&u.a.createElement(U.a,{avatar:u.a.createElement(gl,{className:o.avatar,classes:{circle:o.avatarIcon}},u.a.createElement(Ka.a,{fontSize:"small"})),label:n,className:p()(o.searchChip),size:"small"}),(t||0)>0&&u.a.createElement(U.a,{avatar:u.a.createElement(gl,{className:o.avatar,classes:{circle:o.avatarIcon}},u.a.createElement($a.a,{className:o.annotationIcon})),label:t,className:p()(o.annotationsChip),size:"small"})))))}}])&&bl(t.prototype,n),r&&bl(t,r),i}(l.Component);function Pl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pl(Object(n),!0).forEach((function(t){_l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Sl.defaultProps={annotationsCount:void 0,config:{height:100,width:null},requestCanvasAnnotations:function(){},searchAnnotationsCount:0,selected:!1};var jl=Object(r.compose)(Object(o.b)((function(e,t){var n=t.canvas,r=t.windowId,o=Object(Na.getCurrentCanvas)(e,{windowId:r}),i=Object(za.f)(e,{windowId:r}),a=vs()(i.map((function(e){return e.resources}))).filter((function(e){return e.targetId===n.id})),s=Object(Wo.getCompanionWindowsForContent)(e,{content:"annotations",windowId:r}).length>0;return{annotationsCount:function(){if(s)return Object(Ba.d)(e,{canvasId:n.id}).reduce((function(e,t){return e+t.resources.filter((function(e){return e.targetId===n.id})).length}),0)}(),config:Object(xt.a)(e).galleryView,searchAnnotationsCount:a.length,selected:o&&o.id===n.id}}),(function(e,t){var n=t.canvas,r=(t.id,t.windowId);return{focusOnCanvas:function(){return e(h.h(r,"single"))},requestCanvasAnnotations:function(){return e(Xs.f(r,n.id))},setCanvas:function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e(fc.a.apply(pl,[r].concat(n)))}}})),Object(s.a)((function(e){return{annotationIcon:{height:"1rem",width:"1rem"},annotationsChip:Cl({},e.typography.caption),avatar:{backgroundColor:"transparent"},chips:{opacity:.875,position:"absolute",right:0,textAlign:"right",top:0},galleryViewItem:{"&$hasAnnotations":{border:"2px solid ".concat(e.palette.action.selected)},"&$selected,&$selected$hasAnnotations":{border:"2px solid ".concat(e.palette.primary.main)},"&:focus":{outline:"none"},"&:hover":{backgroundColor:e.palette.action.hover},border:"2px solid transparent",cursor:"pointer",display:"inline-block",margin:"".concat(e.spacing(1),"px ").concat(e.spacing(.5),"px"),maxHeight:function(e){return e.config.height+45},minWidth:"60px",overflow:"hidden",padding:e.spacing(.5),position:"relative",width:"min-content"},hasAnnotations:{},searchChip:Cl(Cl({},e.typography.caption),{},{"&$selected $avatar":{backgroundColor:e.palette.highlights.primary},marginTop:2}),selected:{}}})))(Sl);function kl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Il(e,t){return(Il=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Al(e);if(t){var o=Al(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ml(this,n)}}function Ml(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Al(e){return(Al=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Bl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Il(e,t)}(i,e);var t,n,r,o=Dl(i);function i(){return kl(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.canvases,n=e.classes,r=e.viewingDirection,o=e.windowId,i="right-to-left"===r?"rtl":"ltr";return u.a.createElement(A.a,{component:"section",dir:i,square:!0,elevation:0,className:n.galleryContainer,id:"".concat(o,"-gallery")},t.map((function(e){return u.a.createElement(jl,{key:e.id,windowId:o,canvas:e})})))}}])&&Rl(t.prototype,n),r&&Rl(t,r),i}(l.Component);Bl.defaultProps={classes:{},viewingDirection:""};var Nl=Object(r.compose)(Object(s.a)((function(e){return{galleryContainer:{alignItems:"flex-start",display:"flex",flexDirection:"row",flexWrap:"wrap",overflowX:"hidden",overflowY:"scroll",padding:"50px 0 50px 20px",width:"100%"}}})),Object(o.b)((function(e,t){var n=t.windowId;return{canvases:Object(Na.getCanvases)(e,{windowId:n}),viewingDirection:Object(v.e)(e,{windowId:n})}})),Object(c.a)("GalleryView"))(Bl),zl=n(1015),Ll=n.n(zl),Hl=n(1014),Wl=n.n(Hl),Fl=n(285),Vl=n(52),Ul=n(350),$l=n(348),Zl=n(204),Gl=n(351);n(76);var ql=n(920);var Xl=l.createContext({}),Yl=n(141),Kl=l.forwardRef((function(e,t){var n,r=e.children,o=e.classes,i=e.className,a=e.defaultExpanded,s=void 0!==a&&a,c=e.disabled,u=void 0!==c&&c,d=e.expanded,p=e.onChange,h=e.square,f=void 0!==h&&h,m=e.TransitionComponent,g=void 0===m?ql.a:m,v=e.TransitionProps,w=Object(b.a)(e,["children","classes","className","defaultExpanded","disabled","expanded","onChange","square","TransitionComponent","TransitionProps"]),E=Object(Yl.a)({controlled:d,default:s,name:"Accordion",state:"expanded"}),x=Object(T.a)(E,2),S=x[0],P=x[1],C=l.useCallback((function(e){P(!S),p&&p(e,!S)}),[S,p,P]),_=l.Children.toArray(r),j=(n=_,Object(Ul.a)(n)||Object($l.a)(n)||Object(Zl.a)(n)||Object(Gl.a)()),k=j[0],R=j.slice(1),I=l.useMemo((function(){return{expanded:S,disabled:u,toggle:C}}),[S,u,C]);return l.createElement(A.a,Object(y.a)({className:Object(O.a)(o.root,i,S&&o.expanded,u&&o.disabled,!f&&o.rounded),ref:t,square:f},w),l.createElement(Xl.Provider,{value:I},k),l.createElement(g,Object(y.a)({in:S,timeout:"auto"},v),l.createElement("div",{"aria-labelledby":k.props.id,id:k.props["aria-controls"],role:"region"},R)))})),Jl=Object(s.a)((function(e){var t={duration:e.transitions.duration.shortest};return{root:{position:"relative",transition:e.transitions.create(["margin"],t),"&:before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:e.palette.divider,transition:e.transitions.create(["opacity","background-color"],t)},"&:first-child":{"&:before":{display:"none"}},"&$expanded":{margin:"16px 0","&:first-child":{marginTop:0},"&:last-child":{marginBottom:0},"&:before":{opacity:0}},"&$expanded + &":{"&:before":{display:"none"}},"&$disabled":{backgroundColor:e.palette.action.disabledBackground}},rounded:{borderRadius:0,"&:first-child":{borderTopLeftRadius:e.shape.borderRadius,borderTopRightRadius:e.shape.borderRadius},"&:last-child":{borderBottomLeftRadius:e.shape.borderRadius,borderBottomRightRadius:e.shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}},expanded:{},disabled:{}}}),{name:"MuiAccordion"})(Kl),Ql=l.forwardRef((function(e,t){var n=e.children,r=e.classes,o=e.className,i=e.expandIcon,a=e.IconButtonProps,s=e.onBlur,c=e.onClick,u=e.onFocusVisible,d=Object(b.a)(e,["children","classes","className","expandIcon","IconButtonProps","onBlur","onClick","onFocusVisible"]),p=l.useState(!1),h=p[0],f=p[1],m=l.useContext(Xl),g=m.disabled,v=void 0!==g&&g,w=m.expanded,E=m.toggle;return l.createElement(Ue.a,Object(y.a)({focusRipple:!1,disableRipple:!0,disabled:v,component:"div","aria-expanded":w,className:Object(O.a)(r.root,o,v&&r.disabled,w&&r.expanded,h&&r.focused),onFocusVisible:function(e){f(!0),u&&u(e)},onBlur:function(e){f(!1),s&&s(e)},onClick:function(e){E&&E(e),c&&c(e)},ref:t},d),l.createElement("div",{className:Object(O.a)(r.content,w&&r.expanded)},n),i&&l.createElement(or.a,Object(y.a)({className:Object(O.a)(r.expandIcon,w&&r.expanded),edge:"end",component:"div",tabIndex:null,role:null,"aria-hidden":!0},a),i))})),eu=Object(s.a)((function(e){var t={duration:e.transitions.duration.shortest};return{root:{display:"flex",minHeight:48,transition:e.transitions.create(["min-height","background-color"],t),padding:e.spacing(0,2),"&:hover:not($disabled)":{cursor:"pointer"},"&$expanded":{minHeight:64},"&$focused":{backgroundColor:e.palette.action.focus},"&$disabled":{opacity:e.palette.action.disabledOpacity}},expanded:{},focused:{},disabled:{},content:{display:"flex",flexGrow:1,transition:e.transitions.create(["margin"],t),margin:"12px 0","&$expanded":{margin:"20px 0"}},expandIcon:{transform:"rotate(0deg)",transition:e.transitions.create("transform",t),"&:hover":{backgroundColor:"transparent"},"&$expanded":{transform:"rotate(180deg)"}}}}),{name:"MuiAccordionSummary"})(Ql),tu=l.forwardRef((function(e,t){var n=e.classes,r=e.className,o=Object(b.a)(e,["classes","className"]);return l.createElement("div",Object(y.a)({className:Object(O.a)(n.root,r),ref:t},o))})),nu=Object(s.a)((function(e){return{root:{display:"flex",padding:e.spacing(1,2,2)}}}),{name:"MuiAccordionDetails"})(tu),ru=Object(hl.a)(l.createElement("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),ou=Object(hl.a)(l.createElement("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),iu=Object(hl.a)(l.createElement("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),au=Object(hl.a)(l.createElement("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),su=n(432),cu={success:l.createElement(ru,{fontSize:"inherit"}),warning:l.createElement(ou,{fontSize:"inherit"}),error:l.createElement(iu,{fontSize:"inherit"}),info:l.createElement(au,{fontSize:"inherit"})},lu=l.createElement(su.a,{fontSize:"small"}),uu=l.forwardRef((function(e,t){var n=e.action,r=e.children,o=e.classes,i=e.className,a=e.closeText,s=void 0===a?"Close":a,c=e.color,u=e.icon,d=e.iconMapping,p=void 0===d?cu:d,h=e.onClose,f=e.role,m=void 0===f?"alert":f,g=e.severity,v=void 0===g?"success":g,w=e.variant,x=void 0===w?"standard":w,T=Object(b.a)(e,["action","children","classes","className","closeText","color","icon","iconMapping","onClose","role","severity","variant"]);return l.createElement(A.a,Object(y.a)({role:m,square:!0,elevation:0,className:Object(O.a)(o.root,o["".concat(x).concat(Object(E.a)(c||v))],i),ref:t},T),!1!==u?l.createElement("div",{className:o.icon},u||p[v]||cu[v]):null,l.createElement("div",{className:o.message},r),null!=n?l.createElement("div",{className:o.action},n):null,null==n&&h?l.createElement("div",{className:o.action},l.createElement(or.a,{size:"small","aria-label":s,title:s,color:"inherit",onClick:h},lu)):null)})),du=Object(s.a)((function(e){var t="light"===e.palette.type?a.a:a.i,n="light"===e.palette.type?a.i:a.a;return{root:Object(y.a)({},e.typography.body2,{borderRadius:e.shape.borderRadius,backgroundColor:"transparent",display:"flex",padding:"6px 16px"}),standardSuccess:{color:t(e.palette.success.main,.6),backgroundColor:n(e.palette.success.main,.9),"& $icon":{color:e.palette.success.main}},standardInfo:{color:t(e.palette.info.main,.6),backgroundColor:n(e.palette.info.main,.9),"& $icon":{color:e.palette.info.main}},standardWarning:{color:t(e.palette.warning.main,.6),backgroundColor:n(e.palette.warning.main,.9),"& $icon":{color:e.palette.warning.main}},standardError:{color:t(e.palette.error.main,.6),backgroundColor:n(e.palette.error.main,.9),"& $icon":{color:e.palette.error.main}},outlinedSuccess:{color:t(e.palette.success.main,.6),border:"1px solid ".concat(e.palette.success.main),"& $icon":{color:e.palette.success.main}},outlinedInfo:{color:t(e.palette.info.main,.6),border:"1px solid ".concat(e.palette.info.main),"& $icon":{color:e.palette.info.main}},outlinedWarning:{color:t(e.palette.warning.main,.6),border:"1px solid ".concat(e.palette.warning.main),"& $icon":{color:e.palette.warning.main}},outlinedError:{color:t(e.palette.error.main,.6),border:"1px solid ".concat(e.palette.error.main),"& $icon":{color:e.palette.error.main}},filledSuccess:{color:"#fff",fontWeight:e.typography.fontWeightMedium,backgroundColor:e.palette.success.main},filledInfo:{color:"#fff",fontWeight:e.typography.fontWeightMedium,backgroundColor:e.palette.info.main},filledWarning:{color:"#fff",fontWeight:e.typography.fontWeightMedium,backgroundColor:e.palette.warning.main},filledError:{color:"#fff",fontWeight:e.typography.fontWeightMedium,backgroundColor:e.palette.error.main},icon:{marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9},message:{padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}}}),{name:"MuiAlert"})(uu),pu=n(428),hu=n.n(pu);function fu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gu(e,t){return(gu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=bu(e);if(t){var o=bu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return yu(this,n)}}function yu(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bu(e){return(bu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var wu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gu(e,t)}(i,e);var t,n,r,o=vu(i);function i(){return fu(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.error,r=e.metadata,o=e.showJsError,i=e.t;return o?u.a.createElement(u.a.Fragment,null,u.a.createElement(du,{elevation:6,variant:"filled",severity:"error"},i("errorDialogTitle")),o&&u.a.createElement(Jl,{square:!0,className:t.alert},u.a.createElement(eu,{expandIcon:u.a.createElement(hu.a,null)},u.a.createElement(L.a,null,i("jsError",{message:n.message,name:n.name}))),u.a.createElement(nu,{className:t.details},u.a.createElement("pre",null,i("jsStack",{stack:n.stack})),r&&u.a.createElement("pre",null,JSON.stringify(r,null,2)))),u.a.createElement(Pn.a,this.props)):null}}])&&mu(t.prototype,n),r&&mu(t,r),i}(l.Component);wu.defaultProps={metadata:null,showJsError:!0,t:function(e){return e}};var Ou=Object(r.compose)(Object(i.a)(),Object(s.a)((function(e){return{alert:{"& $icon":{color:e.palette.error.main},backgroundColor:e.palette.error.main,color:"#fff",fontWeight:e.typography.fontWeightMedium},details:{"& pre":{height:"100px",overflowY:"scroll"},flexDirection:"column"}}})),Object(o.b)((function(e,t){var n=t.companionWindowId,r=t.windowId;return{metadata:{companionWindow:n&&Object(Wo.getCompanionWindow)(e,{companionWindowId:n}),manifest:Object(m.b)(e,{windowId:r}),viewer:Object(m.d)(e,{windowId:r}),window:Object(m.e)(e,{windowId:r})},showJsError:Object(xt.a)(e).window.showJsError}})),Object(c.a)("ErrorContent"))(wu);function Eu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xu(e,t){return(xu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Tu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Pu(e);if(t){var o=Pu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Su(this,n)}}function Su(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pu(e){return(Pu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Cu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xu(e,t)}(i,e);var t,n,r,o=Tu(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={},t}return t=i,r=[{key:"getDerivedStateFromError",value:function(e){return{error:e,hasError:!0}}}],(n=[{key:"componentDidUpdate",value:function(e){this.props.content!==e.content&&this.setState({error:null,hasError:!1})}},{key:"render",value:function(){var e=this.props,t=e.content,n=e.windowId,r=e.id,o=e.t,i=this.state,a=i.error;if(i.hasError)return u.a.createElement(Vl.default,{title:o("error"),windowId:n,id:r},u.a.createElement(Ou,{error:a,windowId:n,companionWindowId:r}));var s=Fl.a[t];return s?u.a.createElement(s,{id:r,windowId:n}):u.a.createElement(u.a.Fragment,null)}}])&&Eu(t.prototype,n),r&&Eu(t,r),i}(l.Component);Cu.defaultProps={content:null,t:function(e){return e}};var _u=Object(r.compose)(Object(i.a)(),Object(o.b)((function(e,t){var n=t.id;return{content:Object(Wo.getCompanionWindow)(e,{companionWindowId:n}).content,id:n}})),Object(c.a)("CompanionWindowFactory"))(Cu);function ju(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ku(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ru(e,t){return(Ru=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Iu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Mu(e);if(t){var o=Mu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Du(this,n)}}function Du(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Mu(e){return(Mu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Au=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ru(e,t)}(i,e);var t,n,r,o=Iu(i);function i(){return ju(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"areaLayoutClass",value:function(){var e=this.props,t=e.classes,n=e.position;return"bottom"===n||"far-bottom"===n?t.horizontal:null}},{key:"collapseIcon",value:function(){var e=this.props,t=e.companionAreaOpen;return"rtl"===e.direction?t?u.a.createElement(Wl.a,null):u.a.createElement(Ll.a,null):t?u.a.createElement(Ll.a,null):u.a.createElement(Wl.a,null)}},{key:"slideDirection",value:function(){var e=this.props,t=e.direction,n="rtl"===t?"left":"right",r="rtl"===t?"right":"left";switch(e.position){case"right":case"far-right":return r;case"bottom":case"far-bottom":return"up";default:return n}}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.companionWindowIds,r=e.companionAreaOpen,o=e.setCompanionAreaOpen,i=e.position,a=e.sideBarOpen,s=e.t,c=e.windowId;return u.a.createElement("div",{className:[t.root,this.areaLayoutClass(),Object(fn.a)("companion-area-".concat(i))].join(" ")},u.a.createElement(ja,{in:r,direction:this.slideDirection()},u.a.createElement("div",{className:[Object(fn.a)("companion-windows"),n.length>0&&t[i],this.areaLayoutClass()].join(" "),style:{display:r?"flex":"none"}},n.map((function(e){return u.a.createElement(_u,{id:e,key:e,windowId:c})})))),o&&"left"===i&&a&&n.length>0&&u.a.createElement("div",{className:t.toggle},u.a.createElement(dt.a,{"aria-expanded":r,"aria-label":s(r?"collapseSidePanel":"expandSidePanel"),className:t.toggleButton,key:r?"collapse":"expand",onClick:function(){o(c,!r)},TooltipProps:{placement:"right"}},this.collapseIcon())))}}])&&ku(t.prototype,n),r&&ku(t,r),i}(l.Component);Au.defaultProps={classes:{},setCompanionAreaOpen:function(){},sideBarOpen:!1};var Bu={setCompanionAreaOpen:h.f},Nu=Object(r.compose)(Object(i.a)(),Object(s.a)((function(e){return{horizontal:{flexDirection:"column",width:"100%"},left:{minWidth:235},root:{display:"flex",minHeight:0,position:"relative",zIndex:e.zIndex.appBar-2},toggle:{backgroundColor:e.palette.background.paper,border:"1px solid ".concat(e.palette.shades.dark),borderRadius:0,height:"48px",left:"100%",marginTop:"1rem",padding:2,position:"absolute",width:"23px",zIndex:e.zIndex.drawer},toggleButton:{marginBottom:12,marginTop:12,padding:0}}})),Object(o.b)((function(e,t){var n=t.windowId,r=t.position;return{companionAreaOpen:Object(Wo.getCompanionAreaVisibility)(e,{position:r,windowId:n}),companionWindowIds:Object(Wo.getCompanionWindowIdsForPosition)(e,{position:r,windowId:n}),direction:Object(xt.h)(e),sideBarOpen:(Object(m.e)(e,{windowId:n})||{}).sideBarOpen}}),Bu),Object(c.a)("CompanionArea"))(Au);function zu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hu(e,t){return(Hu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vu(e);if(t){var o=Vu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Fu(this,n)}}function Fu(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vu(e){return(Vu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Uu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hu(e,t)}(i,e);var t,n,r,o=Wu(i);function i(){return zu(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"renderViewer",value:function(){var e=this.props,t=e.isFetching,n=e.view,r=e.windowId;return!1===t?"gallery"===n?u.a.createElement(Nl,{windowId:r}):u.a.createElement(dl,{windowId:r}):null}},{key:"render",value:function(){var e=this.props,t=e.windowId,n=e.classes;return u.a.createElement("div",{className:p()(Object(fn.a)("primary-window"),n.primaryWindow)},u.a.createElement(ms,{windowId:t}),u.a.createElement(Nu,{windowId:t,position:"left"}),this.renderViewer())}}])&&Lu(t.prototype,n),r&&Lu(t,r),i}(l.Component);Uu.defaultProps={isFetching:!1,view:void 0};var $u=Object(r.compose)(Object(s.a)({primaryWindow:{display:"flex",flex:1,position:"relative"}}),Object(c.a)("PrimaryWindow"))(Uu);function Zu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qu(e,t){return(qu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ku(e);if(t){var o=Ku(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Yu(this,n)}}function Yu(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ku(e){return(Ku=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ju=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qu(e,t)}(i,e);var t,n,r,o=Xu(i);function i(){return Zu(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.allowClose,n=e.allowWindowSideBar,r=e.ariaLabel,o=e.children,i=e.classes,a=e.label,s=e.removeWindow,c=e.t,l=e.windowId;return u.a.createElement(A.a,{component:"section",elevation:1,id:l,className:p()(i.window,Object(fn.a)("placeholder-window")),"aria-label":a&&r?c("window",{label:a}):null},u.a.createElement(Ae,{position:"relative",color:"default"},u.a.createElement(Be.a,{disableGutters:!0,className:p()(i.windowTopBarStyle,Object(fn.a)("window-top-bar")),variant:"dense"},n&&u.a.createElement(dt.a,{"aria-label":c("toggleWindowSideBar"),disabled:!0},u.a.createElement(Ho.a,null)),u.a.createElement(L.a,{variant:"h2",noWrap:!0,color:"inherit",className:i.title},a),t&&s&&u.a.createElement(dt.a,{"aria-label":c("closeWindow"),className:p()(i.button,Object(fn.a)("window-close")),onClick:s,TooltipProps:{tabIndex:r?"0":"-1"}},u.a.createElement(Ke.a,null)))),o)}}])&&Gu(t.prototype,n),r&&Gu(t,r),i}(l.Component);function Qu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ed(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qu(Object(n),!0).forEach((function(t){td(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function td(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Ju.defaultProps={allowClose:!0,allowWindowSideBar:!0,ariaLabel:!0,children:null,classes:{},label:"",removeWindow:function(){},t:function(e){return e}};var nd=Object(r.compose)(Object(i.a)(),Object(s.a)((function(e){return{button:{marginLeft:"auto"},title:ed(ed({},e.typography.h6),{},{flexGrow:1,paddingLeft:e.spacing(.5)}),window:{backgroundColor:e.palette.shades.dark,borderRadius:0,display:"flex",flexDirection:"column",height:"100%",minHeight:0,overflow:"hidden",width:"100%"},windowTopBarStyle:{backgroundColor:e.palette.shades.main,borderTop:"2px solid transparent",minHeight:32,paddingLeft:e.spacing(.5),paddingRight:e.spacing(.5)}}})),Object(o.b)((function(e,t){var n=t.windowId;return{allowClose:Object(Ur.c)(e,{windowId:n}).allowClose,allowWindowSideBar:Object(Ur.c)(e,{windowId:n}).allowWindowSideBar}}),(function(e,t){var n=t.windowId;return{removeWindow:function(){return e(h.e(n))}}})),Object(c.a)("MinimalWindow"))(Ju),rd=n(37),od=n(343),id=n(425),ad=n(1e3),sd=n.n(ad);function cd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ld(e,t){return(ld=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ud(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=hd(e);if(t){var o=hd(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return dd(this,n)}}function dd(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?pd(e):t}function pd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hd(e){return(hd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var fd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ld(e,t)}(i,e);var t,n,r,o=ud(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).onReceiveAccessTokenMessage=t.onReceiveAccessTokenMessage.bind(pd(t)),t}return t=i,(n=[{key:"onReceiveAccessTokenMessage",value:function(e){var t=this.props,n=t.handleAccessTokenMessage,r=t.url;e.data&&e.data.messageId&&e.data.messageId===r&&n(e.data)}},{key:"render",value:function(){var e=this.props.url;return e?u.a.createElement(sd.a,{attributes:{"aria-hidden":!0,height:1,src:"".concat(e,"?origin=").concat(window.origin,"&messageId=").concat(e),style:{visibility:"hidden"},width:1},handleReceiveMessage:this.onReceiveAccessTokenMessage}):u.a.createElement(u.a.Fragment,null)}}])&&cd(t.prototype,n),r&&cd(t,r),i}(l.Component);function md(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gd(e,t){return(gd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=bd(e);if(t){var o=bd(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return yd(this,n)}}function yd(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bd(e){return(bd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}fd.defaultProps={url:void 0};var wd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gd(e,t)}(i,e);var t,n,r,o=vd(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).released=void 0,t.window=null,t.checkIfWindowClosed=null,t}return t=i,(n=[{key:"componentDidMount",value:function(){this.openWindow()}},{key:"componentWillUnmount",value:function(){this.window&&this.window.close()}},{key:"onClose",value:function(){var e=this.props,t=e.onClose,n=e.url;this.released||(this.released=!0,clearInterval(this.checkIfWindowClosed),t(n))}},{key:"openWindow",value:function(){var e=this,t=this.props,n=t.depWindow,r=t.features,o=t.name,i=t.url;this.window=(n||window).open(i,o,r),this.released=!1,this.checkIfWindowClosed=setInterval((function(){e.window&&!e.window.closed||e.onClose()}),250)}},{key:"render",value:function(){return null}}])&&md(t.prototype,n),r&&md(t,r),i}(l.Component);wd.defaultProps={depWindow:void 0,features:void 0,name:void 0};var Od=n(999),Ed=n.n(Od),xd=n(65);function Td(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Td(Object(n),!0).forEach((function(t){Pd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Td(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _d(e,t){return(_d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Id(e);if(t){var o=Id(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return kd(this,n)}}function kd(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?Rd(e):t}function Rd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Id(e){return(Id=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Dd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_d(e,t)}(i,e);var t,n,r,o=jd(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={open:!1},t.setOpen=t.setOpen.bind(Rd(t)),t.onSubmit=t.onSubmit.bind(Rd(t)),t}return t=i,(n=[{key:"onSubmit",value:function(){var e=this.props.onConfirm;this.setOpen(!1),e()}},{key:"setOpen",value:function(e){this.setState((function(t){return Sd(Sd({},t),{},{open:e})}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,r=t.confirmButton,o=t.continueLabel,i=t.header,a=t.description,s=t.icon,c=t.label,l=t.t,d=t.ruleSet,p=t.hasLogoutService,h=t.status,f=t.ConfirmProps;if("ok"===h&&!p)return null;var m=this.state.open,g=u.a.createElement(F.a,Object.assign({onClick:this.onSubmit,className:n.buttonInvert,autoFocus:!0,color:"secondary"},f),r||l("login"));return a||i?u.a.createElement(A.a,{square:!0,elevation:4,color:"secondary",classes:{root:n.paper}},u.a.createElement(F.a,{fullWidth:!0,className:n.topBar,onClick:function(){return e.setOpen(!0)},component:"div",color:"inherit"},s||u.a.createElement(Ed.a,{className:n.icon}),u.a.createElement(L.a,{className:n.label,component:"h3",variant:"body1",color:"inherit"},u.a.createElement(xd.a,{htmlString:c,ruleSet:"iiif"})),u.a.createElement(Pn.a,this.props),u.a.createElement("span",{className:n.fauxButton},!m&&u.a.createElement(L.a,{variant:"button",color:"inherit"},o||l("continue")))),u.a.createElement(ql.a,{in:m,onClose:function(){return e.setOpen(!1)}},u.a.createElement(L.a,{variant:"body1",color:"inherit",className:n.expanded},u.a.createElement(xd.a,{htmlString:i,ruleSet:d}),i&&a?": ":"",u.a.createElement(xd.a,{htmlString:a,ruleSet:d})),u.a.createElement(q,null,u.a.createElement(F.a,{onClick:function(){return e.setOpen(!1)},color:"inherit"},l("cancel")),g))):u.a.createElement(A.a,{square:!0,elevation:4,color:"secondary",classes:{root:n.paper}},u.a.createElement("div",{className:n.topBar},s||u.a.createElement(Ed.a,{className:n.icon}),u.a.createElement(L.a,{className:n.label,component:"h3",variant:"body1",color:"inherit"},u.a.createElement(xd.a,{htmlString:c,ruleSet:d})),u.a.createElement(Pn.a,this.props),g))}}])&&Cd(t.prototype,n),r&&Cd(t,r),i}(l.Component);Dd.defaultProps={confirmButton:void 0,ConfirmProps:{},continueLabel:void 0,description:void 0,hasLogoutService:!0,header:void 0,icon:void 0,ruleSet:"iiif",status:void 0,t:function(e){return e}};var Md=Object(r.compose)(Object(i.a)(),Object(s.a)((function(e){return{buttonInvert:{"&:hover":{backgroundColor:Object(yc.fade)(e.palette.secondary.contrastText,1-e.palette.action.hoverOpacity)},backgroundColor:e.palette.secondary.contrastText,marginLeft:e.spacing(5),paddingBottom:0,paddingTop:0},expanded:{paddingLeft:e.spacing(),paddingRight:e.spacing()},failure:{backgroundColor:e.palette.error.dark},fauxButton:{marginLeft:e.spacing(2.5)},icon:{marginRight:e.spacing(1.5),verticalAlign:"text-bottom"},label:{lineHeight:2.25},paper:{backgroundColor:e.palette.secondary.main,color:e.palette.secondary.contrastText,cursor:"pointer"},topBar:{"&:hover":{backgroundColor:e.palette.secondary.main},alignItems:"center",display:"flex",justifyContent:"inherit",padding:e.spacing(1),textTransform:"none"}}})),Object(c.a)("WindowAuthenticationBar"))(Dd);function Ad(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bd(e,t){return(Bd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Nd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Hd(e);if(t){var o=Hd(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return zd(this,n)}}function zd(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?Ld(e):t}function Ld(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hd(e){return(Hd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Wd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bd(e,t)}(i,e);var t,n,r,o=Nd(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).performLogout=t.performLogout.bind(Ld(t)),t.onReceiveAccessTokenMessage=t.onReceiveAccessTokenMessage.bind(Ld(t)),t}return t=i,(n=[{key:"onReceiveAccessTokenMessage",value:function(e){var t=this.props,n=t.authServiceId,r=t.accessTokenServiceId;(0,t.resolveAccessTokenRequest)(n,r,e)}},{key:"defaultAuthBarProps",value:function(){var e=this.props,t=e.authServiceId,n=e.windowId,r=e.status;return{authServiceId:t,hasLogoutService:!!e.logoutServiceId,status:r,windowId:n}}},{key:"performLogout",value:function(){var e=this.props,t=e.accessTokenServiceId,n=e.authServiceId,r=e.features,o=e.logoutServiceId,i=e.resetAuthenticationState;(0,e.openWindow)(o,void 0,r),i({authServiceId:n,tokenServiceId:t})}},{key:"renderLoggedIn",value:function(){var e=this.props,t=e.isInteractive,n=e.t;return t?u.a.createElement(Md,Object.assign({confirmButton:n("logout"),onConfirm:this.performLogout},this.defaultAuthBarProps())):null}},{key:"renderFailure",value:function(){var e=this.props,t=e.handleAuthInteraction,n=e.failureHeader,r=e.failureDescription,o=e.t,i=e.authServiceId,a=e.windowId;return u.a.createElement(Md,Object.assign({header:n,description:r,confirmButton:o("retry"),onConfirm:function(){return t(a,i)}},this.defaultAuthBarProps()))}},{key:"renderLoggingInCookie",value:function(){var e=this.props,t=e.accessTokenServiceId,n=e.authServiceId,r=e.resolveAuthenticationRequest,o=e.features;return u.a.createElement(u.a.Fragment,null,this.renderLogin(),u.a.createElement(wd,{name:"IiifLoginSender",url:"".concat(n,"?origin=").concat(window.origin),features:o,onClose:function(){return r(n,t)}}))}},{key:"renderLoggingInToken",value:function(){var e=this.props.accessTokenServiceId;return u.a.createElement(u.a.Fragment,null,this.renderLogin(),u.a.createElement(fd,{handleAccessTokenMessage:this.onReceiveAccessTokenMessage,url:e}))}},{key:"renderLogin",value:function(){var e=this.props,t=e.confirm,n=e.description,r=e.handleAuthInteraction,o=e.header,i=e.isInteractive,a=e.label,s=e.authServiceId,c=e.windowId;return i?u.a.createElement(Md,Object.assign({header:o,description:n,label:a,confirmButton:t,onConfirm:function(){return r(c,s)}},this.defaultAuthBarProps())):null}},{key:"render",value:function(){var e=this.props,t=e.authServiceId,n=e.status;return t?null===n?this.renderLogin():"cookie"===n?this.renderLoggingInCookie():"token"===n?this.renderLoggingInToken():"failed"===n?this.renderFailure():"ok"===n?this.renderLoggedIn():null:null}}])&&Ad(t.prototype,n),r&&Ad(t,r),i}(l.Component);Wd.defaultProps={confirm:void 0,description:void 0,failureDescription:void 0,failureHeader:void 0,features:"centerscreen",header:void 0,isInteractive:!0,label:void 0,logoutServiceId:void 0,openWindow:window.open,status:null,t:function(e){return e}};var Fd={handleAuthInteraction:od.a,resetAuthenticationState:od.e,resolveAccessTokenRequest:od.f,resolveAuthenticationRequest:od.g},Vd=Object(r.compose)(Object(i.a)(),Object(o.b)((function(e,t){var n=t.windowId,r=Object(id.d)(e,{windowId:n})[0],o=r&&(rd.a.getService(r,"http://iiif.io/api/auth/1/token")||rd.a.getService(r,"http://iiif.io/api/auth/0/token")),i=r&&(rd.a.getService(r,"http://iiif.io/api/auth/1/logout")||rd.a.getService(r,"http://iiif.io/api/auth/0/logout")),a=Object(id.b)(e),s=r&&a[r.id],c=Object(id.a)(e),l=o&&c[o.id],u=null;s?s.ok?u="ok":!1===s.ok?u="failed":s.isFetching?s.windowId===n&&(u="cookie"):l&&l.isFetching&&s.windowId===n&&(u="token"):u=null;var d=Object(id.c)(e),p=r&&r.getProfile(),h=d.some((function(e){return e.profile===p&&!(e.external||e.kiosk)}));return{accessTokenServiceId:o&&o.id,authServiceId:r&&r.id,confirm:r&&r.getConfirmLabel(),description:r&&r.getDescription(),failureDescription:r&&r.getFailureDescription(),failureHeader:r&&r.getFailureHeader(),header:r&&r.getHeader(),isInteractive:h,label:r&&r.getLabel()[0].value,logoutServiceId:i&&i.id,profile:p,status:u}}),Fd),Object(c.a)("IIIFAuthentication"))(Wd);function Ud(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $d(e,t){return($d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=qd(e);if(t){var o=qd(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Gd(this,n)}}function Gd(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qd(e){return(qd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Xd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$d(e,t)}(i,e);var t,n,r,o=Zd(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={},t}return t=i,r=[{key:"getDerivedStateFromError",value:function(e){return{error:e,hasError:!0}}}],(n=[{key:"wrappedTopBar",value:function(){var e=this.props,t=e.windowId,n=e.workspaceType,r=e.windowDraggable,o=u.a.createElement("div",null,u.a.createElement(xa,{windowId:t,windowDraggable:r}),u.a.createElement(Vd,{windowId:t}));return"mosaic"===n&&r?this.context.mosaicWindowActions.connectDragSource(o):o}},{key:"render",value:function(){var e=this.props,t=e.focusWindow,n=e.label,r=e.isFetching,o=e.maximized,i=e.sideBarOpen,a=e.view,s=e.windowId,c=e.classes,l=e.t,d=e.manifestError,h=this.state,f=h.error;return h.hasError?u.a.createElement(nd,{windowId:s},u.a.createElement(Ou,{error:f,windowId:s})):u.a.createElement(A.a,{onFocus:t,component:"section",elevation:1,id:s,className:p()(c.window,Object(fn.a)("window"),o?c.maximized:null),"aria-label":l("window",{label:n})},this.wrappedTopBar(),d&&u.a.createElement(Ou,{error:{stack:d},windowId:s}),u.a.createElement("div",{className:c.middle},u.a.createElement("div",{className:c.middleLeft},u.a.createElement("div",{className:c.primaryWindow},u.a.createElement($u,{view:a,windowId:s,isFetching:r,sideBarOpen:i})),u.a.createElement("div",{className:c.companionAreaBottom},u.a.createElement(Nu,{windowId:s,position:"bottom"}))),u.a.createElement("div",{className:c.companionAreaRight},u.a.createElement(Nu,{windowId:s,position:"right"}),u.a.createElement(Nu,{windowId:s,position:"far-right"}))),u.a.createElement(Nu,{windowId:s,position:"far-bottom"}),u.a.createElement(Pn.a,this.props))}}])&&Ud(t.prototype,n),r&&Ud(t,r),i}(l.Component);Xd.contextType=zo.MosaicWindowContext,Xd.defaultProps={classes:{},focusWindow:function(){},isFetching:!1,label:null,manifestError:null,maximized:!1,sideBarOpen:!1,view:void 0,windowDraggable:null,workspaceType:null};var Yd=Object(r.compose)(Object(i.a)(),Object(s.a)((function(e){return{companionAreaBottom:{display:"flex",flex:"0",flexBasis:"auto",minHeight:0},companionAreaRight:{display:"flex",flex:"0 1 auto",minHeight:0},maximized:{},middle:{display:"flex",flex:"1",flexDirection:"row",minHeight:0},middleLeft:{display:"flex",flex:"1",flexDirection:"column",minHeight:0},primaryWindow:{display:"flex",flex:"1",height:"300px",minHeight:0,position:"relative"},thumbnailArea:{backgroundColor:e.palette.shades.dark},thumbnailAreaBottom:{},thumbnailAreaRight:{minWidth:100},window:{"&$maximized":{left:0,position:"absolute",top:0,zIndex:e.zIndex.modal-1},backgroundColor:e.palette.shades.dark,borderRadius:0,display:"flex",flexDirection:"column",height:"100%",minHeight:0,overflow:"hidden",width:"100%"}}})),Object(o.b)((function(e,t){var n=t.windowId;return{isFetching:Object(g.m)(e,{windowId:n}).isFetching,label:Object(g.o)(e,{windowId:n}),manifestError:Object(g.d)(e,{windowId:n}),maximized:(Object(m.e)(e,{windowId:n})||{}).maximized,sideBarOpen:(Object(m.e)(e,{windowId:n})||{}).sideBarOpen,thumbnailNavigationPosition:Object(Wo.getThumbnailNavigationPosition)(e,{windowId:n}),view:Object(Ur.f)(e,{windowId:n}),window:Object(m.e)(e,{windowId:n}),windowDraggable:Object(Ur.d)(e,{windowId:n}),workspaceType:Object(Re.d)(e)}}),(function(e,t){var n=t.windowId;return{focusWindow:function(){return e(h.b(n))}}})),Object(c.a)("Window"))(Xd),Kd=n(1024),Jd=(n(1016),n(1020)),Qd=n.n(Jd);function ep(e){var t=e.t,n=e.title,r=e.windowId;return u.a.createElement(nd,{windowId:"".concat(r,"-preview"),label:t("previewWindowTitle",{title:n}),ariaLabel:!1})}function tp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function np(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tp(Object(n),!0).forEach((function(t){rp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ep.defaultProps={t:function(e){return e},title:""};var op=Object(r.compose)(Object(s.a)((function(e){return{preview:np({},e.typography.h4)}})),Object(i.a)(),Object(o.b)((function(e,t){var n=t.windowId;return{title:Object(g.o)(e,{windowId:n})}}),null),Object(c.a)("MosaicRenderPreview"))(ep),ip=n(940),ap=n(936),sp=n(945),cp=n.n(sp);function lp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var up=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.layout=t}var t,n,r;return t=e,(n=[{key:"pathToCorner",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ap.Corner.TOP_RIGHT;return Object(ap.getPathToCorner)(this.layout,e)}},{key:"pathToParent",value:function(e){return Object(ap.getNodeAtPath)(this.layout,cp()(e))}},{key:"nodeAtPath",value:function(e){return Object(ap.getNodeAtPath)(this.layout,e)}},{key:"addWindows",value:function(e){var t=this;e.forEach((function(n,r){var o,i,a=t.pathToCorner(),s=t.pathToParent(a),c=t.nodeAtPath(a),l=s?Object(ap.getOtherDirection)(s.direction):"row";"row"===l?(o=c,i=e[r]):(o=e[r],i=c);var u={path:a,spec:{$set:{direction:l,first:o,second:i}}};t.layout=Object(ip.updateTree)(t.layout,[u])}))}},{key:"removeWindows",value:function(e,t){var n=this,r=e.map((function(e){return Object(ip.createRemoveUpdate)(n.layout,t[e])}));this.layout=Object(ip.updateTree)(this.layout,r)}}])&&lp(t.prototype,n),r&&lp(t,r),e}();function dp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pp(e,t){return(pp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=gp(e);if(t){var o=gp(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return fp(this,n)}}function fp(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?mp(e):t}function mp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gp(e){return(gp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var vp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pp(e,t)}(i,e);var t,n,r,o=hp(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).tileRenderer=t.tileRenderer.bind(mp(t)),t.mosaicChange=t.mosaicChange.bind(mp(t)),t.determineWorkspaceLayout=t.determineWorkspaceLayout.bind(mp(t)),t.zeroStateView=u.a.createElement("div",null),t.windowPaths={},t.toolbarControls=[],t.additionalControls=[],t}return t=i,r=[{key:"renderPreview",value:function(e){return u.a.createElement("div",{className:"mosaic-preview","aria-hidden":!0},u.a.createElement(op,{windowId:e.windowId}))}}],(n=[{key:"componentDidMount",value:function(){var e=this.props.updateWorkspaceMosaicLayout,t=this.determineWorkspaceLayout();t&&e(t)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.windowIds,r=t.layout,o=t.updateWorkspaceMosaicLayout,i=e.windowIds;if(n.every((function(e){return i.includes(e)}))){if(!i.every((function(e){return n.includes(e)}))){if(0===n.length)return void o(null);var a=Qd()(i,n),s=new up(r);s.removeWindows(a,this.windowPaths),o(s.layout)}}else{var c=this.determineWorkspaceLayout();Os()(c,r)||o(c)}}},{key:"bookkeepPath",value:function(e,t){this.windowPaths[e]=t}},{key:"determineWorkspaceLayout",value:function(){var e=this.props,t=e.windowIds,n=e.layout,r=Object(Kd.getLeaves)(n);if(!t.every((function(e){return r.includes(e)}))){if(r.length<2)return Object(Kd.createBalancedTreeFromLeaves)(t);var o=Qd()(t,r),i=new up(n);return i.addWindows(o),i.layout}return r.every((function(e){return t.includes(e)}))?n:Object(Kd.createBalancedTreeFromLeaves)(t)}},{key:"tileRenderer",value:function(e,t){var n=this.props,r=n.windowIds,o=n.workspaceId;return r.includes(e)?(this.bookkeepPath(e,t),u.a.createElement(Kd.MosaicWindow,{toolbarControls:this.toolbarControls,additionalControls:this.additionalControls,path:t,windowId:e,renderPreview:i.renderPreview},u.a.createElement(Yd,{key:"".concat(e,"-").concat(o),windowId:e}))):null}},{key:"mosaicChange",value:function(e){(0,this.props.updateWorkspaceMosaicLayout)(e)}},{key:"render",value:function(){var e=this.props,t=e.layout,n=e.classes;return u.a.createElement(Kd.MosaicWithoutDragDropContext,{renderTile:this.tileRenderer,initialValue:t||this.determineWorkspaceLayout(),onChange:this.mosaicChange,className:p()("mirador-mosaic",n.root),zeroStateView:this.zeroStateView})}}])&&dp(t.prototype,n),r&&dp(t,r),i}(u.a.Component);vp.defaultProps={layout:void 0,windowIds:[]};var yp={updateWorkspaceMosaicLayout:f.j},bp=Object(r.compose)(Object(s.a)({root:{"& .mosaic-preview":{boxShadow:"none"},"& .mosaic-tile":{boxShadow:"0 1px 3px 0 rgba(0, 0, 0, .2), 0 1px 1px 0 rgba(0, 0, 0, .2), 0 2px 1px -1px rgba(0, 0, 0, .2)"},"& .mosaic-window":{boxShadow:"none"},"& .mosaic-window-toolbar":{display:"none !important"}}}),Object(o.b)((function(e){return{layout:Object(m.i)(e).layout,windowIds:Object(m.i)(e).windowIds,workspaceId:Object(m.i)(e).id}}),yp),Object(c.a)("WorkspaceMosaic"))(vp),wp=n(344),Op=n(311),Ep=n(994),xp=n.n(Ep);function Tp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pp(e,t){return(Pp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Cp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=jp(e);if(t){var o=jp(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _p(this,n)}}function _p(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jp(e){return(jp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var kp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pp(e,t)}(i,e);var t,n,r,o=Cp(i);function i(){return Tp(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.companionWindowDimensions,r=e.focused,o=e.layout,i=e.workspace,a=e.updateElasticWindowLayout,s=i.width/2,c=i.height/2;return u.a.createElement(Op.a,{key:"".concat(o.windowId,"-").concat(i.id),size:{height:o.height+n.height,width:o.width+n.width},position:{x:o.x+s,y:o.y+c},bounds:"parent",onDragStop:function(e,t){a(o.windowId,{x:t.x-s,y:t.y-c})},onResize:function(e,t,r,i,l){a(o.windowId,{height:Number.parseInt(r.style.height,10)-n.height,width:Number.parseInt(r.style.width,10)-n.width,x:l.x-s,y:l.y-c})},dragHandleClassName:Object(fn.a)("window-top-bar"),className:r?t.focused:null},u.a.createElement(Yd,{windowId:o.windowId}))}}])&&Sp(t.prototype,n),r&&Sp(t,r),i}(u.a.Component);kp.defaultProps={classes:{},companionWindowDimensions:{height:0,width:0},focused:!1};var Rp=kp,Ip=Object(r.compose)(Object(s.a)((function(e){return{focused:{zIndex:e.zIndex.modal-1}}})),Object(o.b)((function(e,t){var n=t.windowId;return{companionWindowDimensions:Object(Wo.selectCompanionWindowDimensions)(e,{windowId:n}),focused:Object(Re.e)(e,{windowId:n}),layout:Object(Re.a)(e)[n],workspace:Object(m.i)(e)}}),(function(e,t){return{updateElasticWindowLayout:function(t,n){e(wp.a(t,n))}}})))(Rp);function Dp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ap(e,t){return(Ap=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=zp(e);if(t){var o=zp(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Np(this,n)}}function Np(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zp(e){return(zp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Lp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ap(e,t)}(i,e);var t,n,r,o=Bp(i);function i(){return Dp(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.workspace,r=e.elasticLayout,o=e.setWorkspaceViewportDimensions,i=e.setWorkspaceViewportPosition,a=n.viewportPosition,s=n.width/2,c=n.height/2;return u.a.createElement("div",{style:{height:"100%",position:"relative",width:"100%"}},u.a.createElement(xp.a,{onResize:function(e){o(e)}}),u.a.createElement(Op.a,{size:{height:n.height,width:n.width},position:{x:-1*a.x-s,y:-1*a.y-c},enableResizing:{bottom:!1,bottomLeft:!1,bottomRight:!1,left:!1,right:!1,top:!1,topLeft:!1,topRight:!1},onDragStop:function(e,t){i({x:-1*t.x-s,y:-1*t.y-c})},cancel:".".concat(Object(fn.a)("window")),className:p()(t.workspace,Object(fn.a)("workspace")),disableDragging:!n.draggingEnabled},Object.keys(r).map((function(e){return u.a.createElement(Ip,{key:e,windowId:e})}))))}}])&&Mp(t.prototype,n),r&&Mp(t,r),i}(u.a.Component),Hp=Object(r.compose)(Object(s.a)({workspace:{boxSizing:"border-box",margin:0,position:"absolute",transitionDuration:".7s","& .react-draggable-dragging":{transitionDuration:"unset"}}}),Object(o.b)((function(e){return{elasticLayout:Object(Re.a)(e),workspace:Object(m.i)(e)}}),(function(e,t){return{setWorkspaceViewportDimensions:function(t){e(f.d(t))},setWorkspaceViewportPosition:function(t){e(f.e(t))},updateElasticWindowLayout:function(t,n){e(wp.a(t,n))}}})),Object(c.a)("WorkspaceElastic"))(Lp),Wp=n(993),Fp=n.n(Wp),Vp=n(224),Up=n(88),$p=n(507),Zp=n(969);function Gp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||Xp(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qp(e){return function(e){if(Array.isArray(e))return Yp(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Xp(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xp(e,t){if(e){if("string"==typeof e)return Yp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yp(e,t):void 0}}function Yp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Kp=function(e,t,n){var r=n.onDrop;if(e.urls&&e.urls.forEach((function(e){var o=new URL(e),i=o.searchParams.get("manifest"),a=o.searchParams.get("canvas");i&&r({canvasId:a,manifestId:i},n,t)})),e.files){var o,i=e.files.filter((function(e){return"application/json"===e.type})).map((function(e){return new Promise((function(o,i){var a=new FileReader;a.addEventListener("load",(function(){var e=a.result,i=Object(Up.a)();e&&r({manifestId:i,manifestJson:e},n,t),o()})),a.readAsText(e)}))})),a=e.files.filter((function(e){return e.type.startsWith("image/")}));if(a.length>0){var s=Object(Up.a)(),c=a.map((function(e){return function(e){return new Promise((function(t,n){var r=new FileReader;r.addEventListener("load",(function(){var n=new Image;n.addEventListener("load",(function(){t({height:n.height,name:e.name,type:e.type,url:r.result,width:n.width})})),n.src=r.result})),r.readAsDataURL(e)}))}(e)}));o=Promise.all(c).then((function(e){var o={"@context":"http://iiif.io/api/presentation/3/context.json",id:s,items:e.map((function(e,t){var n=e.name,r=e.type,o=e.width,i=e.height,a=e.url;return{height:i,id:"".concat(s,"/canvas/").concat(t),items:[{id:"".concat(s,"/canvas/").concat(t,"/1"),items:[{body:{format:r,id:a,type:"Image"},height:i,id:"".concat(s,"/canvas/").concat(t,"/1/image"),motivation:"painting",target:"".concat(s,"/canvas/").concat(t,"/1"),type:"Annotation",width:o}],type:"AnnotationPage"}],label:n,type:"Canvas",width:o}})),label:e[0].name,type:"Manifest"},i=Object(Up.a)();o&&r({manifestId:i,manifestJson:o},n,t)}))}return Promise.all([].concat(qp(i),[o]))}},Jp=function(e){var t=e.children,n=e.onDrop,r=Gp(Object(Zp.a)({accept:[$p.NativeTypes.URL,$p.NativeTypes.FILE],collect:function(e){return{canDrop:e.canDrop(),isOver:e.isOver()}},drop:function(t,r){n&&Kp(t,r,e)}}),2),o=r[0],i=o.canDrop,a=o.isOver,s=r[1],c=i&&a;return u.a.createElement("div",{ref:s,onDrop:function(t){if(window.safari&&n&&t.dataTransfer&&t.dataTransfer.types.includes("Files")&&t.dataTransfer.types.includes("text/uri-list")){var r=t.dataTransfer.getData("text/uri-list");if(!r)return;Kp({urls:[r]},null,e)}},style:{height:"100%",width:"100%"}},t,u.a.createElement(M,{open:c,style:{zIndex:9999}},u.a.createElement(Fp.a,{style:{color:Vp.a[400],fontSize:256}})))};function Qp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eh(e,t){return(eh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function th(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=oh(e);if(t){var o=oh(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return nh(this,n)}}function nh(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?rh(e):t}function rh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oh(e){return(oh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ih=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eh(e,t)}(i,e);var t,n,r,o=th(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).handleDrop=t.handleDrop.bind(rh(t)),t}return t=i,(n=[{key:"handleDrop",value:function(e,t,n){var r=e.canvasId,o=e.manifestId,i=e.manifestJson,a=this.props,s=a.addWindow;a.allowNewWindows&&s({canvasId:r,manifest:i,manifestId:o})}},{key:"workspaceByType",value:function(){var e=this.props,t=e.workspaceId,n=e.workspaceType,r=e.windowIds;if(this.maximizedWindows())return this.maximizedWindows();if(0===r.length)return this.zeroWindows();switch(n){case"elastic":return u.a.createElement(Hp,null);case"mosaic":return u.a.createElement(bp,null);default:return r.map((function(e){return u.a.createElement(Yd,{key:"".concat(e,"-").concat(t),windowId:e})}))}}},{key:"zeroWindows",value:function(){var e=this.props.t;return u.a.createElement(No.a,{alignItems:"center",container:!0,style:{height:"100%"}},u.a.createElement(No.a,{xs:12,item:!0},u.a.createElement(L.a,{variant:"h1",component:"div",align:"center"},e("welcome"))))}},{key:"maximizedWindows",value:function(){var e=this.props,t=e.maximizedWindowIds,n=e.workspaceId;return t.length>0&&t.map((function(e){return u.a.createElement(Yd,{key:"".concat(e,"-").concat(n),windowId:e,className:p()(Object(fn.a)("workspace-maximized-window"))})}))}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.isWorkspaceControlPanelVisible,r=e.t;return u.a.createElement(Jp,{onDrop:this.handleDrop},u.a.createElement("div",{className:p()(Object(fn.a)("workspace-viewport"),n&&Object(fn.a)("workspace-with-control-panel"),n&&t.workspaceWithControlPanel,t.workspaceViewport)},u.a.createElement(L.a,{variant:"srOnly",component:"h1"},r("miradorViewer")),this.workspaceByType()))}}])&&Qp(t.prototype,n),r&&Qp(t,r),i}(u.a.Component);ih.defaultProps={addWindow:function(){},allowNewWindows:!0,maximizedWindowIds:[],windowIds:[]};var ah={addWindow:h.a},sh=Object(r.compose)(Object(i.a)(),Object(s.a)((function(e){return{workspaceViewport:{bottom:0,left:0,margin:0,overflow:"hidden",position:"absolute",right:0,top:0},workspaceWithControlPanel:{paddingTop:74},"@media (min-width: 600px)":{workspaceWithControlPanel:{paddingLeft:68,paddingTop:0}}}})),Object(o.b)((function(e){return{allowNewWindows:Object(xt.a)(e).workspace.allowNewWindows,isWorkspaceControlPanelVisible:Object(xt.a)(e).workspaceControlPanel.enabled,maximizedWindowIds:Object(Ur.b)(e),windowIds:Object(m.f)(e),workspaceId:Object(m.i)(e).id,workspaceType:Object(Re.d)(e)}}),ah),Object(c.a)("Workspace"))(ih),ch=n(347),lh=n(876);function uh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dh(e,t){return(dh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ph(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=mh(e);if(t){var o=mh(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return hh(this,n)}}function hh(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?fh(e):t}function fh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mh(e){return(mh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var gh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dh(e,t)}(i,e);var t,n,r,o=ph(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={formValue:""},t.inputRef=u.a.createRef(),t.formSubmit=t.formSubmit.bind(fh(t)),t.handleCancel=t.handleCancel.bind(fh(t)),t.handleInputChange=t.handleInputChange.bind(fh(t)),t}return t=i,(n=[{key:"componentDidUpdate",value:function(){var e=this.props.addResourcesOpen;this.inputRef&&this.inputRef.current&&e&&this.inputRef.current.focus()}},{key:"formSubmit",value:function(e){var t=this.props,n=t.addResource,r=t.onSubmit,o=this.state.formValue;e.preventDefault(),r(),n(o),this.setState({formValue:""})}},{key:"handleCancel",value:function(){(0,this.props.onCancel)(),this.setState({formValue:""})}},{key:"handleInputChange",value:function(e){e.preventDefault(),this.setState({formValue:e.target.value})}},{key:"render",value:function(){var e=this.state.formValue,t=this.props,n=t.classes,r=t.onCancel,o=t.t;return u.a.createElement("form",{onSubmit:this.formSubmit},u.a.createElement(No.a,{container:!0,spacing:2},u.a.createElement(No.a,{item:!0,xs:12,sm:8,md:9},u.a.createElement(gr.a,{inputRef:this.inputRef,fullWidth:!0,value:e,id:"manifestURL",type:"text",onChange:this.handleInputChange,variant:"filled",label:o("addManifestUrl"),helperText:o("addManifestUrlHelp"),InputLabelProps:{shrink:!0},InputProps:{className:n.input}})),u.a.createElement(No.a,{item:!0,xs:12,sm:4,md:3,className:n.buttons},r&&u.a.createElement(F.a,{onClick:this.handleCancel},o("cancel")),u.a.createElement(F.a,{id:"fetchBtn",type:"submit",variant:"contained",color:"primary"},o("fetchManifest")))))}}])&&uh(t.prototype,n),r&&uh(t,r),i}(l.Component);function vh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vh(Object(n),!0).forEach((function(t){bh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}gh.defaultProps={classes:{},onCancel:null,onSubmit:function(){},t:function(e){return e}};var wh={addResource:ch.a},Oh=Object(r.compose)(Object(s.a)((function(e){return{buttons:bh({textAlign:"right"},e.breakpoints.up("sm"),{textAlign:"inherit"}),input:yh({},e.typography.body1)}})),Object(i.a)(),Object(o.b)(null,wh),Object(c.a)("ManifestForm"))(gh),Eh=n(338),xh=n(875),Th=n(427);function Sh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ph(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ch(e,t){return(Ch=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=kh(e);if(t){var o=kh(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return jh(this,n)}}function jh(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kh(e){return(kh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Rh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ch(e,t)}(i,e);var t,n,r,o=_h(i);function i(){return Sh(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.manifestId,r=e.onDismissClick,o=e.onTryAgainClick,i=e.t;return u.a.createElement(No.a,{container:!0},u.a.createElement(No.a,{container:!0},u.a.createElement(No.a,{container:!0,item:!0,xs:12,sm:6},u.a.createElement(No.a,{item:!0,xs:4,sm:3},u.a.createElement(No.a,{container:!0,justify:"center"},u.a.createElement(na.a,{className:t.errorIcon}))),u.a.createElement(No.a,{item:!0,xs:8,sm:9},u.a.createElement(L.a,null,i("manifestError")),u.a.createElement(L.a,{className:t.manifestIdText},n)))),u.a.createElement(No.a,{container:!0},u.a.createElement(No.a,{container:!0,item:!0,xs:12,sm:6,justify:"flex-end"},u.a.createElement(No.a,{item:!0},u.a.createElement(F.a,{onClick:function(){r(n)}},i("dismiss")),u.a.createElement(F.a,{onClick:function(){o(n)}},i("tryAgain"))))))}}])&&Ph(t.prototype,n),r&&Ph(t,r),i}(l.Component),Ih={onDismissClick:ch.b,onTryAgainClick:Eh.a},Dh=Object(r.compose)(Object(i.a)(),Object(s.a)((function(e){return{errorIcon:{color:e.palette.error.main,height:"2rem",width:"2rem"},manifestIdText:{wordBreak:"break-all"}}})),Object(o.b)(null,Ih),Object(c.a)("ManifestListItemError"))(Rh);function Mh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ah(e,t){return(Ah=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bh(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Lh(e);if(t){var o=Lh(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Nh(this,n)}}function Nh(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?zh(e):t}function zh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lh(e){return(Lh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Hh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ah(e,t)}(i,e);var t,n,r,o=Bh(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).handleOpenButtonClick=t.handleOpenButtonClick.bind(zh(t)),t}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.fetchManifest,n=e.manifestId,r=e.ready,o=e.isFetching,i=e.error,a=e.provider;r||i||o||"file"===a||t(n)}},{key:"handleOpenButtonClick",value:function(){var e=this.props,t=e.addWindow,n=e.handleClose,r=e.manifestId,o=e.showCollectionDialog;e.isCollection?o(r):(t({manifestId:r}),n())}},{key:"render",value:function(){var e=this.props,t=e.active,n=e.buttonRef,r=e.manifestId,o=e.ready,i=e.title,a=e.thumbnail,s=e.manifestLogo,c=e.size,l=e.classes,d=e.provider,p=e.t,h=e.error,f=e.isCollection,m=e.isMultipart,g=u.a.createElement(No.a,{container:!0,className:Object(fn.a)("manifest-list-item"),spacing:2},u.a.createElement(No.a,{item:!0,xs:3,sm:2},u.a.createElement(K.a,{className:l.placeholder,variant:"rect",height:80,width:120})),u.a.createElement(No.a,{item:!0,xs:9,sm:6},u.a.createElement(K.a,{className:l.placeholder,variant:"text"})),u.a.createElement(No.a,{item:!0,xs:8,sm:2},u.a.createElement(K.a,{className:l.placeholder,variant:"text"}),u.a.createElement(K.a,{className:l.placeholder,variant:"text"})),u.a.createElement(No.a,{item:!0,xs:4,sm:2},u.a.createElement(K.a,{className:l.placeholder,variant:"rect",height:60,width:60})));return h?u.a.createElement(xh.a,{divider:!0,className:l.root,"data-manifestid":r},u.a.createElement(Dh,{manifestId:r})):u.a.createElement(xh.a,{divider:!0,className:[l.root,t?l.active:""].join(" "),"data-manifestid":r},o?u.a.createElement(No.a,{container:!0,className:Object(fn.a)("manifest-list-item"),spacing:2},u.a.createElement(No.a,{item:!0,xs:12,sm:6,className:l.buttonGrid},u.a.createElement(Ue.a,{ref:n,className:Object(fn.a)("manifest-list-item-title"),style:{width:"100%"},onClick:this.handleOpenButtonClick},u.a.createElement(No.a,{container:!0,spacing:2,className:l.label,component:"span"},u.a.createElement(No.a,{item:!0,xs:4,sm:3,component:"span"},u.a.createElement(Th.Img,{className:[l.thumbnail,Object(fn.a)("manifest-list-item-thumb")].join(" "),src:[a],alt:"",height:"80",unloader:u.a.createElement(K.a,{variant:"rect",animation:!1,className:l.placeholder,height:80,width:120})})),u.a.createElement(No.a,{item:!0,xs:8,sm:9,component:"span"},f&&u.a.createElement(L.a,{component:"div",variant:"overline"},p(m?"multipartCollection":"collection")),u.a.createElement(L.a,{component:"span",variant:"h6"},i||r))))),u.a.createElement(No.a,{item:!0,xs:8,sm:4},u.a.createElement(L.a,{className:Object(fn.a)("manifest-list-item-provider")},d||p("addedFromUrl")),u.a.createElement(L.a,null,p("numItems",{number:c}))),u.a.createElement(No.a,{item:!0,xs:4,sm:2},u.a.createElement(Th.Img,{src:[s],alt:"",role:"presentation",className:l.logo,unloader:u.a.createElement(K.a,{variant:"rect",animation:!1,className:l.placeholder,height:60,width:60})}))):g)}}])&&Mh(t.prototype,n),r&&Mh(t,r),i}(u.a.Component);function Wh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wh(Object(n),!0).forEach((function(t){Vh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Hh.defaultProps={active:!1,buttonRef:void 0,classes:{},error:null,handleClose:function(){},isCollection:!1,isFetching:!1,isMultipart:!1,manifestLogo:null,provider:null,ready:!1,size:0,t:function(e){return e},thumbnail:null,title:null};var Uh={addWindow:h.a,fetchManifest:Eh.a,showCollectionDialog:f.f},$h=Object(r.compose)(Object(i.a)(),Object(s.a)((function(e){return{active:{},buttonGrid:{},label:{textAlign:"left",textTransform:"initial"},logo:{height:"2.5rem",maxWidth:"100%",objectFit:"contain",paddingRight:8},placeholder:{backgroundColor:e.palette.grey[300]},root:Fh(Fh({},e.mixins.gutters()),{},{"&$active":{borderLeft:"4px solid ".concat(e.palette.primary.main)},"&:hover,&:focus-within":{"&$active":{borderLeft:"4px solid ".concat(e.palette.primary.main)},backgroundColor:e.palette.action.hover,borderLeft:"4px solid ".concat(e.palette.action.hover)},borderLeft:"4px solid transparent"}),thumbnail:{maxWidth:"100%",objectFit:"contain"}}})),Object(o.b)((function(e,t){var n=t.manifestId,r=t.provider,o=Object(m.b)(e,{manifestId:n})||{},i=Object(g.q)(e,{manifestId:n}),a=(i||{isCollection:function(){return!1}}).isCollection(),s=a?i.getTotalItems():Object(Na.getCanvases)(e,{manifestId:n}).length;return{active:Object(m.g)(e).includes(n),error:o.error,isCollection:a,isFetching:o.isFetching,isMultipart:a&&Object(v.c)(e,{manifestId:n}).includes("multi-part"),manifestLogo:Object(g.g)(e,{manifestId:n}),provider:r||Object(g.i)(e,{manifestId:n}),ready:!!o.json,size:s,thumbnail:Object(g.n)(e,{manifestId:n}),title:Object(g.o)(e,{manifestId:n})}}),Uh),Object(c.a)("ManifestListItem"))(Hh);function Zh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gh(e,t){return(Gh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qh(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kh(e);if(t){var o=Kh(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Xh(this,n)}}function Xh(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?Yh(e):t}function Yh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kh(e){return(Kh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Jh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gh(e,t)}(i,e);var t,n,r,o=qh(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={addResourcesOpen:!1},t.ref=u.a.createRef(),t.onSubmit=t.onSubmit.bind(Yh(t)),t.setAddResourcesVisibility=t.setAddResourcesVisibility.bind(Yh(t)),t.handleDrop=t.handleDrop.bind(Yh(t)),t}return t=i,(n=[{key:"onSubmit",value:function(){this.setAddResourcesVisibility(!1),this.scrollToTop()}},{key:"setAddResourcesVisibility",value:function(e){this.setState({addResourcesOpen:e})}},{key:"handleDrop",value:function(e,t,n){var r=e.manifestId,o=e.manifestJson,i=this.props.addResource;o?i(r,o,{provider:"file"}):i(r),this.scrollToTop()}},{key:"scrollToTop",value:function(){this.ref.current&&this.ref.current.scrollTo({behavior:"smooth",left:0,top:0})}},{key:"render",value:function(){var e,t,n,r=this,o=this.props,i=o.catalog,a=o.setWorkspaceAddVisibility,s=o.t,c=o.classes,l=this.state.addResourcesOpen,d=i.map((function(e,t){return u.a.createElement($h,Object.assign({},0===t&&{buttonRef:function(e){return e&&e.focus()}},{key:e.manifestId,manifestId:e.manifestId,provider:e.provider,handleClose:function(){return a(!1)}}))}));return u.a.createElement(Jp,{onDrop:this.handleDrop},u.a.createElement("div",{ref:this.ref,className:p()(Object(fn.a)("workspace-add"),c.workspaceAdd)},i.length<1?u.a.createElement(No.a,{alignItems:"center",container:!0,style:{height:"100%"}},u.a.createElement(No.a,{xs:12,item:!0},u.a.createElement(L.a,{variant:"h1",component:"div",align:"center"},s("emptyResourceList")))):u.a.createElement(A.a,{className:c.list},u.a.createElement(L.a,{variant:"srOnly",component:"h1"},s("miradorResources")),u.a.createElement(Pn.a,this.props),u.a.createElement(lh.a,{disablePadding:!0},d)),u.a.createElement(Ze,{variant:"extended",disabled:l,className:p()(c.fab,Object(fn.a)("add-resource-button")),color:"primary",onClick:function(){return r.setAddResourcesVisibility(!0)}},u.a.createElement(Xe.a,null),s("addResource")),u.a.createElement(Da,{className:p()((e={},t=c.displayNone,n=!l,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e)),classes:{paper:c.paper},variant:"persistent",anchor:"bottom",open:l,ModalProps:{disablePortal:!0,hideBackdrop:!0,style:{position:"absolute"}}},u.a.createElement(A.a,{className:c.form},u.a.createElement(Ae,{position:"absolute",color:"primary",onClick:function(){return r.setAddResourcesVisibility(!1)}},u.a.createElement(Be.a,{variant:"dense"},u.a.createElement(dt.a,{"aria-label":s("closeAddResourceForm"),className:c.menuButton,color:"inherit"},u.a.createElement(Wt.a,null)),u.a.createElement(L.a,{variant:"h2",noWrap:!0,color:"inherit",className:c.typographyBody},s("addResource")))),u.a.createElement(Oh,{addResourcesOpen:l,onSubmit:this.onSubmit,onCancel:function(){return r.setAddResourcesVisibility(!1)}})))))}}])&&Zh(t.prototype,n),r&&Zh(t,r),i}(u.a.Component);function Qh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ef(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qh(Object(n),!0).forEach((function(t){tf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Jh.defaultProps={addResource:function(){},catalog:[],classes:{},t:function(e){return e}};var nf={addResource:ch.a,setWorkspaceAddVisibility:f.b},rf=Object(r.compose)(Object(i.a)(),Object(s.a)((function(e){return{displayNone:{display:"none"},fab:{bottom:e.spacing(2),position:"absolute",right:e.spacing(2)},form:ef(ef({},e.mixins.gutters()),{},{left:"0",marginTop:48,paddingBottom:e.spacing(2),paddingTop:e.spacing(2),right:"0"}),list:{margin:"16px"},menuButton:{marginLeft:-12,marginRight:20},paper:tf({borderTop:"0",left:"0"},e.breakpoints.up("sm"),{left:"65px"}),typographyBody:{flexGrow:1},workspaceAdd:{boxSizing:"border-box",height:"100%",overflowX:"hidden",overflowY:"auto",paddingTop:68},"@media (min-width: 600px)":{workspaceAdd:{paddingLeft:68,paddingTop:0}}}})),Object(o.b)((function(e){return{catalog:Object(m.a)(e)}}),nf),Object(c.a)("WorkspaceAdd"))(Jh),of=function(e){return u.a.createElement("div",{className:Object(fn.a)("background-plugin-area"),style:{display:"none"}},u.a.createElement(Pn.a,e))};of.defaultProps={PluginComponents:[]};var af=Object(c.a)("BackgroundPluginArea")(of);function sf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lf(e,t){return(lf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function uf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pf(e);if(t){var o=pf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return df(this,n)}}function df(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pf(e){return(pf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var hf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lf(e,t)}(i,e);var t,n,r,o=uf(i);function i(){return sf(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.controlPanelVariant,r=e.isCollectionDialogVisible,o=e.isWorkspaceAddVisible,i=e.isWorkspaceControlPanelVisible,a=e.lang,s=e.t;return u.a.createElement(u.a.Fragment,null,i&&u.a.createElement(Bo,{variant:n}),u.a.createElement("main",{className:p()(t.viewer,Object(fn.a)("viewer")),lang:a,"aria-label":s("workspace")},o?u.a.createElement(rf,null):u.a.createElement(sh,null),u.a.createElement(De,null),u.a.createElement(af,null),r&&u.a.createElement(ye,null)))}}])&&cf(t.prototype,n),r&&cf(t,r),i}(l.Component);hf.defaultProps={controlPanelVariant:void 0,isCollectionDialogVisible:!1,isWorkspaceAddVisible:!1,lang:void 0};var ff=Object(r.compose)(Object(i.a)(),Object(s.a)((function(e){return{viewer:{background:("light"===e.palette.type?a.a:a.i)(e.palette.shades.light,.1),bottom:0,left:0,overflow:"hidden",position:"absolute",right:0,top:0}}})),Object(o.b)((function(e){return{controlPanelVariant:Object(m.i)(e).isWorkspaceAddVisible||Object(m.f)(e).length>0?void 0:"wide",isCollectionDialogVisible:Object(m.i)(e).collectionDialogOn,isWorkspaceAddVisible:Object(m.i)(e).isWorkspaceAddVisible,isWorkspaceControlPanelVisible:Object(xt.a)(e).workspaceControlPanel.enabled,lang:Object(xt.a)(e).language}})),Object(c.a)("WorkspaceArea"));t.default=ff(hf)},485:function(e,t,n){"use strict";n.r(t),n.d(t,"DndContext",(function(){return r.a})),n.d(t,"createDndContext",(function(){return r.b})),n.d(t,"DndProvider",(function(){return o.a})),n.d(t,"DragPreviewImage",(function(){return a})),n.d(t,"useDrag",(function(){return T})),n.d(t,"useDrop",(function(){return S.a})),n.d(t,"useDragLayer",(function(){return P.a})),n.d(t,"DragSource",(function(){return te})),n.d(t,"DropTarget",(function(){return ce})),n.d(t,"DragLayer",(function(){return ve}));var r=n(163),o=n(885),i=n(0),a=i.memo((function(e){var t=e.connect,n=e.src;if("undefined"!=typeof Image){var r=new Image;r.src=n,r.onload=function(){return t(r)}}return null}));a.displayName="DragPreviewImage";var s=n(16),c=n(954),l=n(294),u=n(939),d=n(310);function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=!1,f=!1,m=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sourceId=null,this.internalMonitor=t.getMonitor()}var t,n,r;return t=e,(n=[{key:"receiveHandlerId",value:function(e){this.sourceId=e}},{key:"getHandlerId",value:function(){return this.sourceId}},{key:"canDrag",value:function(){Object(s.a)(!h,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return h=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{h=!1}}},{key:"isDragging",value:function(){if(!this.sourceId)return!1;Object(s.a)(!f,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return f=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{f=!1}}},{key:"subscribeToStateChange",value:function(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}},{key:"isDraggingSource",value:function(e){return this.internalMonitor.isDraggingSource(e)}},{key:"isOverTarget",value:function(e,t){return this.internalMonitor.isOverTarget(e,t)}},{key:"getTargetIds",value:function(){return this.internalMonitor.getTargetIds()}},{key:"isSourcePublic",value:function(){return this.internalMonitor.isSourcePublic()}},{key:"getSourceId",value:function(){return this.internalMonitor.getSourceId()}},{key:"subscribeToOffsetChange",value:function(e){return this.internalMonitor.subscribeToOffsetChange(e)}},{key:"canDragSource",value:function(e){return this.internalMonitor.canDragSource(e)}},{key:"canDropOnTarget",value:function(e){return this.internalMonitor.canDropOnTarget(e)}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}])&&p(t.prototype,n),r&&p(t,r),e}(),g=n(970),v=n(953),y=n(299);function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var w=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hooks=Object(g.a)({dragSource:function(e,t){n.clearDragSource(),n.dragSourceOptions=t||null,Object(v.a)(e)?n.dragSourceRef=e:n.dragSourceNode=e,n.reconnectDragSource()},dragPreview:function(e,t){n.clearDragPreview(),n.dragPreviewOptions=t||null,Object(v.a)(e)?n.dragPreviewRef=e:n.dragPreviewNode=e,n.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=t}var t,n,r;return t=e,(n=[{key:"receiveHandlerId",value:function(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}},{key:"reconnect",value:function(){this.reconnectDragSource(),this.reconnectDragPreview()}},{key:"reconnectDragSource",value:function(){var e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();t&&this.disconnectDragSource(),this.handlerId&&(e?t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)):this.lastConnectedDragSource=e)}},{key:"reconnectDragPreview",value:function(){var e=this.dragPreview,t=this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();this.handlerId?this.dragPreview&&t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=e,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.disconnectDragPreview(),this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,e,this.dragPreviewOptions)):this.disconnectDragPreview()}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didConnectedDragSourceChange",value:function(){return this.lastConnectedDragSource!==this.dragSource}},{key:"didConnectedDragPreviewChange",value:function(){return this.lastConnectedDragPreview!==this.dragPreview}},{key:"didDragSourceOptionsChange",value:function(){return!Object(y.a)(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}},{key:"didDragPreviewOptionsChange",value:function(){return!Object(y.a)(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}},{key:"disconnectDragSource",value:function(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}},{key:"disconnectDragPreview",value:function(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}},{key:"clearDragSource",value:function(){this.dragSourceNode=null,this.dragSourceRef=null}},{key:"clearDragPreview",value:function(){this.dragPreviewNode=null,this.dragPreviewRef=null}},{key:"connectTarget",get:function(){return this.dragSource}},{key:"dragSourceOptions",get:function(){return this.dragSourceOptionsInternal},set:function(e){this.dragSourceOptionsInternal=e}},{key:"dragPreviewOptions",get:function(){return this.dragPreviewOptionsInternal},set:function(e){this.dragPreviewOptionsInternal=e}},{key:"dragSource",get:function(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}},{key:"dragPreview",get:function(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}}])&&b(t.prototype,n),r&&b(t,r),e}();function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function T(e){var t=Object(i.useRef)(e);t.current=e,Object(s.a)(null!=e.item,"item must be defined"),Object(s.a)(null!=e.item.type,"item type must be defined");var n,r=x((n=Object(d.a)(),[Object(i.useMemo)((function(){return new m(n)}),[n]),Object(i.useMemo)((function(){return new w(n.getBackend())}),[n])]),2),o=r[0],a=r[1];!function(e,t,n){var r=Object(d.a)(),o=Object(i.useMemo)((function(){return{beginDrag:function(){var n=e.current,r=n.begin,o=n.item;if(r){var i=r(t);return Object(s.a)(null==i||"object"===E(i),"dragSpec.begin() must either return an object, undefined, or null"),i||o||{}}return o||{}},canDrag:function(){return"boolean"==typeof e.current.canDrag?e.current.canDrag:"function"!=typeof e.current.canDrag||e.current.canDrag(t)},isDragging:function(n,r){var o=e.current.isDragging;return o?o(t):r===n.getSourceId()},endDrag:function(){var r=e.current.end;r&&r(t.getItem(),t),n.reconnect()}}}),[]);Object(l.a)((function(){var i=O(Object(u.a)(e.current.item.type,o,r),2),a=i[0],s=i[1];return t.receiveHandlerId(a),n.receiveHandlerId(a),s}),[])}(t,o,a);var p=Object(c.a)(o,t.current.collect||function(){return{}},(function(){return a.reconnect()})),h=Object(i.useMemo)((function(){return a.hooks.dragSource()}),[a]),f=Object(i.useMemo)((function(){return a.hooks.dragPreview()}),[a]);return Object(l.a)((function(){a.dragSourceOptions=t.current.options||null,a.reconnect()}),[a]),Object(l.a)((function(){a.dragPreviewOptions=t.current.previewOptions||null,a.reconnect()}),[a]),[p,h,f]}var S=n(969),P=n(884);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e){return"function"==typeof e}function j(){}function k(e){if(!function(e){return"object"===C(e)&&null!==e}(e))return!1;if(null===Object.getPrototypeOf(e))return!0;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function R(e){var t=e.current;return null==t?null:t.decoratedRef?t.decoratedRef.current:t}function I(e){return(t=e)&&t.prototype&&"function"==typeof t.prototype.render||function(e){return e&&e.$$typeof&&"Symbol(react.forward_ref)"===e.$$typeof.toString()}(e);var t}var D=n(93),M=n.n(D);function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t,n){return t&&B(e.prototype,t),n&&B(e,n),e}var z=function(){function e(t){A(this,e),this.isDisposed=!1,this.action=_(t)?t:j}return N(e,[{key:"dispose",value:function(){this.isDisposed||(this.action(),this.isDisposed=!0)}}],[{key:"isDisposable",value:function(e){return e&&_(e.dispose)}},{key:"_fixup",value:function(t){return e.isDisposable(t)?t:e.empty}},{key:"create",value:function(t){return new e(t)}}]),e}();z.empty={dispose:j};var L=function(){function e(){A(this,e),this.isDisposed=!1;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this.disposables=n}return N(e,[{key:"add",value:function(e){this.isDisposed?e.dispose():this.disposables.push(e)}},{key:"remove",value:function(e){var t=!1;if(!this.isDisposed){var n=this.disposables.indexOf(e);-1!==n&&(t=!0,this.disposables.splice(n,1),e.dispose())}return t}},{key:"clear",value:function(){if(!this.isDisposed){for(var e=this.disposables.length,t=new Array(e),n=0;n<e;n++)t[n]=this.disposables[n];this.disposables=[];for(var r=0;r<e;r++)t[r].dispose()}}},{key:"dispose",value:function(){if(!this.isDisposed){this.isDisposed=!0;for(var e=this.disposables.length,t=new Array(e),n=0;n<e;n++)t[n]=this.disposables[n];this.disposables=[];for(var r=0;r<e;r++)t[r].dispose()}}}]),e}(),H=function(){function e(){A(this,e),this.isDisposed=!1}return N(e,[{key:"getDisposable",value:function(){return this.current}},{key:"setDisposable",value:function(e){var t=this.isDisposed;if(!t){var n=this.current;this.current=e,n&&n.dispose()}t&&e&&e.dispose()}},{key:"dispose",value:function(){if(!this.isDisposed){this.isDisposed=!0;var e=this.current;this.current=void 0,e&&e.dispose()}}}]),e}();function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e,t){return!t||"object"!==W(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e){var t=e.DecoratedComponent,n=e.createHandler,o=e.createMonitor,a=e.createConnector,c=e.registerHandler,l=e.containerDisplayName,u=e.getType,d=e.collect,p=e.options.arePropsEqual,h=void 0===p?y.a:p,f=t,m=t.displayName||t.name||"Component",g=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=U(this,$(t).call(this,e))).decoratedRef=i.createRef(),n.handleChange=function(){var e=n.getCurrentState();Object(y.a)(e,n.state)||n.setState(e)},n.disposable=new H,n.receiveProps(e),n.dispose(),n}var l,p,g;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(t,e),l=t,(p=[{key:"getHandlerId",value:function(){return this.handlerId}},{key:"getDecoratedComponentInstance",value:function(){return Object(s.a)(this.decoratedRef.current,"In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()"),this.decoratedRef.current}},{key:"shouldComponentUpdate",value:function(e,t){return!h(e,this.props)||!Object(y.a)(t,this.state)}},{key:"componentDidMount",value:function(){this.disposable=new H,this.currentType=void 0,this.receiveProps(this.props),this.handleChange()}},{key:"componentDidUpdate",value:function(e){h(this.props,e)||(this.receiveProps(this.props),this.handleChange())}},{key:"componentWillUnmount",value:function(){this.dispose()}},{key:"receiveProps",value:function(e){this.handler&&(this.handler.receiveProps(e),this.receiveType(u(e)))}},{key:"receiveType",value:function(e){if(this.handlerMonitor&&this.manager&&this.handlerConnector&&e!==this.currentType){this.currentType=e;var t=F(c(e,this.handler,this.manager),2),n=t[0],r=t[1];this.handlerId=n,this.handlerMonitor.receiveHandlerId(n),this.handlerConnector.receiveHandlerId(n);var o=this.manager.getMonitor().subscribeToStateChange(this.handleChange,{handlerIds:[n]});this.disposable.setDisposable(new L(new z(o),new z(r)))}}},{key:"dispose",value:function(){this.disposable.dispose(),this.handlerConnector&&this.handlerConnector.receiveHandlerId(null)}},{key:"getCurrentState",value:function(){return this.handlerConnector?d(this.handlerConnector.hooks,this.handlerMonitor,this.props):{}}},{key:"render",value:function(){var e=this;return i.createElement(r.a.Consumer,null,(function(t){var n=t.dragDropManager;return e.receiveDragDropManager(n),"undefined"!=typeof requestAnimationFrame&&requestAnimationFrame((function(){return e.handlerConnector.reconnect()})),i.createElement(f,Object.assign({},e.props,e.getCurrentState(),{ref:I(f)?e.decoratedRef:null}))}))}},{key:"receiveDragDropManager",value:function(e){void 0===this.manager&&(Object(s.a)(void 0!==e,"Could not find the drag and drop manager in the context of %s. Make sure to render a DndProvider component in your top-level component. Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#could-not-find-the-drag-and-drop-manager-in-the-context",m,m),void 0!==e&&(this.manager=e,this.handlerMonitor=o(e),this.handlerConnector=a(e.getBackend()),this.handler=n(this.handlerMonitor,this.decoratedRef)))}}])&&V(l.prototype,p),g&&V(l,g),t}(i.Component);return g.DecoratedComponent=t,g.displayName="".concat(l,"(").concat(m,")"),M()(g,t)}function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){return"string"==typeof e||"symbol"===q(e)||!!t&&Array.isArray(e)&&e.every((function(e){return X(e,!1)}))}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var K=["canDrag","beginDrag","isDragging","endDrag"],J=["beginDrag"],Q=function(){function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.props=null,this.beginDrag=function(){if(o.props)return o.spec.beginDrag(o.props,o.monitor,o.ref.current)},this.spec=t,this.monitor=n,this.ref=r}var t,n,r;return t=e,(n=[{key:"receiveProps",value:function(e){this.props=e}},{key:"canDrag",value:function(){return!!this.props&&(!this.spec.canDrag||this.spec.canDrag(this.props,this.monitor))}},{key:"isDragging",value:function(e,t){return!!this.props&&(this.spec.isDragging?this.spec.isDragging(this.props,this.monitor):t===e.getSourceId())}},{key:"endDrag",value:function(){this.props&&this.spec.endDrag&&this.spec.endDrag(this.props,this.monitor,R(this.ref))}}])&&Y(t.prototype,n),r&&Y(t,r),e}();function ee(e){return Object.keys(e).forEach((function(t){Object(s.a)(K.indexOf(t)>-1,'Expected the drag source specification to only have some of the following keys: %s. Instead received a specification with an unexpected "%s" key. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',K.join(", "),t),Object(s.a)("function"==typeof e[t],"Expected %s in the drag source specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source",t,t,e[t])})),J.forEach((function(t){Object(s.a)("function"==typeof e[t],"Expected %s in the drag source specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source",t,t,e[t])})),function(t,n){return new Q(e,t,n)}}function te(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=e;"function"!=typeof e&&(Object(s.a)(X(e),'Expected "type" provided as the first argument to DragSource to be a string, or a function that returns a string given the current props. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',e),o=function(){return e}),Object(s.a)(k(t),'Expected "spec" provided as the second argument to DragSource to be a plain object. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',t);var i=ee(t);return Object(s.a)("function"==typeof n,'Expected "collect" provided as the third argument to DragSource to be a function that returns a plain object of props to inject. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',n),Object(s.a)(k(r),'Expected "options" provided as the fourth argument to DragSource to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',n),function(e){return G({containerDisplayName:"DragSource",createHandler:i,registerHandler:u.a,createConnector:function(e){return new w(e)},createMonitor:function(e){return new m(e)},DecoratedComponent:e,getType:o,collect:n,options:r})}}var ne=n(952),re=n(951);function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ie=["canDrop","hover","drop"],ae=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.props=null,this.spec=t,this.monitor=n,this.ref=r}var t,n,r;return t=e,(n=[{key:"receiveProps",value:function(e){this.props=e}},{key:"receiveMonitor",value:function(e){this.monitor=e}},{key:"canDrop",value:function(){return!this.spec.canDrop||this.spec.canDrop(this.props,this.monitor)}},{key:"hover",value:function(){this.spec.hover&&this.spec.hover(this.props,this.monitor,R(this.ref))}},{key:"drop",value:function(){if(this.spec.drop)return this.spec.drop(this.props,this.monitor,this.ref.current)}}])&&oe(t.prototype,n),r&&oe(t,r),e}();function se(e){return Object.keys(e).forEach((function(t){Object(s.a)(ie.indexOf(t)>-1,'Expected the drop target specification to only have some of the following keys: %s. Instead received a specification with an unexpected "%s" key. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',ie.join(", "),t),Object(s.a)("function"==typeof e[t],"Expected %s in the drop target specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target",t,t,e[t])})),function(t,n){return new ae(e,t,n)}}function ce(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=e;"function"!=typeof e&&(Object(s.a)(X(e,!0),'Expected "type" provided as the first argument to DropTarget to be a string, an array of strings, or a function that returns either given the current props. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',e),o=function(){return e}),Object(s.a)(k(t),'Expected "spec" provided as the second argument to DropTarget to be a plain object. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',t);var i=se(t);return Object(s.a)("function"==typeof n,'Expected "collect" provided as the third argument to DropTarget to be a function that returns a plain object of props to inject. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',n),Object(s.a)(k(r),'Expected "options" provided as the fourth argument to DropTarget to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',n),function(e){return G({containerDisplayName:"DropTarget",createHandler:i,registerHandler:u.b,createMonitor:function(e){return new re.a(e)},createConnector:function(e){return new ne.a(e)},DecoratedComponent:e,getType:o,collect:n,options:r})}}function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function de(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pe(e,t,n){return t&&de(e.prototype,t),n&&de(e,n),e}function he(e,t){return!t||"object"!==le(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function me(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}function ge(e,t){return(ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ve(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s.a)("function"==typeof e,'Expected "collect" provided as the first argument to DragLayer to be a function that collects props to inject into the component. ',"Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-layer",e),Object(s.a)(k(t),'Expected "options" provided as the second argument to DragLayer to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-layer',t),function(n){var o=n,a=t.arePropsEqual,c=void 0===a?y.a:a,l=o.displayName||o.name||"Component",u=function(t){function n(){var e;return ue(this,n),(e=he(this,fe(n).apply(this,arguments))).isCurrentlyMounted=!1,e.ref=i.createRef(),e.handleChange=function(){if(e.isCurrentlyMounted){var t=e.getCurrentState();Object(y.a)(t,e.state)||e.setState(t)}},e}return me(n,t),pe(n,[{key:"getDecoratedComponentInstance",value:function(){return Object(s.a)(this.ref.current,"In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()"),this.ref.current}},{key:"shouldComponentUpdate",value:function(e,t){return!c(e,this.props)||!Object(y.a)(t,this.state)}},{key:"componentDidMount",value:function(){this.isCurrentlyMounted=!0,this.handleChange()}},{key:"componentWillUnmount",value:function(){this.isCurrentlyMounted=!1,this.unsubscribeFromOffsetChange&&(this.unsubscribeFromOffsetChange(),this.unsubscribeFromOffsetChange=void 0),this.unsubscribeFromStateChange&&(this.unsubscribeFromStateChange(),this.unsubscribeFromStateChange=void 0)}},{key:"render",value:function(){var e=this;return i.createElement(r.a.Consumer,null,(function(t){var n=t.dragDropManager;return void 0===n?null:(e.receiveDragDropManager(n),e.isCurrentlyMounted?i.createElement(o,Object.assign({},e.props,e.state,{ref:I(o)?e.ref:null})):null)}))}},{key:"receiveDragDropManager",value:function(e){if(void 0===this.manager){this.manager=e,Object(s.a)("object"===le(e),"Could not find the drag and drop manager in the context of %s. Make sure to render a DndProvider component in your top-level component. Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#could-not-find-the-drag-and-drop-manager-in-the-context",l,l);var t=this.manager.getMonitor();this.unsubscribeFromOffsetChange=t.subscribeToOffsetChange(this.handleChange),this.unsubscribeFromStateChange=t.subscribeToStateChange(this.handleChange)}}},{key:"getCurrentState",value:function(){if(!this.manager)return{};var t=this.manager.getMonitor();return e(t,this.props)}}]),n}(i.Component);return u.displayName="DragLayer(".concat(l,")"),u.DecoratedComponent=n,M()(u,n)}}},934:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MosaicWindowContext=t.MosaicContext=void 0;var o=r(n(0));t.MosaicContext=o.default.createContext(void 0),t.MosaicWindowContext=o.default.createContext(void 0)},935:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalBlueprint=void 0;var a=i(n(0));!function(e){var t,r,o;try{!function(){var e=new Error("Cannot find module '@blueprintjs/core'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=new Error("Cannot find module '@blueprintjs/icons'");throw e.code="MODULE_NOT_FOUND",e}(),t=n(!function(){var e=new Error("Cannot find module '@blueprintjs/core'");throw e.code="MODULE_NOT_FOUND",e}()),r=t.Classes,e.Icon=t.Icon,o=n(!function(){var e=new Error("Cannot find module '@blueprintjs/icons'");throw e.code="MODULE_NOT_FOUND",e}()).IconNames}catch(t){e.Icon=function(e){var t=e.icon;return a.createElement("span",null,t)}}e.getClasses=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r?e.map((function(e){return r[e]})).join(" "):""},e.getIconClass=function(e){return r&&o?r.iconClass(o[e]):""}}(t.OptionalBlueprint||(t.OptionalBlueprint={}))},936:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getAndAssertNodeAtPathExists=t.getNodeAtPath=t.getLeaves=t.getPathToCorner=t.getOtherDirection=t.getOtherBranch=t.createBalancedTreeFromLeaves=t.isParent=t.Corner=void 0;var o,i=r(n(504)),a=r(n(495));function s(e){return null!=e.direction}function c(e){return"row"===e?"column":"row"}function l(e,t){return t.length>0?a.default(e,t,null):e}!function(e){e[e.TOP_LEFT=1]="TOP_LEFT",e[e.TOP_RIGHT=2]="TOP_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT",e[e.BOTTOM_RIGHT=4]="BOTTOM_RIGHT"}(o=t.Corner||(t.Corner={})),t.isParent=s,t.createBalancedTreeFromLeaves=function(e,t){if(void 0===t&&(t="row"),0===e.length)return null;for(var n=i.default(e),r=[];n.length>1;){for(;n.length>0;)n.length>1?r.push({direction:"row",first:n.shift(),second:n.shift()}):r.unshift(n.shift());n=r,r=[]}return function e(t,n){if(void 0===n&&(n="row"),s(t)){var r=c(n);return{direction:n,first:e(t.first,r),second:e(t.second,r)}}return t}(n[0],t)},t.getOtherBranch=function(e){if("first"===e)return"second";if("second"===e)return"first";throw new Error("Branch '"+e+"' not a valid branch")},t.getOtherDirection=c,t.getPathToCorner=function(e,t){for(var n=e,r=[];s(n);)("row"!==n.direction||t!==o.TOP_LEFT&&t!==o.BOTTOM_LEFT)&&("column"!==n.direction||t!==o.TOP_LEFT&&t!==o.TOP_RIGHT)?(r.push("second"),n=n.second):(r.push("first"),n=n.first);return r},t.getLeaves=function e(t){return null==t?[]:s(t)?e(t.first).concat(e(t.second)):[t]},t.getNodeAtPath=l,t.getAndAssertNodeAtPathExists=function(e,t){if(null==e)throw new Error("Root is empty, cannot fetch path");var n=l(e,t);if(null==n)throw new Error("Path ["+t.join(", ")+"] did not resolve to a node");return n}},937:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createDefaultToolbarButton=void 0;var o=r(n(54)),i=r(n(0)),a=n(935);t.createDefaultToolbarButton=function(e,t,n,r){return i.default.createElement("button",{title:e,onClick:n,className:o.default("mosaic-default-control",a.OptionalBlueprint.getClasses("BUTTON","MINIMAL"),t)},r&&i.default.createElement("span",{className:"control-text"},r))}},939:function(e,t,n){"use strict";function r(e,t,n){var r=n.getRegistry(),o=r.addTarget(e,t);return[o,function(){return r.removeTarget(o)}]}function o(e,t,n){var r=n.getRegistry(),o=r.addSource(e,t);return[o,function(){return r.removeSource(o)}]}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}))},940:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createExpandUpdate=t.createHideUpdate=t.createDragToUpdates=t.createRemoveUpdate=t.updateTree=t.buildSpecFromUpdate=void 0;var o=r(n(1021)),i=r(n(1022)),a=r(n(945)),s=r(n(486)),c=r(n(503)),l=r(n(505)),u=r(n(1023)),d=n(946),p=n(936);function h(e){return e.path.length>0?l.default({},e.path,e.spec):e.spec}function f(e,t){var n=e;return t.forEach((function(e){n=o.default(n,h(e))})),n}function m(e,t){var n=a.default(t),r=c.default(t),o=n.concat(p.getOtherBranch(r));return{path:n,spec:{$set:p.getAndAssertNodeAtPathExists(e,o)}}}function g(e,t,n){return s.default(u.default(e,n),u.default(t,n))}t.buildSpecFromUpdate=h,t.updateTree=f,t.createRemoveUpdate=m,t.createDragToUpdates=function(e,t,n,r){var o=p.getAndAssertNodeAtPathExists(e,n),a=[];g(t,n,n.length)?o=f(o,[m(o,i.default(t,n.length))]):(a.push(m(e,t)),g(t,n,t.length-1)&&n.splice(t.length-1,1));var s,c,l=p.getAndAssertNodeAtPathExists(e,t);r===d.MosaicDropTargetPosition.LEFT||r===d.MosaicDropTargetPosition.TOP?(s=l,c=o):(s=o,c=l);var u="column";return r!==d.MosaicDropTargetPosition.LEFT&&r!==d.MosaicDropTargetPosition.RIGHT||(u="row"),a.push({path:n,spec:{$set:{first:s,second:c,direction:u}}}),a},t.createHideUpdate=function(e){return{path:a.default(e),spec:{splitPercentage:{$set:"first"===c.default(e)?0:100}}}},t.createExpandUpdate=function(e,t){for(var n,r={},o=e.length-1;o>=0;o--){var i=e[o];(n={splitPercentage:{$set:"first"===i?t:100-t}})[i]=r,r=n}return{spec:r,path:[]}}},941:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MosaicDragType=void 0,t.MosaicDragType={WINDOW:"MosaicWindow"}},945:function(e,t,n){var r=n(490),o=n(297);e.exports=function(e,t,n){var i=null==e?0:e.length;return i?(t=n||void 0===t?1:o(t),r(e,0,(t=i-t)<0?0:t)):[]}},946:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MosaicDropTargetPosition=void 0,t.MosaicDropTargetPosition={TOP:"top",BOTTOM:"bottom",LEFT:"left",RIGHT:"right"}},948:function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(0)),i=(0,r(n(25)).default)(o.default.createElement("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"AddSharp");t.default=i},949:function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(0)),i=(0,r(n(25)).default)(o.default.createElement("path",{d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6-1.41-1.41z"}),"ExpandMoreSharp");t.default=i},950:function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(0)),i=(0,r(n(25)).default)(o.default.createElement("path",{d:"M11 15h2v2h-2v-2zm0-8h2v6h-2V7zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutlineSharp");t.default=i},951:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(16);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=!1,a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.targetId=null,this.internalMonitor=t.getMonitor()}var t,n,a;return t=e,(n=[{key:"receiveHandlerId",value:function(e){this.targetId=e}},{key:"getHandlerId",value:function(){return this.targetId}},{key:"subscribeToStateChange",value:function(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}},{key:"canDrop",value:function(){if(!this.targetId)return!1;Object(r.a)(!i,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return i=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{i=!1}}},{key:"isOver",value:function(e){return!!this.targetId&&this.internalMonitor.isOverTarget(this.targetId,e)}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}])&&o(t.prototype,n),a&&o(t,a),e}()},952:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(299),o=n(970),i=n(953);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hooks=Object(o.a)({dropTarget:function(e,t){n.clearDropTarget(),n.dropTargetOptions=t,Object(i.a)(e)?n.dropTargetRef=e:n.dropTargetNode=e,n.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=t}var t,n,s;return t=e,(n=[{key:"reconnect",value:function(){var e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();var t=this.dropTarget;this.handlerId&&(t?e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions)):this.lastConnectedDropTarget=t)}},{key:"receiveHandlerId",value:function(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didDropTargetChange",value:function(){return this.lastConnectedDropTarget!==this.dropTarget}},{key:"didOptionsChange",value:function(){return!Object(r.a)(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}},{key:"disconnectDropTarget",value:function(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}},{key:"clearDropTarget",value:function(){this.dropTargetRef=null,this.dropTargetNode=null}},{key:"connectTarget",get:function(){return this.dropTarget}},{key:"dropTargetOptions",get:function(){return this.dropTargetOptionsInternal},set:function(e){this.dropTargetOptionsInternal=e}},{key:"dropTarget",get:function(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}}])&&a(t.prototype,n),s&&a(t,s),e}()},953:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return null!==e&&"object"===r(e)&&e.hasOwnProperty("current")}n.d(t,"a",(function(){return o}))},954:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(294),o=n(434);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(e,t,n){var a=i(Object(o.a)(e,t,n),2),s=a[0],c=a[1];return Object(r.a)((function(){var t=e.getHandlerId();if(null!=t)return e.subscribeToStateChange(c,{handlerIds:[t]})}),[e,c]),s}},955:function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(0)),i=(0,r(n(25)).default)(o.default.createElement("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"MenuSharp");t.default=i},956:function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(0)),i=(0,r(n(25)).default)(o.default.createElement("path",{d:"M21.99 2H2v16h16l4 4-.01-20zM18 14H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"}),"CommentSharp");t.default=i},957:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,$,fullScreenApi;//! openseadragon 2.4.2
//! Built on 2020-03-05
//! Git commit: v2.4.2-0-c450749
//! http://openseadragon.github.io
//! License: http://openseadragon.github.io/license/
function OpenSeadragon(e){return new OpenSeadragon.Viewer(e)}!function(e){e.version={versionStr:"2.4.2",major:parseInt("2",10),minor:parseInt("4",10),revision:parseInt("2",10)};var t,n={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},r=Object.prototype.toString,o=Object.prototype.hasOwnProperty;e.isFunction=function(t){return"function"===e.type(t)},e.isArray=Array.isArray||function(t){return"array"===e.type(t)},e.isWindow=function(e){return e&&"object"==typeof e&&"setInterval"in e},e.type=function(e){return null==e?String(e):n[r.call(e)]||"object"},e.isPlainObject=function(t){if(!t||"object"!==OpenSeadragon.type(t)||t.nodeType||e.isWindow(t))return!1;if(t.constructor&&!o.call(t,"constructor")&&!o.call(t.constructor.prototype,"isPrototypeOf"))return!1;var n;for(var r in t)n=r;return void 0===n||o.call(t,n)},e.isEmptyObject=function(e){for(var t in e)return!1;return!0},e.freezeObject=function(t){return Object.freeze?e.freezeObject=Object.freeze:e.freezeObject=function(e){return e},e.freezeObject(t)},e.supportsCanvas=(t=document.createElement("canvas"),!(!e.isFunction(t.getContext)||!t.getContext("2d"))),e.isCanvasTainted=function(e){var t=!1;try{e.getContext("2d").getImageData(0,0,1,1)}catch(e){t=!0}return t},e.pixelDensityRatio=function(){if(e.supportsCanvas){var t=document.createElement("canvas").getContext("2d"),n=window.devicePixelRatio||1,r=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return Math.max(n,1)/r}return 1}()}(OpenSeadragon),function($){$.extend=function(){var e,t,n,r,o,i,a=arguments[0]||{},s=arguments.length,c=!1,l=1;for("boolean"==typeof a&&(c=a,a=arguments[1]||{},l=2),"object"==typeof a||OpenSeadragon.isFunction(a)||(a={}),s===l&&(a=this,--l);l<s;l++)if(null!==(e=arguments[l])||void 0!==e)for(t in e)n=a[t],a!==(r=e[t])&&(c&&r&&(OpenSeadragon.isPlainObject(r)||(o=OpenSeadragon.isArray(r)))?(o?(o=!1,i=n&&OpenSeadragon.isArray(n)?n:[]):i=n&&OpenSeadragon.isPlainObject(n)?n:{},a[t]=OpenSeadragon.extend(c,i,r)):void 0!==r&&(a[t]=r));return a};var isIOSDevice=function(){if("object"!=typeof navigator)return!1;var e=navigator.userAgent;return"string"==typeof e&&(-1!==e.indexOf("iPhone")||-1!==e.indexOf("iPad")||-1!==e.indexOf("iPod"))};$.extend($,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:!1,ajaxWithCredentials:!1,loadTilesWithAjax:!1,ajaxHeaders:{},panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:!1,clickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,gestureSettingsMouse:{scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsTouch:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsPen:{scrollToZoom:!1,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsUnknown:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},zoomPerClick:2,zoomPerScroll:1.2,zoomPerSecond:1,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,smoothTileEdgesMinZoom:1.1,iOSDevice:isIOSDevice(),pixelsPerWheelLine:40,pixelsPerArrowPress:40,autoResize:!0,preserveImageSizeOnResize:!1,minScrollDeltaTime:50,rotationIncrement:90,showSequenceControl:!0,sequenceControlAnchor:null,preserveViewport:!1,preserveOverlays:!1,navPrevNextWrap:!1,showNavigationControl:!0,navigationControlAnchor:null,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showRotationControl:!1,showFlipControl:!1,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:.2,navigatorMaintainSizeRatio:!1,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoResize:!0,navigatorAutoFade:!0,navigatorRotate:!0,navigatorBackground:"#000",navigatorOpacity:.8,navigatorBorderColor:"#555",navigatorDisplayRegionColor:"#900",degrees:0,flipped:!1,opacity:1,preload:!1,compositeOperation:null,imageSmoothingEnabled:!0,placeholderFillStyle:null,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionColumns:0,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,collectionTileMargin:80,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,useCanvas:!0,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},rotateleft:{REST:"rotateleft_rest.png",GROUP:"rotateleft_grouphover.png",HOVER:"rotateleft_hover.png",DOWN:"rotateleft_pressed.png"},rotateright:{REST:"rotateright_rest.png",GROUP:"rotateright_grouphover.png",HOVER:"rotateright_hover.png",DOWN:"rotateright_pressed.png"},flip:{REST:"flip_rest.png",GROUP:"flip_grouphover.png",HOVER:"flip_hover.png",DOWN:"flip_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:["#437AB2","#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666"]},SIGNAL:"----seadragon----",delegate:function(e,t){return function(){var n=arguments;return void 0===n&&(n=[]),t.apply(e,n)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5},getElement:function(e){return"string"==typeof e&&(e=document.getElementById(e)),e},getElementPosition:function(e){var t,n,r=new $.Point;for(n=getOffsetParent(e=$.getElement(e),t="fixed"==$.getElementStyle(e).position);n;)r.x+=e.offsetLeft,r.y+=e.offsetTop,t&&(r=r.plus($.getPageScroll())),n=getOffsetParent(e=n,t="fixed"==$.getElementStyle(e).position);return r},getElementOffset:function(e){var t,n,r=(e=$.getElement(e))&&e.ownerDocument,o={top:0,left:0};return r?(t=r.documentElement,void 0!==e.getBoundingClientRect&&(o=e.getBoundingClientRect()),n=r==r.window?r:9===r.nodeType&&(r.defaultView||r.parentWindow),new $.Point(o.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0),o.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0))):new $.Point},getElementSize:function(e){return e=$.getElement(e),new $.Point(e.clientWidth,e.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(e){return(e=$.getElement(e)).currentStyle}:function(e){return e=$.getElement(e),window.getComputedStyle(e,"")},getCssPropertyWithVendorPrefix:function(e){var t={};return $.getCssPropertyWithVendorPrefix=function(e){if(void 0!==t[e])return t[e];var n=document.createElement("div").style,r=null;if(void 0!==n[e])r=e;else for(var o=["Webkit","Moz","MS","O","webkit","moz","ms","o"],i=$.capitalizeFirstLetter(e),a=0;a<o.length;a++){var s=o[a]+i;if(void 0!==n[s]){r=s;break}}return t[e]=r,r},$.getCssPropertyWithVendorPrefix(e)},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},positiveModulo:function(e,t){var n=e%t;return n<0&&(n+=t),n},pointInElement:function(e,t){e=$.getElement(e);var n=$.getElementOffset(e),r=$.getElementSize(e);return t.x>=n.x&&t.x<n.x+r.x&&t.y<n.y+r.y&&t.y>=n.y},getEvent:function(e){return $.getEvent=e?function(e){return e}:function(){return window.event},$.getEvent(e)},getMousePosition:function(e){if("number"==typeof e.pageX)$.getMousePosition=function(e){var t=new $.Point;return e=$.getEvent(e),t.x=e.pageX,t.y=e.pageY,t};else{if("number"!=typeof e.clientX)throw new Error("Unknown event mouse position, no known technique.");$.getMousePosition=function(e){var t=new $.Point;return e=$.getEvent(e),t.x=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,t.y=e.clientY+document.body.scrollTop+document.documentElement.scrollTop,t}}return $.getMousePosition(e)},getPageScroll:function(){var e=document.documentElement||{},t=document.body||{};if("number"==typeof window.pageXOffset)$.getPageScroll=function(){return new $.Point(window.pageXOffset,window.pageYOffset)};else if(t.scrollLeft||t.scrollTop)$.getPageScroll=function(){return new $.Point(document.body.scrollLeft,document.body.scrollTop)};else{if(!e.scrollLeft&&!e.scrollTop)return new $.Point(0,0);$.getPageScroll=function(){return new $.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)}}return $.getPageScroll()},setPageScroll:function(e){if(void 0!==window.scrollTo)$.setPageScroll=function(e){window.scrollTo(e.x,e.y)};else{var t=$.getPageScroll();if(t.x===e.x&&t.y===e.y)return;document.body.scrollLeft=e.x,document.body.scrollTop=e.y;var n=$.getPageScroll();if(n.x!==t.x&&n.y!==t.y)return void($.setPageScroll=function(e){document.body.scrollLeft=e.x,document.body.scrollTop=e.y});if(document.documentElement.scrollLeft=e.x,document.documentElement.scrollTop=e.y,(n=$.getPageScroll()).x!==t.x&&n.y!==t.y)return void($.setPageScroll=function(e){document.documentElement.scrollLeft=e.x,document.documentElement.scrollTop=e.y});$.setPageScroll=function(e){}}return $.setPageScroll(e)},getWindowSize:function(){var e=document.documentElement||{},t=document.body||{};if("number"==typeof window.innerWidth)$.getWindowSize=function(){return new $.Point(window.innerWidth,window.innerHeight)};else if(e.clientWidth||e.clientHeight)$.getWindowSize=function(){return new $.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else{if(!t.clientWidth&&!t.clientHeight)throw new Error("Unknown window size, no known technique.");$.getWindowSize=function(){return new $.Point(document.body.clientWidth,document.body.clientHeight)}}return $.getWindowSize()},makeCenteredNode:function(e){e=$.getElement(e);var t=[$.makeNeutralElement("div"),$.makeNeutralElement("div"),$.makeNeutralElement("div")];return $.extend(t[0].style,{display:"table",height:"100%",width:"100%"}),$.extend(t[1].style,{display:"table-row"}),$.extend(t[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),t[0].appendChild(t[1]),t[1].appendChild(t[2]),t[2].appendChild(e),t[0]},makeNeutralElement:function(e){var t=document.createElement(e),n=t.style;return n.background="transparent none",n.border="none",n.margin="0px",n.padding="0px",n.position="static",t},now:function(){return Date.now?$.now=Date.now:$.now=function(){return(new Date).getTime()},$.now()},makeTransparentImage:function(e){return $.makeTransparentImage=function(e){var t=$.makeNeutralElement("img");return t.src=e,t},$.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<7&&($.makeTransparentImage=function(e){var t=$.makeNeutralElement("img"),n=null;return(n=$.makeNeutralElement("span")).style.display="inline-block",t.onload=function(){n.style.width=n.style.width||t.width+"px",n.style.height=n.style.height||t.height+"px",t.onload=null,t=null},t.src=e,n.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e+"', sizingMethod='scale')",n}),$.makeTransparentImage(e)},setElementOpacity:function(e,t,n){var r;e=$.getElement(e),n&&!$.Browser.alpha&&(t=Math.round(t)),$.Browser.opacity?e.style.opacity=t<1?t:"":t<1?(r="alpha(opacity="+Math.round(100*t)+")",e.style.filter=r):e.style.filter=""},setElementTouchActionNone:function(e){void 0!==(e=$.getElement(e)).style.touchAction?e.style.touchAction="none":void 0!==e.style.msTouchAction&&(e.style.msTouchAction="none")},addClass:function(e,t){(e=$.getElement(e)).className?-1===(" "+e.className+" ").indexOf(" "+t+" ")&&(e.className+=" "+t):e.className=t},indexOf:function(e,t,n){return Array.prototype.indexOf?this.indexOf=function(e,t,n){return e.indexOf(t,n)}:this.indexOf=function(e,t,n){var r,o,i=n||0;if(!e)throw new TypeError;if(0===(o=e.length)||i>=o)return-1;for(i<0&&(i=o-Math.abs(i)),r=i;r<o;r++)if(e[r]===t)return r;return-1},this.indexOf(e,t,n)},removeClass:function(e,t){var n,r,o=[];for(n=(e=$.getElement(e)).className.split(/\s+/),r=0;r<n.length;r++)n[r]&&n[r]!==t&&o.push(n[r]);e.className=o.join(" ")},addEvent:function(){if(window.addEventListener)return function(e,t,n,r){(e=$.getElement(e)).addEventListener(t,n,r)};if(window.attachEvent)return function(e,t,n,r){(e=$.getElement(e)).attachEvent("on"+t,n)};throw new Error("No known event model.")}(),removeEvent:function(){if(window.removeEventListener)return function(e,t,n,r){(e=$.getElement(e)).removeEventListener(t,n,r)};if(window.detachEvent)return function(e,t,n,r){(e=$.getElement(e)).detachEvent("on"+t,n)};throw new Error("No known event model.")}(),cancelEvent:function(e){(e=$.getEvent(e)).preventDefault?$.cancelEvent=function(e){e.preventDefault()}:$.cancelEvent=function(e){(e=$.getEvent(e)).cancel=!0,e.returnValue=!1},$.cancelEvent(e)},stopEvent:function(e){(e=$.getEvent(e)).stopPropagation?$.stopEvent=function(e){e.stopPropagation()}:$.stopEvent=function(e){(e=$.getEvent(e)).cancelBubble=!0},$.stopEvent(e)},createCallback:function(e,t){var n,r=[];for(n=2;n<arguments.length;n++)r.push(arguments[n]);return function(){var n,o=r.concat([]);for(n=0;n<arguments.length;n++)o.push(arguments[n]);return t.apply(e,o)}},getUrlParameter:function(e){var t=URLPARAMS[e];return t||null},getUrlProtocol:function(e){var t=e.match(/^([a-z]+:)\/\//i);return null===t?window.location.protocol:t[1].toLowerCase()},createAjaxRequest:function(e){var t;try{t=!!new ActiveXObject("Microsoft.XMLHTTP")}catch(e){t=!1}if(t)window.XMLHttpRequest?$.createAjaxRequest=function(e){return e?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest}:$.createAjaxRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")};else{if(!window.XMLHttpRequest)throw new Error("Browser doesn't support XMLHttpRequest.");$.createAjaxRequest=function(){return new XMLHttpRequest}}return $.createAjaxRequest(e)},makeAjaxRequest:function(e,t,n){var r,o,i;$.isPlainObject(e)&&(t=e.success,n=e.error,r=e.withCredentials,o=e.headers,i=e.responseType||null,e=e.url);var a=$.getUrlProtocol(e),s=$.createAjaxRequest("file:"===a);if(!$.isFunction(t))throw new Error("makeAjaxRequest requires a success callback");s.onreadystatechange=function(){4==s.readyState&&(s.onreadystatechange=function(){},s.status>=200&&s.status<300||0===s.status&&"http:"!==a&&"https:"!==a?t(s):($.console.log("AJAX request returned %d: %s",s.status,e),$.isFunction(n)&&n(s)))};try{if(s.open("GET",e,!0),i&&(s.responseType=i),o)for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&s.setRequestHeader(c,o[c]);r&&(s.withCredentials=!0),s.send(null)}catch(r){var l=r.message;if($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<10&&void 0!==r.number&&-2147024891==r.number&&(l+="\nSee http://msdn.microsoft.com/en-us/library/ms537505(v=vs.85).aspx#xdomain"),$.console.log("%s while making AJAX request: %s",r.name,l),s.onreadystatechange=function(){},window.XDomainRequest){var u=new window.XDomainRequest;if(u){u.onload=function(e){$.isFunction(t)&&t({responseText:u.responseText,status:200,statusText:"OK"})},u.onerror=function(e){$.isFunction(n)&&n({responseText:u.responseText,status:444,statusText:"An error happened. Due to an XDomainRequest deficiency we can not extract any information about this error. Upgrade your browser."})};try{u.open("GET",e),u.send()}catch(e){$.isFunction(n)&&n(s,r)}}}else $.isFunction(n)&&n(s,r)}return s},jsonp:function(e){var t,n=e.url,r=document.head||document.getElementsByTagName("head")[0]||document.documentElement,o=e.callbackName||"openseadragon"+$.now(),i=window[o],a="$1"+o+"$2",s=e.param||"callback",c=e.callback;n=n.replace(/(\=)\?(&|$)|\?\?/i,a),n+=(/\?/.test(n)?"&":"?")+s+"="+o,window[o]=function(e){if(i)window[o]=i;else try{delete window[o]}catch(e){}c&&$.isFunction(c)&&c(e)},t=document.createElement("script"),void 0===e.async&&!1===e.async||(t.async="async"),e.scriptCharset&&(t.charset=e.scriptCharset),t.src=n,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,r&&t.parentNode&&r.removeChild(t),t=void 0)},r.insertBefore(t,r.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(e){if(window.DOMParser)$.parseXml=function(e){return(new DOMParser).parseFromString(e,"text/xml")};else{if(!window.ActiveXObject)throw new Error("Browser doesn't support XML DOM.");$.parseXml=function(e){var t=null;return(t=new ActiveXObject("Microsoft.XMLDOM")).async=!1,t.loadXML(e),t}}return $.parseXml(e)},parseJSON:function(string){return window.JSON&&window.JSON.parse?$.parseJSON=window.JSON.parse:$.parseJSON=function(string){return eval("("+string+")")},$.parseJSON(string)},imageFormatSupported:function(e){return!!FILEFORMATS[(e=e||"").toLowerCase()]}});var nullfunction=function(e){};$.console=window.console||{log:nullfunction,debug:nullfunction,info:nullfunction,warn:nullfunction,error:nullfunction,assert:nullfunction},$.Browser={vendor:$.BROWSERS.UNKNOWN,version:0,alpha:!0};var FILEFORMATS={bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1},URLPARAMS={};function getOffsetParent(e,t){return t&&e!=document.body?document.body:e.offsetParent}!function(){var e=navigator.appVersion,t=navigator.userAgent;switch(navigator.appName){case"Microsoft Internet Explorer":window.attachEvent&&window.ActiveXObject&&($.Browser.vendor=$.BROWSERS.IE,$.Browser.version=parseFloat(t.substring(t.indexOf("MSIE")+5,t.indexOf(";",t.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(t.indexOf("Firefox")>=0?($.Browser.vendor=$.BROWSERS.FIREFOX,$.Browser.version=parseFloat(t.substring(t.indexOf("Firefox")+8))):t.indexOf("Safari")>=0?($.Browser.vendor=t.indexOf("Chrome")>=0?$.BROWSERS.CHROME:$.BROWSERS.SAFARI,$.Browser.version=parseFloat(t.substring(t.substring(0,t.indexOf("Safari")).lastIndexOf("/")+1,t.indexOf("Safari")))):null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(t)&&($.Browser.vendor=$.BROWSERS.IE,$.Browser.version=parseFloat(RegExp.$1)));break;case"Opera":$.Browser.vendor=$.BROWSERS.OPERA,$.Browser.version=parseFloat(e)}var n,r,o,i=window.location.search.substring(1).split("&");for(o=0;o<i.length;o++)if((r=(n=i[o]).indexOf("="))>0){var a=n.substring(0,r),s=n.substring(r+1);try{URLPARAMS[a]=decodeURIComponent(s)}catch(e){$.console.error("Ignoring malformed URL parameter: %s=%s",a,s)}}$.Browser.alpha=!($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<9||$.Browser.vendor==$.BROWSERS.CHROME&&$.Browser.version<2),$.Browser.opacity=!($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<9)}(),function(e){var t=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||e.msRequestAnimationFrame,n=e.cancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelAnimationFrame||e.msCancelAnimationFrame;if(t&&n)$.requestAnimationFrame=function(){return t.apply(e,arguments)},$.cancelAnimationFrame=function(){return n.apply(e,arguments)};else{var r,o=[],i=[],a=0;$.requestAnimationFrame=function(e){return o.push([++a,e]),r||(r=setInterval((function(){if(o.length){var e=$.now(),t=i;for(i=o,o=t;i.length;)i.shift()[1](e)}else clearInterval(r),r=void 0}),20)),a},$.cancelAnimationFrame=function(e){var t,n;for(t=0,n=o.length;t<n;t+=1)if(o[t][0]===e)return void o.splice(t,1);for(t=0,n=i.length;t<n;t+=1)if(i[t][0]===e)return void i.splice(t,1)}}}(window)}(OpenSeadragon),__WEBPACK_AMD_DEFINE_ARRAY__=[],void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=function(){return OpenSeadragon})?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__),$=OpenSeadragon,fullScreenApi={supportsFullScreen:!1,isFullScreen:function(){return!1},getFullScreenElement:function(){return null},requestFullScreen:function(){},exitFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",fullScreenErrorEventName:""},document.exitFullscreen?(fullScreenApi.supportsFullScreen=!0,fullScreenApi.getFullScreenElement=function(){return document.fullscreenElement},fullScreenApi.requestFullScreen=function(e){return e.requestFullscreen()},fullScreenApi.exitFullScreen=function(){document.exitFullscreen()},fullScreenApi.fullScreenEventName="fullscreenchange",fullScreenApi.fullScreenErrorEventName="fullscreenerror"):document.msExitFullscreen?(fullScreenApi.supportsFullScreen=!0,fullScreenApi.getFullScreenElement=function(){return document.msFullscreenElement},fullScreenApi.requestFullScreen=function(e){return e.msRequestFullscreen()},fullScreenApi.exitFullScreen=function(){document.msExitFullscreen()},fullScreenApi.fullScreenEventName="MSFullscreenChange",fullScreenApi.fullScreenErrorEventName="MSFullscreenError"):document.webkitExitFullscreen?(fullScreenApi.supportsFullScreen=!0,fullScreenApi.getFullScreenElement=function(){return document.webkitFullscreenElement},fullScreenApi.requestFullScreen=function(e){return e.webkitRequestFullscreen()},fullScreenApi.exitFullScreen=function(){document.webkitExitFullscreen()},fullScreenApi.fullScreenEventName="webkitfullscreenchange",fullScreenApi.fullScreenErrorEventName="webkitfullscreenerror"):document.webkitCancelFullScreen?(fullScreenApi.supportsFullScreen=!0,fullScreenApi.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement},fullScreenApi.requestFullScreen=function(e){return e.webkitRequestFullScreen()},fullScreenApi.exitFullScreen=function(){document.webkitCancelFullScreen()},fullScreenApi.fullScreenEventName="webkitfullscreenchange",fullScreenApi.fullScreenErrorEventName="webkitfullscreenerror"):document.mozCancelFullScreen&&(fullScreenApi.supportsFullScreen=!0,fullScreenApi.getFullScreenElement=function(){return document.mozFullScreenElement},fullScreenApi.requestFullScreen=function(e){return e.mozRequestFullScreen()},fullScreenApi.exitFullScreen=function(){document.mozCancelFullScreen()},fullScreenApi.fullScreenEventName="mozfullscreenchange",fullScreenApi.fullScreenErrorEventName="mozfullscreenerror"),fullScreenApi.isFullScreen=function(){return null!==fullScreenApi.getFullScreenElement()},fullScreenApi.cancelFullScreen=function(){$.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead."),fullScreenApi.exitFullScreen()},$.extend($,fullScreenApi),function(e){e.EventSource=function(){this.events={}},e.EventSource.prototype={addOnceHandler:function(e,t,n,r){var o=this;r=r||1;var i=0,a=function(n){++i===r&&o.removeHandler(e,a),t(n)};this.addHandler(e,a,n)},addHandler:function(t,n,r){var o=this.events[t];o||(this.events[t]=o=[]),n&&e.isFunction(n)&&(o[o.length]={handler:n,userData:r||null})},removeHandler:function(t,n){var r,o=this.events[t],i=[];if(o&&e.isArray(o)){for(r=0;r<o.length;r++)o[r].handler!==n&&i.push(o[r]);this.events[t]=i}},removeAllHandlers:function(e){if(e)this.events[e]=[];else for(var t in this.events)this.events[t]=[]},getHandler:function(e){var t=this.events[e];return t&&t.length?(t=1===t.length?[t[0]]:Array.apply(null,t),function(e,n){var r,o=t.length;for(r=0;r<o;r++)t[r]&&(n.eventSource=e,n.userData=t[r].userData,t[r].handler(n))}):null},raiseEvent:function(e,t){var n=this.getHandler(e);n&&(t||(t={}),n(this,t))}}}(OpenSeadragon),function(e){var t,n,r,o,i,a,s=[],c={};function l(t){var n,r=c[t.hash],o=r.activePointersLists.length;for(n=0;n<o;n++)r.activePointersLists[n].captureCount>0&&(e.removeEvent(e.MouseTracker.captureElement,"mousemove",r.mousemovecaptured,!0),e.removeEvent(e.MouseTracker.captureElement,"mouseup",r.mouseupcaptured,!0),e.removeEvent(e.MouseTracker.captureElement,e.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",r.pointermovecaptured,!0),e.removeEvent(e.MouseTracker.captureElement,e.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",r.pointerupcaptured,!0),e.removeEvent(e.MouseTracker.captureElement,"touchmove",r.touchmovecaptured,!0),e.removeEvent(e.MouseTracker.captureElement,"touchend",r.touchendcaptured,!0),r.activePointersLists[n].captureCount=0);for(n=0;n<o;n++)r.activePointersLists.pop()}function u(t){var n,r,o=c[t.hash];if(o.tracking){for(r=0;r<e.MouseTracker.subscribeEvents.length;r++)n=e.MouseTracker.subscribeEvents[r],e.removeEvent(t.element,n,o[n],!1);l(t),o.tracking=!1}}function d(t,n){var r=c[t.hash];if("pointerevent"===n)return{upName:e.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",upHandler:r.pointerupcaptured,moveName:e.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",moveHandler:r.pointermovecaptured};if("mouse"===n)return{upName:"mouseup",upHandler:r.mouseupcaptured,moveName:"mousemove",moveHandler:r.mousemovecaptured};if("touch"===n)return{upName:"touchend",upHandler:r.touchendcaptured,moveName:"touchmove",moveHandler:r.touchmovecaptured};throw new Error("MouseTracker.getCaptureEventParams: Unknown pointer type.")}function p(t,n,r){var o,i=t.getActivePointersListByType(n);i.captureCount+=r||1,1===i.captureCount&&(e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<9?t.element.setCapture(!0):(o=d(t,e.MouseTracker.havePointerEvents?"pointerevent":n),ye&&be(window.top)&&e.addEvent(window.top,o.upName,o.upHandler,!0),e.addEvent(e.MouseTracker.captureElement,o.upName,o.upHandler,!0),e.addEvent(e.MouseTracker.captureElement,o.moveName,o.moveHandler,!0)))}function h(t,n,r){var o,i=t.getActivePointersListByType(n);i.captureCount-=r||1,0===i.captureCount&&(e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<9?t.element.releaseCapture():(o=d(t,e.MouseTracker.havePointerEvents?"pointerevent":n),ye&&be(window.top)&&e.removeEvent(window.top,o.upName,o.upHandler,!0),e.removeEvent(e.MouseTracker.captureElement,o.moveName,o.moveHandler,!0),e.removeEvent(e.MouseTracker.captureElement,o.upName,o.upHandler,!0)))}function f(t){var n;if(e.MouseTracker.unprefixedPointerEvents)n=t.pointerType;else switch(t.pointerType){case 2:n="touch";break;case 3:n="pen";break;case 4:n="mouse";break;default:n=""}return n}function m(t){return e.getMousePosition(t)}function g(e,t){return v(m(e),t)}function v(t,n){var r=e.getElementOffset(n);return t.minus(r)}function y(t,n){return new e.Point((t.x+n.x)/2,(t.y+n.y)/2)}function b(t,n){t.clickHandler&&e.cancelEvent(n)}function w(t,n){t.dblClickHandler&&e.cancelEvent(n)}function O(t,n){t.keyDownHandler&&(n=e.getEvent(n),t.keyDownHandler({eventSource:t,keyCode:n.keyCode?n.keyCode:n.charCode,ctrl:n.ctrlKey,shift:n.shiftKey,alt:n.altKey,meta:n.metaKey,originalEvent:n,preventDefaultAction:!1,userData:t.userData})||e.cancelEvent(n))}function E(t,n){t.keyUpHandler&&(n=e.getEvent(n),t.keyUpHandler({eventSource:t,keyCode:n.keyCode?n.keyCode:n.charCode,ctrl:n.ctrlKey,shift:n.shiftKey,alt:n.altKey,meta:n.metaKey,originalEvent:n,preventDefaultAction:!1,userData:t.userData})||e.cancelEvent(n))}function x(t,n){t.keyHandler&&(n=e.getEvent(n),t.keyHandler({eventSource:t,keyCode:n.keyCode?n.keyCode:n.charCode,ctrl:n.ctrlKey,shift:n.shiftKey,alt:n.altKey,meta:n.metaKey,originalEvent:n,preventDefaultAction:!1,userData:t.userData})||e.cancelEvent(n))}function T(t,n){t.focusHandler&&(n=e.getEvent(n),!1===t.focusHandler({eventSource:t,originalEvent:n,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(n))}function S(t,n){t.blurHandler&&(n=e.getEvent(n),!1===t.blurHandler({eventSource:t,originalEvent:n,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(n))}function P(e,t){_(e,t,t)}function C(t,n){var r={target:(n=e.getEvent(n)).target||n.srcElement,type:"wheel",shiftKey:n.shiftKey||!1,clientX:n.clientX,clientY:n.clientY,pageX:n.pageX?n.pageX:n.clientX,pageY:n.pageY?n.pageY:n.clientY,deltaMode:"MozMousePixelScroll"==n.type?0:1,deltaX:0,deltaZ:0};"mousewheel"==e.MouseTracker.wheelEventName?r.deltaY=-n.wheelDelta/e.DEFAULT_SETTINGS.pixelsPerWheelLine:r.deltaY=n.detail,_(t,r,n)}function _(t,n,r){var o;o=n.deltaY<0?1:-1,t.scrollHandler&&!1===t.scrollHandler({eventSource:t,pointerType:"mouse",position:g(n,t.element),scroll:o,shift:n.shiftKey,isTouchEvent:!1,originalEvent:r,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(r)}function j(e,t){if(e===t)return!1;for(;t&&t!==e;)t=t.parentNode;return t===e}function k(t,n){I(t,n=e.getEvent(n))}function R(t,n){(n=e.getEvent(n)).currentTarget===n.relatedTarget||j(n.currentTarget,n.relatedTarget)||I(t,n)}function I(t,n){he(t,n,[{id:e.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:m(n),currentTime:e.now()}])}function D(t,n){A(t,n=e.getEvent(n))}function M(t,n){(n=e.getEvent(n)).currentTarget===n.relatedTarget||j(n.currentTarget,n.relatedTarget)||A(t,n)}function A(t,n){fe(t,n,[{id:e.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:m(n),currentTime:e.now()}])}function B(t){return e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<9?1===t?0:2===t?2:4===t?1:-1:t}function N(t,n){me(t,n=e.getEvent(n),[{id:e.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:m(n),currentTime:e.now()}],B(n.button))&&(e.stopEvent(n),p(t,"mouse")),(t.clickHandler||t.dblClickHandler||t.pressHandler||t.dragHandler||t.dragEndHandler)&&e.cancelEvent(n)}function z(e,t){H(e,t)}function L(t,n){H(t,n),e.stopEvent(n)}function H(t,n){ge(t,n=e.getEvent(n),[{id:e.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:m(n),currentTime:e.now()}],B(n.button))&&h(t,"mouse")}function W(e,t){V(e,t)}function F(t,n){V(t,n),e.stopEvent(n)}function V(t,n){ve(t,n=e.getEvent(n),[{id:e.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:m(n),currentTime:e.now()}])}function U(e,t,n){var r,o=n.getLength(),i=[];if("touch"===n.type||n.contacts>0){for(r=0;r<o;r++)i.push(n.getByIndex(r));i.length>0&&(ge(e,t,i,0),n.captureCount=1,h(e,n.type),fe(e,t,i))}}function $(t,n){var r,o,i,a,c=n.changedTouches.length,l=[],u=t.getActivePointersListByType("touch");for(r=e.now(),u.getLength()>n.touches.length-c&&(e.console.warn("Tracked touch contact count doesn't match event.touches.length. Removing all tracked touch pointers."),U(t,n,u)),o=0;o<c;o++)l.push({id:n.changedTouches[o].identifier,type:"touch",currentPos:m(n.changedTouches[o]),currentTime:r});for(he(t,n,l),o=0;o<s.length;o++)if(s[o]!==t&&s[o].isTracking()&&j(s[o].element,t.element)){for(a=[],i=0;i<c;i++)a.push({id:n.changedTouches[i].identifier,type:"touch",currentPos:m(n.changedTouches[i]),currentTime:r});he(s[o],n,a)}me(t,n,l,0)&&(e.stopEvent(n),p(t,"touch",c)),e.cancelEvent(n)}function Z(e,t){q(e,t)}function G(t,n){q(t,n),e.stopEvent(n)}function q(t,n){var r,o,i,a,c=n.changedTouches.length,l=[];for(r=e.now(),o=0;o<c;o++)l.push({id:n.changedTouches[o].identifier,type:"touch",currentPos:m(n.changedTouches[o]),currentTime:r});for(ge(t,n,l,0)&&h(t,"touch",c),fe(t,n,l),o=0;o<s.length;o++)if(s[o]!==t&&s[o].isTracking()&&j(s[o].element,t.element)){for(a=[],i=0;i<c;i++)a.push({id:n.changedTouches[i].identifier,type:"touch",currentPos:m(n.changedTouches[i]),currentTime:r});fe(s[o],n,a)}e.cancelEvent(n)}function X(e,t){K(e,t)}function Y(t,n){K(t,n),e.stopEvent(n)}function K(t,n){var r,o=n.changedTouches.length,i=[];for(r=0;r<o;r++)i.push({id:n.changedTouches[r].identifier,type:"touch",currentPos:m(n.changedTouches[r]),currentTime:e.now()});ve(t,n,i),e.cancelEvent(n)}function J(e,t){var n=e.getActivePointersListByType("touch");U(e,t,n)}function Q(e,t){return t.stopPropagation(),t.preventDefault(),!1}function ee(e,t){return t.stopPropagation(),t.preventDefault(),!1}function te(t,n){n.currentTarget===n.relatedTarget||j(n.currentTarget,n.relatedTarget)||he(t,n,[{id:n.pointerId,type:f(n),isPrimary:n.isPrimary,currentPos:m(n),currentTime:e.now()}])}function ne(t,n){n.currentTarget===n.relatedTarget||j(n.currentTarget,n.relatedTarget)||fe(t,n,[{id:n.pointerId,type:f(n),isPrimary:n.isPrimary,currentPos:m(n),currentTime:e.now()}])}function re(t,n){var r;me(t,n,[r={id:n.pointerId,type:f(n),isPrimary:n.isPrimary,currentPos:m(n),currentTime:e.now()}],n.button)&&(e.stopEvent(n),p(t,r.type)),(t.clickHandler||t.dblClickHandler||t.pressHandler||t.dragHandler||t.dragEndHandler||t.pinchHandler)&&e.cancelEvent(n)}function oe(e,t){ae(e,t)}function ie(t,n){t.getActivePointersListByType(f(n)).getById(n.pointerId)&&ae(t,n),e.stopEvent(n)}function ae(t,n){var r;ge(t,n,[r={id:n.pointerId,type:f(n),isPrimary:n.isPrimary,currentPos:m(n),currentTime:e.now()}],n.button)&&h(t,r.type)}function se(e,t){le(e,t)}function ce(t,n){t.getActivePointersListByType(f(n)).getById(n.pointerId)&&le(t,n),e.stopEvent(n)}function le(t,n){ve(t,n,[{id:n.pointerId,type:f(n),isPrimary:n.isPrimary,currentPos:m(n),currentTime:e.now()}])}function ue(e,t){!function(e,t,n){ge(e,t,n,0),fe(e,t,n)}(e,t,[{id:t.pointerId,type:f(t)}])}function de(e,t){return Object.prototype.hasOwnProperty.call(t,"isPrimary")||(0===e.getLength()?t.isPrimary=!0:t.isPrimary=!1),t.speed=0,t.direction=0,t.contactPos=t.currentPos,t.contactTime=t.currentTime,t.lastPos=t.currentPos,t.lastTime=t.currentTime,e.add(t)}function pe(e,t){var n,r;return e.getById(t.id)?(n=e.removeById(t.id),Object.prototype.hasOwnProperty.call(t,"isPrimary")||(r=e.getPrimary())||(r=e.getByIndex(0))&&(r.isPrimary=!0)):n=e.getLength(),n}function he(t,n,r){var o,i,a,s=t.getActivePointersListByType(r[0].type),c=r.length;for(o=0;o<c;o++)i=r[o],(a=s.getById(i.id))?(a.insideElement=!0,a.lastPos=a.currentPos,a.lastTime=a.currentTime,a.currentPos=i.currentPos,a.currentTime=i.currentTime,i=a):(i.captured=!1,i.insideElementPressed=!1,i.insideElement=!0,de(s,i)),t.enterHandler&&!1===t.enterHandler({eventSource:t,pointerType:i.type,position:v(i.currentPos,t.element),buttons:s.buttons,pointers:t.getActivePointerCount(),insideElementPressed:i.insideElementPressed,buttonDownAny:0!==s.buttons,isTouchEvent:"touch"===i.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(n)}function fe(t,n,r){var o,i,a,s=t.getActivePointersListByType(r[0].type),c=r.length;for(o=0;o<c;o++)i=r[o],(a=s.getById(i.id))&&(a.captured?(a.insideElement=!1,a.lastPos=a.currentPos,a.lastTime=a.currentTime,a.currentPos=i.currentPos,a.currentTime=i.currentTime):pe(s,a),i=a),t.exitHandler&&!1===t.exitHandler({eventSource:t,pointerType:i.type,position:i.currentPos&&v(i.currentPos,t.element),buttons:s.buttons,pointers:t.getActivePointerCount(),insideElementPressed:!!a&&a.insideElementPressed,buttonDownAny:0!==s.buttons,isTouchEvent:"touch"===i.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(n)}function me(t,n,r,o){var i,a,s,l=c[t.hash],u=t.getActivePointersListByType(r[0].type),d=r.length;void 0!==n.buttons?u.buttons=n.buttons:e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<9?0===o?u.buttons+=1:1===o?u.buttons+=4:2===o?u.buttons+=2:3===o?u.buttons+=8:4===o?u.buttons+=16:5===o&&(u.buttons+=32):0===o?u.buttons|=1:1===o?u.buttons|=4:2===o?u.buttons|=2:3===o?u.buttons|=8:4===o?u.buttons|=16:5===o&&(u.buttons|=32);var p=t.getActivePointersListsExceptType(r[0].type);for(i=0;i<p.length;i++)U(t,n,p[i]);if(0!==o)return t.nonPrimaryPressHandler&&!1===t.nonPrimaryPressHandler({eventSource:t,pointerType:r[0].type,position:v(r[0].currentPos,t.element),button:o,buttons:u.buttons,isTouchEvent:"touch"===r[0].type,originalEvent:n,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(n),!1;for(i=0;i<d;i++)a=r[i],(s=u.getById(a.id))?(s.captured=!0,s.insideElementPressed=!0,s.insideElement=!0,s.contactPos=a.currentPos,s.contactTime=a.currentTime,s.lastPos=s.currentPos,s.lastTime=s.currentTime,s.currentPos=a.currentPos,s.currentTime=a.currentTime,a=s):(a.captured=!0,a.insideElementPressed=!0,a.insideElement=!0,de(u,a)),u.addContact(),(t.dragHandler||t.dragEndHandler||t.pinchHandler)&&e.MouseTracker.gesturePointVelocityTracker.addPoint(t,a),1===u.contacts?t.pressHandler&&!1===t.pressHandler({eventSource:t,pointerType:a.type,position:v(a.contactPos,t.element),buttons:u.buttons,isTouchEvent:"touch"===a.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(n):2===u.contacts&&t.pinchHandler&&"touch"===a.type&&(l.pinchGPoints=u.asArray(),l.lastPinchDist=l.currentPinchDist=l.pinchGPoints[0].currentPos.distanceTo(l.pinchGPoints[1].currentPos),l.lastPinchCenter=l.currentPinchCenter=y(l.pinchGPoints[0].currentPos,l.pinchGPoints[1].currentPos));return!0}function ge(t,n,r,o){var i,a,s,l,u,d,p=c[t.hash],h=t.getActivePointersListByType(r[0].type),f=r.length,m=!1,g=!1;if(void 0!==n.buttons?h.buttons=n.buttons:e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<9?0===o?h.buttons-=1:1===o?h.buttons-=4:2===o?h.buttons-=2:3===o?h.buttons-=8:4===o?h.buttons-=16:5===o&&(h.buttons-=32):0===o?h.buttons^=-2:1===o?h.buttons^=-5:2===o?h.buttons^=-3:3===o?h.buttons^=-9:4===o?h.buttons^=-17:5===o&&(h.buttons^=-33),0!==o){t.nonPrimaryReleaseHandler&&!1===t.nonPrimaryReleaseHandler({eventSource:t,pointerType:r[0].type,position:v(r[0].currentPos,t.element),button:o,buttons:h.buttons,isTouchEvent:"touch"===r[0].type,originalEvent:n,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(n);var b=t.getActivePointersListByType("mouse");return U(t,n,b),!1}if(void 0===r[0].currentPos)return U(t,n,h),!1;for(s=0;s<f;s++)l=r[s],(u=h.getById(l.id))&&(u.captured&&(u.captured=!1,m=!0,g=!0),u.lastPos=u.currentPos,u.lastTime=u.currentTime,u.currentPos=l.currentPos,u.currentTime=l.currentTime,u.insideElement||pe(h,u),i=u.currentPos,a=u.currentTime,g?(h.removeContact(),(t.dragHandler||t.dragEndHandler||t.pinchHandler)&&e.MouseTracker.gesturePointVelocityTracker.removePoint(t,u),0===h.contacts?(t.releaseHandler&&!1===t.releaseHandler({eventSource:t,pointerType:u.type,position:v(i,t.element),buttons:h.buttons,insideElementPressed:u.insideElementPressed,insideElementReleased:u.insideElement,isTouchEvent:"touch"===u.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(n),t.dragEndHandler&&!u.currentPos.equals(u.contactPos)&&!1===t.dragEndHandler({eventSource:t,pointerType:u.type,position:v(u.currentPos,t.element),speed:u.speed,direction:u.direction,shift:n.shiftKey,isTouchEvent:"touch"===u.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(n),(t.clickHandler||t.dblClickHandler)&&u.insideElement&&(d=a-u.contactTime<=t.clickTimeThreshold&&u.contactPos.distanceTo(i)<=t.clickDistThreshold,t.clickHandler&&!1===t.clickHandler({eventSource:t,pointerType:u.type,position:v(u.currentPos,t.element),quick:d,shift:n.shiftKey,isTouchEvent:"touch"===u.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(n),t.dblClickHandler&&d&&(h.clicks++,1===h.clicks?(p.lastClickPos=i,p.dblClickTimeOut=setTimeout((function(){h.clicks=0}),t.dblClickTimeThreshold)):2===h.clicks&&(clearTimeout(p.dblClickTimeOut),h.clicks=0,p.lastClickPos.distanceTo(i)<=t.dblClickDistThreshold&&!1===t.dblClickHandler({eventSource:t,pointerType:u.type,position:v(u.currentPos,t.element),shift:n.shiftKey,isTouchEvent:"touch"===u.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(n),p.lastClickPos=null)))):2===h.contacts&&t.pinchHandler&&"touch"===u.type&&(p.pinchGPoints=h.asArray(),p.lastPinchDist=p.currentPinchDist=p.pinchGPoints[0].currentPos.distanceTo(p.pinchGPoints[1].currentPos),p.lastPinchCenter=p.currentPinchCenter=y(p.pinchGPoints[0].currentPos,p.pinchGPoints[1].currentPos))):t.releaseHandler&&!1===t.releaseHandler({eventSource:t,pointerType:u.type,position:v(i,t.element),buttons:h.buttons,insideElementPressed:u.insideElementPressed,insideElementReleased:u.insideElement,isTouchEvent:"touch"===u.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(n));return m}function ve(t,n,r){var o,i,a,s,l,u=c[t.hash],d=t.getActivePointersListByType(r[0].type),p=r.length;for(void 0!==n.buttons&&(d.buttons=n.buttons),o=0;o<p;o++)i=r[o],(a=d.getById(i.id))?(Object.prototype.hasOwnProperty.call(i,"isPrimary")&&(a.isPrimary=i.isPrimary),a.lastPos=a.currentPos,a.lastTime=a.currentTime,a.currentPos=i.currentPos,a.currentTime=i.currentTime):(i.captured=!1,i.insideElementPressed=!1,i.insideElement=!0,de(d,i));t.stopHandler&&"mouse"===r[0].type&&(clearTimeout(t.stopTimeOut),t.stopTimeOut=setTimeout((function(){!function(e,t,n){e.stopHandler&&e.stopHandler({eventSource:e,pointerType:n,position:g(t,e.element),buttons:e.getActivePointersListByType(n).buttons,isTouchEvent:"touch"===n,originalEvent:t,preventDefaultAction:!1,userData:e.userData})}(t,n,r[0].type)}),t.stopDelay)),0===d.contacts?t.moveHandler&&!1===t.moveHandler({eventSource:t,pointerType:r[0].type,position:v(r[0].currentPos,t.element),buttons:d.buttons,isTouchEvent:"touch"===r[0].type,originalEvent:n,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(n):1===d.contacts?(t.moveHandler&&(a=d.asArray()[0],!1===t.moveHandler({eventSource:t,pointerType:a.type,position:v(a.currentPos,t.element),buttons:d.buttons,isTouchEvent:"touch"===a.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(n)),t.dragHandler&&(l=(a=d.asArray()[0]).currentPos.minus(a.lastPos),!1===t.dragHandler({eventSource:t,pointerType:a.type,position:v(a.currentPos,t.element),buttons:d.buttons,delta:l,speed:a.speed,direction:a.direction,shift:n.shiftKey,isTouchEvent:"touch"===a.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(n))):2===d.contacts&&(t.moveHandler&&(s=d.asArray(),!1===t.moveHandler({eventSource:t,pointerType:s[0].type,position:v(y(s[0].currentPos,s[1].currentPos),t.element),buttons:d.buttons,isTouchEvent:"touch"===s[0].type,originalEvent:n,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(n)),t.pinchHandler&&"touch"===r[0].type&&(l=u.pinchGPoints[0].currentPos.distanceTo(u.pinchGPoints[1].currentPos))!=u.currentPinchDist&&(u.lastPinchDist=u.currentPinchDist,u.currentPinchDist=l,u.lastPinchCenter=u.currentPinchCenter,u.currentPinchCenter=y(u.pinchGPoints[0].currentPos,u.pinchGPoints[1].currentPos),!1===t.pinchHandler({eventSource:t,pointerType:"touch",gesturePoints:u.pinchGPoints,lastCenter:v(u.lastPinchCenter,t.element),center:v(u.currentPinchCenter,t.element),lastDistance:u.lastPinchDist,distance:u.currentPinchDist,shift:n.shiftKey,originalEvent:n,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(n)))}e.MouseTracker=function(t){s.push(this);var n=arguments;e.isPlainObject(t)||(t={element:n[0],clickTimeThreshold:n[1],clickDistThreshold:n[2]}),this.hash=Math.random(),this.element=e.getElement(t.element),this.clickTimeThreshold=t.clickTimeThreshold||e.DEFAULT_SETTINGS.clickTimeThreshold,this.clickDistThreshold=t.clickDistThreshold||e.DEFAULT_SETTINGS.clickDistThreshold,this.dblClickTimeThreshold=t.dblClickTimeThreshold||e.DEFAULT_SETTINGS.dblClickTimeThreshold,this.dblClickDistThreshold=t.dblClickDistThreshold||e.DEFAULT_SETTINGS.dblClickDistThreshold,this.userData=t.userData||null,this.stopDelay=t.stopDelay||50,this.enterHandler=t.enterHandler||null,this.exitHandler=t.exitHandler||null,this.pressHandler=t.pressHandler||null,this.nonPrimaryPressHandler=t.nonPrimaryPressHandler||null,this.releaseHandler=t.releaseHandler||null,this.nonPrimaryReleaseHandler=t.nonPrimaryReleaseHandler||null,this.moveHandler=t.moveHandler||null,this.scrollHandler=t.scrollHandler||null,this.clickHandler=t.clickHandler||null,this.dblClickHandler=t.dblClickHandler||null,this.dragHandler=t.dragHandler||null,this.dragEndHandler=t.dragEndHandler||null,this.pinchHandler=t.pinchHandler||null,this.stopHandler=t.stopHandler||null,this.keyDownHandler=t.keyDownHandler||null,this.keyUpHandler=t.keyUpHandler||null,this.keyHandler=t.keyHandler||null,this.focusHandler=t.focusHandler||null,this.blurHandler=t.blurHandler||null;var r=this;c[this.hash]={click:function(e){b(r,e)},dblclick:function(e){w(r,e)},keydown:function(e){O(r,e)},keyup:function(e){E(r,e)},keypress:function(e){x(r,e)},focus:function(e){T(r,e)},blur:function(e){S(r,e)},wheel:function(e){P(r,e)},mousewheel:function(e){C(r,e)},DOMMouseScroll:function(e){C(r,e)},MozMousePixelScroll:function(e){C(r,e)},mouseenter:function(e){k(r,e)},mouseleave:function(e){D(r,e)},mouseover:function(e){R(r,e)},mouseout:function(e){M(r,e)},mousedown:function(e){N(r,e)},mouseup:function(e){z(r,e)},mouseupcaptured:function(e){L(r,e)},mousemove:function(e){W(r,e)},mousemovecaptured:function(e){F(r,e)},touchstart:function(e){$(r,e)},touchend:function(e){Z(r,e)},touchendcaptured:function(e){G(r,e)},touchmove:function(e){X(r,e)},touchmovecaptured:function(e){Y(r,e)},touchcancel:function(e){J(r,e)},gesturestart:function(e){Q(r,e)},gesturechange:function(e){ee(r,e)},pointerover:function(e){te(r,e)},MSPointerOver:function(e){te(r,e)},pointerout:function(e){ne(r,e)},MSPointerOut:function(e){ne(r,e)},pointerdown:function(e){re(r,e)},MSPointerDown:function(e){re(r,e)},pointerup:function(e){oe(r,e)},MSPointerUp:function(e){oe(r,e)},pointermove:function(e){se(r,e)},MSPointerMove:function(e){se(r,e)},pointercancel:function(e){ue(r,e)},MSPointerCancel:function(e){ue(r,e)},pointerupcaptured:function(e){ie(r,e)},pointermovecaptured:function(e){ce(r,e)},tracking:!1,activePointersLists:[],lastClickPos:null,dblClickTimeOut:null,pinchGPoints:[],lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null},t.startDisabled||this.setTracking(!0)},e.MouseTracker.prototype={destroy:function(){var e;for(u(this),this.element=null,e=0;e<s.length;e++)if(s[e]===this){s.splice(e,1);break}c[this.hash]=null,delete c[this.hash]},isTracking:function(){return c[this.hash].tracking},setTracking:function(t){return t?function(t){var n,r,o=c[t.hash];if(!o.tracking){for(r=0;r<e.MouseTracker.subscribeEvents.length;r++)n=e.MouseTracker.subscribeEvents[r],e.addEvent(t.element,n,o[n],!1);l(t),o.tracking=!0}}(this):u(this),this},getActivePointersListsExceptType:function(e){for(var t=c[this.hash],n=[],r=0;r<t.activePointersLists.length;++r)t.activePointersLists[r].type!==e&&n.push(t.activePointersLists[r]);return n},getActivePointersListByType:function(t){var n,r,o=c[this.hash],i=o.activePointersLists.length;for(n=0;n<i;n++)if(o.activePointersLists[n].type===t)return o.activePointersLists[n];return r=new e.MouseTracker.GesturePointList(t),o.activePointersLists.push(r),r},getActivePointerCount:function(){var e,t=c[this.hash],n=t.activePointersLists.length,r=0;for(e=0;e<n;e++)r+=t.activePointersLists[e].getLength();return r},enterHandler:function(){},exitHandler:function(){},pressHandler:function(){},nonPrimaryPressHandler:function(){},releaseHandler:function(){},nonPrimaryReleaseHandler:function(){},moveHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dblClickHandler:function(){},dragHandler:function(){},dragEndHandler:function(){},pinchHandler:function(){},stopHandler:function(){},keyDownHandler:function(){},keyUpHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}},e.MouseTracker.resetAllMouseTrackers=function(){for(var e=0;e<s.length;e++)s[e].isTracking()&&(s[e].setTracking(!1),s[e].setTracking(!0))},e.MouseTracker.gesturePointVelocityTracker=(t=[],n=0,r=0,o=function(e,t){return e.hash.toString()+t.type+t.id.toString()},i=function(){var n,o,i,a,s,c,l=t.length,u=e.now();for(a=u-r,r=u,n=0;n<l;n++)(i=(o=t[n]).gPoint).direction=Math.atan2(i.currentPos.y-o.lastPos.y,i.currentPos.x-o.lastPos.x),s=o.lastPos.distanceTo(i.currentPos),o.lastPos=i.currentPos,c=1e3*s/(a+1),i.speed=.75*c+.25*i.speed},{addPoint:function(a,s){var c=o(a,s);t.push({guid:c,gPoint:s,lastPos:s.currentPos}),1===t.length&&(r=e.now(),n=window.setInterval(i,50))},removePoint:function(e,r){var i,a=o(e,r),s=t.length;for(i=0;i<s;i++)if(t[i].guid===a){t.splice(i,1),0==--s&&window.clearInterval(n);break}}}),e.MouseTracker.captureElement=document,e.MouseTracker.wheelEventName=e.Browser.vendor==e.BROWSERS.IE&&e.Browser.version>8||"onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",e.MouseTracker.supportsMouseCapture=(a=document.createElement("div"),e.isFunction(a.setCapture)&&e.isFunction(a.releaseCapture)),e.MouseTracker.subscribeEvents=["click","dblclick","keydown","keyup","keypress","focus","blur",e.MouseTracker.wheelEventName],"DOMMouseScroll"==e.MouseTracker.wheelEventName&&e.MouseTracker.subscribeEvents.push("MozMousePixelScroll"),window.PointerEvent&&(window.navigator.pointerEnabled||e.Browser.vendor!==e.BROWSERS.IE)?(e.MouseTracker.havePointerEvents=!0,e.MouseTracker.subscribeEvents.push("pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel"),e.MouseTracker.unprefixedPointerEvents=!0,navigator.maxTouchPoints?e.MouseTracker.maxTouchPoints=navigator.maxTouchPoints:e.MouseTracker.maxTouchPoints=0,e.MouseTracker.haveMouseEnter=!1):window.MSPointerEvent&&window.navigator.msPointerEnabled?(e.MouseTracker.havePointerEvents=!0,e.MouseTracker.subscribeEvents.push("MSPointerOver","MSPointerOut","MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"),e.MouseTracker.unprefixedPointerEvents=!1,navigator.msMaxTouchPoints?e.MouseTracker.maxTouchPoints=navigator.msMaxTouchPoints:e.MouseTracker.maxTouchPoints=0,e.MouseTracker.haveMouseEnter=!1):(e.MouseTracker.havePointerEvents=!1,e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<9?(e.MouseTracker.subscribeEvents.push("mouseenter","mouseleave"),e.MouseTracker.haveMouseEnter=!0):(e.MouseTracker.subscribeEvents.push("mouseover","mouseout"),e.MouseTracker.haveMouseEnter=!1),e.MouseTracker.subscribeEvents.push("mousedown","mouseup","mousemove"),"ontouchstart"in window&&e.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel"),"ongesturestart"in window&&e.MouseTracker.subscribeEvents.push("gesturestart","gesturechange"),e.MouseTracker.mousePointerId="legacy-mouse",e.MouseTracker.maxTouchPoints=10),e.MouseTracker.GesturePointList=function(e){this._gPoints=[],this.type=e,this.buttons=0,this.contacts=0,this.clicks=0,this.captureCount=0},e.MouseTracker.GesturePointList.prototype={getLength:function(){return this._gPoints.length},asArray:function(){return this._gPoints},add:function(e){return this._gPoints.push(e)},removeById:function(e){var t,n=this._gPoints.length;for(t=0;t<n;t++)if(this._gPoints[t].id===e){this._gPoints.splice(t,1);break}return this._gPoints.length},getByIndex:function(e){return e<this._gPoints.length?this._gPoints[e]:null},getById:function(e){var t,n=this._gPoints.length;for(t=0;t<n;t++)if(this._gPoints[t].id===e)return this._gPoints[t];return null},getPrimary:function(e){var t,n=this._gPoints.length;for(t=0;t<n;t++)if(this._gPoints[t].isPrimary)return this._gPoints[t];return null},addContact:function(){++this.contacts,this.contacts>1&&("mouse"===this.type||"pen"===this.type)&&(this.contacts=1)},removeContact:function(){--this.contacts,this.contacts<0&&(this.contacts=0)}};var ye=function(){try{return window.self!==window.top}catch(e){return!0}}();function be(e){try{return e.addEventListener&&e.removeEventListener}catch(e){return!1}}}(OpenSeadragon),function(e){e.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5},e.Control=function(t,n,r){var o=t.parentNode;"number"==typeof n&&(e.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),n={anchor:n}),n.attachToViewer=void 0===n.attachToViewer||n.attachToViewer,this.autoFade=void 0===n.autoFade||n.autoFade,this.element=t,this.anchor=n.anchor,this.container=r,this.anchor==e.ControlAnchor.ABSOLUTE?(this.wrapper=e.makeNeutralElement("div"),this.wrapper.style.position="absolute",this.wrapper.style.top="number"==typeof n.top?n.top+"px":n.top,this.wrapper.style.left="number"==typeof n.left?n.left+"px":n.left,this.wrapper.style.height="number"==typeof n.height?n.height+"px":n.height,this.wrapper.style.width="number"==typeof n.width?n.width+"px":n.width,this.wrapper.style.margin="0px",this.wrapper.style.padding="0px",this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.height="100%",this.element.style.width="100%"):(this.wrapper=e.makeNeutralElement("div"),this.wrapper.style.display="inline-block",this.anchor==e.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%")),this.wrapper.appendChild(this.element),n.attachToViewer?this.anchor==e.ControlAnchor.TOP_RIGHT||this.anchor==e.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):o.appendChild(this.wrapper)},e.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.container.removeChild(this.wrapper)},isVisible:function(){return"none"!=this.wrapper.style.display},setVisible:function(t){this.wrapper.style.display=t?this.anchor==e.ControlAnchor.ABSOLUTE?"block":"inline-block":"none"},setOpacity:function(t){this.element[e.SIGNAL]&&e.Browser.vendor==e.BROWSERS.IE?e.setElementOpacity(this.element,t,!0):e.setElementOpacity(this.wrapper,t,!0)}}}(OpenSeadragon),function(e){function t(e,t){var n,r=e.controls;for(n=r.length-1;n>=0;n--)if(r[n].element==t)return n;return-1}e.ControlDock=function(t){var n,r,o=["topleft","topright","bottomright","bottomleft"];for(e.extend(!0,this,{id:"controldock-"+e.now()+"-"+Math.floor(1e6*Math.random()),container:e.makeNeutralElement("div"),controls:[]},t),this.container.onsubmit=function(){return!1},this.element&&(this.element=e.getElement(this.element),this.element.appendChild(this.container),this.element.style.position="relative",this.container.style.width="100%",this.container.style.height="100%"),r=0;r<o.length;r++)n=o[r],this.controls[n]=e.makeNeutralElement("div"),this.controls[n].style.position="absolute",n.match("left")&&(this.controls[n].style.left="0px"),n.match("right")&&(this.controls[n].style.right="0px"),n.match("top")&&(this.controls[n].style.top="0px"),n.match("bottom")&&(this.controls[n].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},e.ControlDock.prototype={addControl:function(n,r){var o=null;if(!(t(this,n=e.getElement(n))>=0)){switch(r.anchor){case e.ControlAnchor.TOP_RIGHT:o=this.controls.topright,n.style.position="relative",n.style.paddingRight="0px",n.style.paddingTop="0px";break;case e.ControlAnchor.BOTTOM_RIGHT:o=this.controls.bottomright,n.style.position="relative",n.style.paddingRight="0px",n.style.paddingBottom="0px";break;case e.ControlAnchor.BOTTOM_LEFT:o=this.controls.bottomleft,n.style.position="relative",n.style.paddingLeft="0px",n.style.paddingBottom="0px";break;case e.ControlAnchor.TOP_LEFT:o=this.controls.topleft,n.style.position="relative",n.style.paddingLeft="0px",n.style.paddingTop="0px";break;case e.ControlAnchor.ABSOLUTE:o=this.container,n.style.margin="0px",n.style.padding="0px";break;default:case e.ControlAnchor.NONE:o=this.container,n.style.margin="0px",n.style.padding="0px"}this.controls.push(new e.Control(n,r,o)),n.style.display="inline-block"}},removeControl:function(n){var r=t(this,n=e.getElement(n));return r>=0&&(this.controls[r].destroy(),this.controls.splice(r,1)),this},clearControls:function(){for(;this.controls.length>0;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var e;for(e=this.controls.length-1;e>=0;e--)if(this.controls[e].isVisible())return!0;return!1},setControlsEnabled:function(e){var t;for(t=this.controls.length-1;t>=0;t--)this.controls[t].setVisible(e);return this}}}(OpenSeadragon),function(e){e.Placement=e.freezeObject({CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8,properties:{0:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1},1:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},2:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},3:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!0,isVerticallyCentered:!1,isBottom:!1},4:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!0,isBottom:!1},5:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!1,isBottom:!0},6:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},7:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},8:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1}}})}(OpenSeadragon),function(e){var t={},n=1;function r(t){return t=e.getElement(t),new e.Point(0===t.clientWidth?1:t.clientWidth,0===t.clientHeight?1:t.clientHeight)}function o(t,n){if(n instanceof e.Overlay)return n;var r=null;if(n.element)r=e.getElement(n.element);else{var o=n.id?n.id:"openseadragon-overlay-"+Math.floor(1e7*Math.random());(r=e.getElement(n.id))||((r=document.createElement("a")).href="#/overlay/"+o),r.id=o,e.addClass(r,n.className?n.className:"openseadragon-overlay")}var i=n.location,a=n.width,s=n.height;if(!i){var c=n.x,l=n.y;if(void 0!==n.px){var u=t.viewport.imageToViewportRectangle(new e.Rect(n.px,n.py,a||0,s||0));c=u.x,l=u.y,a=void 0!==a?u.width:void 0,s=void 0!==s?u.height:void 0}i=new e.Point(c,l)}var d=n.placement;return d&&"string"===e.type(d)&&(d=e.Placement[n.placement.toUpperCase()]),new e.Overlay({element:r,location:i,placement:d,onDraw:n.onDraw,checkResize:n.checkResize,width:a,height:s,rotationMode:n.rotationMode})}function i(e,t){var n;for(n=e.length-1;n>=0;n--)if(e[n].element===t)return n;return-1}function a(t,n){return e.requestAnimationFrame((function(){n(t)}))}function s(t){e.requestAnimationFrame((function(){!function(t){var n,r,o,i;if(t.controlsShouldFade){for(n=e.now(),r=n-t.controlsFadeBeginTime,o=1-r/t.controlsFadeLength,o=Math.min(1,o),o=Math.max(0,o),i=t.controls.length-1;i>=0;i--)t.controls[i].autoFade&&t.controls[i].setOpacity(o);o>0&&s(t)}}(t)}))}function c(t){t.autoHideControls&&(t.controlsShouldFade=!0,t.controlsFadeBeginTime=e.now()+t.controlsFadeDelay,window.setTimeout((function(){s(t)}),t.controlsFadeDelay))}function l(e){var t;for(e.controlsShouldFade=!1,t=e.controls.length-1;t>=0;t--)e.controls[t].setOpacity(1)}function u(){l(this)}function d(){c(this)}function p(t){var n={originalEvent:t.originalEvent,preventDefaultAction:t.preventDefaultAction,preventVerticalPan:t.preventVerticalPan,preventHorizontalPan:t.preventHorizontalPan};if(this.raiseEvent("canvas-key",n),n.preventDefaultAction||t.ctrl||t.alt||t.meta)return!0;switch(t.keyCode){case 38:return n.preventVerticalPan||(t.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,-this.pixelsPerArrowPress))),this.viewport.applyConstraints()),!1;case 40:return n.preventVerticalPan||(t.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,this.pixelsPerArrowPress))),this.viewport.applyConstraints()),!1;case 37:return n.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(-this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),!1;case 39:return n.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),!1;default:return!0}}function h(t){var n={originalEvent:t.originalEvent,preventDefaultAction:t.preventDefaultAction,preventVerticalPan:t.preventVerticalPan,preventHorizontalPan:t.preventHorizontalPan};if(this.raiseEvent("canvas-key",n),n.preventDefaultAction||t.ctrl||t.alt||t.meta)return!0;switch(t.keyCode){case 43:case 61:return this.viewport.zoomBy(1.1),this.viewport.applyConstraints(),!1;case 45:return this.viewport.zoomBy(.9),this.viewport.applyConstraints(),!1;case 48:return this.viewport.goHome(),this.viewport.applyConstraints(),!1;case 119:case 87:return n.preventVerticalPan||(t.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,-40))),this.viewport.applyConstraints()),!1;case 115:case 83:return n.preventVerticalPan||(t.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,40))),this.viewport.applyConstraints()),!1;case 97:return n.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(-40,0))),this.viewport.applyConstraints()),!1;case 100:return n.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(40,0))),this.viewport.applyConstraints()),!1;case 114:return this.viewport.flipped?this.viewport.setRotation(e.positiveModulo(this.viewport.degrees-this.rotationIncrement,360)):this.viewport.setRotation(e.positiveModulo(this.viewport.degrees+this.rotationIncrement,360)),this.viewport.applyConstraints(),!1;case 82:return this.viewport.flipped?this.viewport.setRotation(e.positiveModulo(this.viewport.degrees+this.rotationIncrement,360)):this.viewport.setRotation(e.positiveModulo(this.viewport.degrees-this.rotationIncrement,360)),this.viewport.applyConstraints(),!1;case 102:return this.viewport.toggleFlip(),!1;default:return!0}}function f(e){var t;document.activeElement==this.canvas||this.canvas.focus(),this.viewport.flipped&&(e.position.x=this.viewport.getContainerSize().x-e.position.x);var n={tracker:e.eventSource,position:e.position,quick:e.quick,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:e.preventDefaultAction};this.raiseEvent("canvas-click",n),!n.preventDefaultAction&&this.viewport&&e.quick&&(t=this.gestureSettingsByDeviceType(e.pointerType)).clickToZoom&&(this.viewport.zoomBy(e.shift?1/this.zoomPerClick:this.zoomPerClick,t.zoomToRefPoint?this.viewport.pointFromPixel(e.position,!0):null),this.viewport.applyConstraints())}function m(e){var t,n={tracker:e.eventSource,position:e.position,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:e.preventDefaultAction};this.raiseEvent("canvas-double-click",n),!n.preventDefaultAction&&this.viewport&&(t=this.gestureSettingsByDeviceType(e.pointerType)).dblClickToZoom&&(this.viewport.zoomBy(e.shift?1/this.zoomPerClick:this.zoomPerClick,t.zoomToRefPoint?this.viewport.pointFromPixel(e.position,!0):null),this.viewport.applyConstraints())}function g(e){var t,n={tracker:e.eventSource,position:e.position,delta:e.delta,speed:e.speed,direction:e.direction,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:e.preventDefaultAction};if(this.raiseEvent("canvas-drag",n),!n.preventDefaultAction&&this.viewport){if(t=this.gestureSettingsByDeviceType(e.pointerType),this.panHorizontal||(e.delta.x=0),this.panVertical||(e.delta.y=0),this.viewport.flipped&&(e.delta.x=-e.delta.x),this.constrainDuringPan){var r=this.viewport.deltaPointsFromPixels(e.delta.negate());this.viewport.centerSpringX.target.value+=r.x,this.viewport.centerSpringY.target.value+=r.y;var o=this.viewport.getBounds(),i=this.viewport.getConstrainedBounds();this.viewport.centerSpringX.target.value-=r.x,this.viewport.centerSpringY.target.value-=r.y,o.x!=i.x&&(e.delta.x=0),o.y!=i.y&&(e.delta.y=0)}this.viewport.panBy(this.viewport.deltaPointsFromPixels(e.delta.negate()),t.flickEnabled&&!this.constrainDuringPan)}}function v(t){if(!t.preventDefaultAction&&this.viewport){var n=this.gestureSettingsByDeviceType(t.pointerType);if(n.flickEnabled&&t.speed>=n.flickMinSpeed){var r=0;this.panHorizontal&&(r=n.flickMomentum*t.speed*Math.cos(t.direction));var o=0;this.panVertical&&(o=n.flickMomentum*t.speed*Math.sin(t.direction));var i=this.viewport.pixelFromPoint(this.viewport.getCenter(!0)),a=this.viewport.pointFromPixel(new e.Point(i.x-r,i.y-o));this.viewport.panTo(a,!1)}this.viewport.applyConstraints()}this.raiseEvent("canvas-drag-end",{tracker:t.eventSource,position:t.position,speed:t.speed,direction:t.direction,shift:t.shift,originalEvent:t.originalEvent})}function y(e){this.raiseEvent("canvas-enter",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function b(t){window.location!=window.parent.location&&e.MouseTracker.resetAllMouseTrackers(),this.raiseEvent("canvas-exit",{tracker:t.eventSource,pointerType:t.pointerType,position:t.position,buttons:t.buttons,pointers:t.pointers,insideElementPressed:t.insideElementPressed,buttonDownAny:t.buttonDownAny,originalEvent:t.originalEvent})}function w(e){this.raiseEvent("canvas-press",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,insideElementPressed:e.insideElementPressed,insideElementReleased:e.insideElementReleased,originalEvent:e.originalEvent})}function O(e){this.raiseEvent("canvas-release",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,insideElementPressed:e.insideElementPressed,insideElementReleased:e.insideElementReleased,originalEvent:e.originalEvent})}function E(e){this.raiseEvent("canvas-nonprimary-press",{tracker:e.eventSource,position:e.position,pointerType:e.pointerType,button:e.button,buttons:e.buttons,originalEvent:e.originalEvent})}function x(e){this.raiseEvent("canvas-nonprimary-release",{tracker:e.eventSource,position:e.position,pointerType:e.pointerType,button:e.button,buttons:e.buttons,originalEvent:e.originalEvent})}function T(e){var t,n,r;if(!e.preventDefaultAction&&this.viewport&&((t=this.gestureSettingsByDeviceType(e.pointerType)).pinchToZoom&&(n=this.viewport.pointFromPixel(e.center,!0),r=this.viewport.pointFromPixel(e.lastCenter,!0).minus(n),this.panHorizontal||(r.x=0),this.panVertical||(r.y=0),this.viewport.zoomBy(e.distance/e.lastDistance,n,!0),t.zoomToRefPoint&&this.viewport.panBy(r,!0),this.viewport.applyConstraints()),t.pinchRotate)){var o=Math.atan2(e.gesturePoints[0].currentPos.y-e.gesturePoints[1].currentPos.y,e.gesturePoints[0].currentPos.x-e.gesturePoints[1].currentPos.x),i=Math.atan2(e.gesturePoints[0].lastPos.y-e.gesturePoints[1].lastPos.y,e.gesturePoints[0].lastPos.x-e.gesturePoints[1].lastPos.x);this.viewport.setRotation(this.viewport.getRotation()+(o-i)*(180/Math.PI))}return this.raiseEvent("canvas-pinch",{tracker:e.eventSource,gesturePoints:e.gesturePoints,lastCenter:e.lastCenter,center:e.center,lastDistance:e.lastDistance,distance:e.distance,shift:e.shift,originalEvent:e.originalEvent}),!1}function S(t){var n,r,o;if((o=e.now())-this._lastScrollTime>this.minScrollDeltaTime){if(this._lastScrollTime=o,this.viewport.flipped&&(t.position.x=this.viewport.getContainerSize().x-t.position.x),!t.preventDefaultAction&&this.viewport&&(n=this.gestureSettingsByDeviceType(t.pointerType)).scrollToZoom&&(r=Math.pow(this.zoomPerScroll,t.scroll),this.viewport.zoomBy(r,n.zoomToRefPoint?this.viewport.pointFromPixel(t.position,!0):null),this.viewport.applyConstraints()),this.raiseEvent("canvas-scroll",{tracker:t.eventSource,position:t.position,scroll:t.scroll,shift:t.shift,originalEvent:t.originalEvent}),n&&n.scrollToZoom)return!1}else if((n=this.gestureSettingsByDeviceType(t.pointerType))&&n.scrollToZoom)return!1}function P(e){t[this.hash].mouseInside=!0,l(this),this.raiseEvent("container-enter",{tracker:e.eventSource,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function C(e){e.pointers<1&&(t[this.hash].mouseInside=!1,t[this.hash].animating||c(this)),this.raiseEvent("container-exit",{tracker:e.eventSource,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function _(e){!function(e){if(e._opening)return;if(e.autoResize){var n=r(e.container),o=t[e.hash].prevContainerSize;if(!n.equals(o)){var i=e.viewport;if(e.preserveImageSizeOnResize){var a=o.x/n.x,s=i.getZoom()*a,u=i.getCenter();i.resize(n,!1),i.zoomTo(s,null,!0),i.panTo(u,!0)}else{var d=i.getBounds();i.resize(n,!0),i.fitBoundsWithConstraints(d,!0)}t[e.hash].prevContainerSize=n,t[e.hash].forceRedraw=!0}}var p=e.viewport.update(),h=e.world.update()||p;p&&e.raiseEvent("viewport-change");e.referenceStrip&&(h=e.referenceStrip.update(e.viewport)||h);!t[e.hash].animating&&h&&(e.raiseEvent("animation-start"),l(e));(h||t[e.hash].forceRedraw||e.world.needsDraw())&&(!function(e){e.imageLoader.clear(),e.drawer.clear(),e.world.draw(),e.raiseEvent("update-viewport",{})}(e),e._drawOverlays(),e.navigator&&e.navigator.update(e.viewport),t[e.hash].forceRedraw=!1,h&&e.raiseEvent("animation"));t[e.hash].animating&&!h&&(e.raiseEvent("animation-finish"),t[e.hash].mouseInside||c(e));t[e.hash].animating=h}(e),e.isOpen()?e._updateRequestId=a(e,_):e._updateRequestId=!1}function j(e,t){return e?e+t:t}function k(){t[this.hash].lastZoomTime=e.now(),t[this.hash].zoomFactor=this.zoomPerSecond,t[this.hash].zooming=!0,D(this)}function R(){t[this.hash].lastZoomTime=e.now(),t[this.hash].zoomFactor=1/this.zoomPerSecond,t[this.hash].zooming=!0,D(this)}function I(){t[this.hash].zooming=!1}function D(t){e.requestAnimationFrame(e.delegate(t,M))}function M(){var n,r,o;t[this.hash].zooming&&this.viewport&&(r=(n=e.now())-t[this.hash].lastZoomTime,o=Math.pow(t[this.hash].zoomFactor,r/1e3),this.viewport.zoomBy(o),this.viewport.applyConstraints(),t[this.hash].lastZoomTime=n,D(this))}function A(){this.viewport&&(t[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function B(){this.viewport&&(t[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function N(){this.buttons.emulateEnter(),this.buttons.emulateExit()}function z(){this.viewport&&this.viewport.goHome()}function L(){this.isFullPage()&&!e.isFullScreen()?this.setFullPage(!1):this.setFullScreen(!this.isFullPage()),this.buttons&&this.buttons.emulateExit(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function H(){if(this.viewport){var t=this.viewport.getRotation();t=this.viewport.flipped?e.positiveModulo(t+this.rotationIncrement,360):e.positiveModulo(t-this.rotationIncrement,360),this.viewport.setRotation(t)}}function W(){if(this.viewport){var t=this.viewport.getRotation();t=this.viewport.flipped?e.positiveModulo(t-this.rotationIncrement,360):e.positiveModulo(t+this.rotationIncrement,360),this.viewport.setRotation(t)}}function F(){this.viewport.toggleFlip()}function V(){var e=this._sequenceIndex-1;this.navPrevNextWrap&&e<0&&(e+=this.tileSources.length),this.goToPage(e)}function U(){var e=this._sequenceIndex+1;this.navPrevNextWrap&&e>=this.tileSources.length&&(e=0),this.goToPage(e)}e.Viewer=function(o){var i,s,l=arguments,u=this;if(e.isPlainObject(o)||(o={id:l[0],xmlPath:l.length>1?l[1]:void 0,prefixUrl:l.length>2?l[2]:void 0,controls:l.length>3?l[3]:void 0,overlays:l.length>4?l[4]:void 0}),o.config&&(e.extend(!0,o,o.config),delete o.config),e.extend(!0,this,{id:o.id,hash:o.hash||n++,initialPage:0,element:null,container:null,canvas:null,overlays:[],overlaysContainer:null,previousBody:[],customControls:[],source:null,drawer:null,world:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttons:null,profiler:null},e.DEFAULT_SETTINGS,o),void 0===this.hash)throw new Error("A hash must be defined, either by specifying options.id or options.hash.");for(void 0!==t[this.hash]&&e.console.warn("Hash "+this.hash+" has already been used."),t[this.hash]={fsBoundsDelta:new e.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,fullPage:!1,onfullscreenchange:null},this._sequenceIndex=0,this._firstOpen=!0,this._updateRequestId=null,this._loadQueue=[],this.currentOverlays=[],this._lastScrollTime=e.now(),e.EventSource.call(this),this.addHandler("open-failed",(function(t){var n=e.getString("Errors.OpenFailed",t.eventSource,t.message);u._showMessage(n)})),e.ControlDock.call(this,o),this.xmlPath&&(this.tileSources=[this.xmlPath]),this.element=this.element||document.getElementById(this.id),this.canvas=e.makeNeutralElement("div"),this.canvas.className="openseadragon-canvas",(s=this.canvas.style).width="100%",s.height="100%",s.overflow="hidden",s.position="absolute",s.top="0px",s.left="0px",e.setElementTouchActionNone(this.canvas),""!==o.tabIndex&&(this.canvas.tabIndex=void 0===o.tabIndex?0:o.tabIndex),this.container.className="openseadragon-container",function(e){e.width="100%",e.height="100%",e.position="relative",e.overflow="hidden",e.left="0px",e.top="0px",e.textAlign="left"}(this.container.style),this.container.insertBefore(this.canvas,this.container.firstChild),this.element.appendChild(this.container),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.innerTracker=new e.MouseTracker({element:this.canvas,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,keyDownHandler:e.delegate(this,p),keyHandler:e.delegate(this,h),clickHandler:e.delegate(this,f),dblClickHandler:e.delegate(this,m),dragHandler:e.delegate(this,g),dragEndHandler:e.delegate(this,v),enterHandler:e.delegate(this,y),exitHandler:e.delegate(this,b),pressHandler:e.delegate(this,w),releaseHandler:e.delegate(this,O),nonPrimaryPressHandler:e.delegate(this,E),nonPrimaryReleaseHandler:e.delegate(this,x),scrollHandler:e.delegate(this,S),pinchHandler:e.delegate(this,T)}),this.outerTracker=new e.MouseTracker({element:this.container,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:e.delegate(this,P),exitHandler:e.delegate(this,C)}),this.toolbar&&(this.toolbar=new e.ControlDock({element:this.toolbar})),this.bindStandardControls(),t[this.hash].prevContainerSize=r(this.container),this.world=new e.World({viewer:this}),this.world.addHandler("add-item",(function(e){u.source=u.world.getItemAt(0).source,t[u.hash].forceRedraw=!0,u._updateRequestId||(u._updateRequestId=a(u,_))})),this.world.addHandler("remove-item",(function(e){u.world.getItemCount()?u.source=u.world.getItemAt(0).source:u.source=null,t[u.hash].forceRedraw=!0})),this.world.addHandler("metrics-change",(function(e){u.viewport&&u.viewport._setContentBounds(u.world.getHomeBounds(),u.world.getContentFactor())})),this.world.addHandler("item-index-change",(function(e){u.source=u.world.getItemAt(0).source})),this.viewport=new e.Viewport({containerSize:t[this.hash].prevContainerSize,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,visibilityRatio:this.visibilityRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,defaultZoomLevel:this.defaultZoomLevel,minZoomLevel:this.minZoomLevel,maxZoomLevel:this.maxZoomLevel,viewer:this,degrees:this.degrees,flipped:this.flipped,navigatorRotate:this.navigatorRotate,homeFillsViewer:this.homeFillsViewer,margins:this.viewportMargins}),this.viewport._setContentBounds(this.world.getHomeBounds(),this.world.getContentFactor()),this.imageLoader=new e.ImageLoader({jobLimit:this.imageLoaderLimit,timeout:o.timeout}),this.tileCache=new e.TileCache({maxImageCacheCount:this.maxImageCacheCount}),this.drawer=new e.Drawer({viewer:this,viewport:this.viewport,element:this.canvas,debugGridColor:this.debugGridColor}),this.overlaysContainer=e.makeNeutralElement("div"),this.canvas.appendChild(this.overlaysContainer),this.drawer.canRotate()||(this.rotateLeft&&(i=this.buttons.buttons.indexOf(this.rotateLeft),this.buttons.buttons.splice(i,1),this.buttons.element.removeChild(this.rotateLeft.element)),this.rotateRight&&(i=this.buttons.buttons.indexOf(this.rotateRight),this.buttons.buttons.splice(i,1),this.buttons.element.removeChild(this.rotateRight.element))),this.showNavigator&&(this.navigator=new e.Navigator({id:this.navigatorId,position:this.navigatorPosition,sizeRatio:this.navigatorSizeRatio,maintainSizeRatio:this.navigatorMaintainSizeRatio,top:this.navigatorTop,left:this.navigatorLeft,width:this.navigatorWidth,height:this.navigatorHeight,autoResize:this.navigatorAutoResize,autoFade:this.navigatorAutoFade,prefixUrl:this.prefixUrl,viewer:this,navigatorRotate:this.navigatorRotate,background:this.navigatorBackground,opacity:this.navigatorOpacity,borderColor:this.navigatorBorderColor,displayRegionColor:this.navigatorDisplayRegionColor,crossOriginPolicy:this.crossOriginPolicy})),this.sequenceMode&&this.bindSequenceControls(),this.tileSources&&this.open(this.tileSources),i=0;i<this.customControls.length;i++)this.addControl(this.customControls[i].id,{anchor:this.customControls[i].anchor});e.requestAnimationFrame((function(){c(u)})),void 0===this.imageSmoothingEnabled||this.imageSmoothingEnabled||this.drawer.setImageSmoothingEnabled(this.imageSmoothingEnabled)},e.extend(e.Viewer.prototype,e.EventSource.prototype,e.ControlDock.prototype,{isOpen:function(){return!!this.world.getItemCount()},openDzi:function(t){return e.console.error("[Viewer.openDzi] this function is deprecated; use Viewer.open() instead."),this.open(t)},openTileSource:function(t){return e.console.error("[Viewer.openTileSource] this function is deprecated; use Viewer.open() instead."),this.open(t)},open:function(t,n){var r=this;if(this.close(),t){if(this.sequenceMode&&e.isArray(t))return this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),void 0===n||isNaN(n)||(this.initialPage=n),this.tileSources=t,this._sequenceIndex=Math.max(0,Math.min(this.tileSources.length-1,this.initialPage)),this.tileSources.length&&(this.open(this.tileSources[this._sequenceIndex]),this.showReferenceStrip&&this.addReferenceStrip()),void this._updateSequenceButtons(this._sequenceIndex);if(e.isArray(t)||(t=[t]),t.length){this._opening=!0;for(var i,a=t.length,s=0,c=0,l=function(){if(s+c===a)if(s){!r._firstOpen&&r.preserveViewport||(r.viewport.goHome(!0),r.viewport.update()),r._firstOpen=!1;var e=t[0];if(e.tileSource&&(e=e.tileSource),r.overlays&&!r.preserveOverlays)for(var n=0;n<r.overlays.length;n++)r.currentOverlays[n]=o(r,r.overlays[n]);r._drawOverlays(),r._opening=!1,r.raiseEvent("open",{source:e})}else r._opening=!1,r.raiseEvent("open-failed",i)},u=function(t){e.isPlainObject(t)&&t.tileSource||(t={tileSource:t}),void 0!==t.index&&(e.console.error("[Viewer.open] setting indexes here is not supported; use addTiledImage instead"),delete t.index),void 0===t.collectionImmediately&&(t.collectionImmediately=!0);var n=t.success;t.success=function(e){if(s++,t.tileSource.overlays)for(var o=0;o<t.tileSource.overlays.length;o++)r.addOverlay(t.tileSource.overlays[o]);n&&n(e),l()};var o=t.error;t.error=function(e){c++,i||(i=e),o&&o(e),l()},r.addTiledImage(t)},d=0;d<t.length;d++)u(t[d]);return this}}},close:function(){return t[this.hash]?(this._opening=!1,this.navigator&&this.navigator.close(),this.preserveOverlays||(this.clearOverlays(),this.overlaysContainer.innerHTML=""),t[this.hash].animating=!1,this.world.removeAll(),this.imageLoader.clear(),this.raiseEvent("close"),this):this},destroy:function(){if(t[this.hash]){if(this.close(),this.clearOverlays(),this.overlaysContainer.innerHTML="",this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),null!==this._updateRequestId&&(e.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.drawer&&this.drawer.destroy(),this.removeAllHandlers(),this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.innerTracker&&this.innerTracker.destroy(),this.outerTracker&&this.outerTracker.destroy(),t[this.hash]=null,delete t[this.hash],this.canvas=null,this.container=null,this.element=null}},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(e){return this.innerTracker.setTracking(e),this.outerTracker.setTracking(e),this.raiseEvent("mouse-enabled",{enabled:e}),this},areControlsEnabled:function(){var e,t=this.controls.length;for(e=0;e<this.controls.length;e++)t=t&&this.controls[e].isVisible();return t},setControlsEnabled:function(e){return e?l(this):c(this),this.raiseEvent("controls-enabled",{enabled:e}),this},setDebugMode:function(e){for(var t=0;t<this.world.getItemCount();t++)this.world.getItemAt(t).debugMode=e;this.debugMode=e,this.forceRedraw()},isFullPage:function(){return t[this.hash].fullPage},setFullPage:function(n){var r,o,i=document.body,a=i.style,s=document.documentElement.style,c=this;if(n==this.isFullPage())return this;var l={fullPage:n,preventDefaultAction:!1};if(this.raiseEvent("pre-full-page",l),l.preventDefaultAction)return this;if(n){for(this.elementSize=e.getElementSize(this.element),this.pageScroll=e.getPageScroll(),this.elementMargin=this.element.style.margin,this.element.style.margin="0",this.elementPadding=this.element.style.padding,this.element.style.padding="0",this.bodyMargin=a.margin,this.docMargin=s.margin,a.margin="0",s.margin="0",this.bodyPadding=a.padding,this.docPadding=s.padding,a.padding="0",s.padding="0",this.bodyWidth=a.width,this.docWidth=s.width,a.width="100%",s.width="100%",this.bodyHeight=a.height,this.docHeight=s.height,a.height="100%",s.height="100%",this.previousBody=[],t[this.hash].prevElementParent=this.element.parentNode,t[this.hash].prevNextSibling=this.element.nextSibling,t[this.hash].prevElementWidth=this.element.style.width,t[this.hash].prevElementHeight=this.element.style.height,r=i.childNodes.length,o=0;o<r;o++)this.previousBody.push(i.childNodes[0]),i.removeChild(i.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,i.appendChild(this.toolbar.element),e.addClass(this.toolbar.element,"fullpage")),e.addClass(this.element,"fullpage"),i.appendChild(this.element),this.element.style.height=e.getWindowSize().y+"px",this.element.style.width=e.getWindowSize().x+"px",this.toolbar&&this.toolbar.element&&(this.element.style.height=e.getElementSize(this.element).y-e.getElementSize(this.toolbar.element).y+"px"),t[this.hash].fullPage=!0,e.delegate(this,P)({})}else{for(this.element.style.margin=this.elementMargin,this.element.style.padding=this.elementPadding,a.margin=this.bodyMargin,s.margin=this.docMargin,a.padding=this.bodyPadding,s.padding=this.docPadding,a.width=this.bodyWidth,s.width=this.docWidth,a.height=this.bodyHeight,s.height=this.docHeight,i.removeChild(this.element),r=this.previousBody.length,o=0;o<r;o++)i.appendChild(this.previousBody.shift());e.removeClass(this.element,"fullpage"),t[this.hash].prevElementParent.insertBefore(this.element,t[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(i.removeChild(this.toolbar.element),e.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.width=t[this.hash].prevElementWidth,this.element.style.height=t[this.hash].prevElementHeight;var u=0,d=function(){e.setPageScroll(c.pageScroll);var t=e.getPageScroll();++u<10&&(t.x!==c.pageScroll.x||t.y!==c.pageScroll.y)&&e.requestAnimationFrame(d)};e.requestAnimationFrame(d),t[this.hash].fullPage=!1,e.delegate(this,C)({})}return this.navigator&&this.viewport&&this.navigator.update(this.viewport),this.raiseEvent("full-page",{fullPage:n}),this},setFullScreen:function(t){var n=this;if(!e.supportsFullScreen)return this.setFullPage(t);if(e.isFullScreen()===t)return this;var r={fullScreen:t,preventDefaultAction:!1};if(this.raiseEvent("pre-full-screen",r),r.preventDefaultAction)return this;if(t){if(this.setFullPage(!0),!this.isFullPage())return this;this.fullPageStyleWidth=this.element.style.width,this.fullPageStyleHeight=this.element.style.height,this.element.style.width="100%",this.element.style.height="100%";var o=function(){var t=e.isFullScreen();t||(e.removeEvent(document,e.fullScreenEventName,o),e.removeEvent(document,e.fullScreenErrorEventName,o),n.setFullPage(!1),n.isFullPage()&&(n.element.style.width=n.fullPageStyleWidth,n.element.style.height=n.fullPageStyleHeight)),n.navigator&&n.viewport&&setTimeout((function(){n.navigator.update(n.viewport)})),n.raiseEvent("full-screen",{fullScreen:t})};e.addEvent(document,e.fullScreenEventName,o),e.addEvent(document,e.fullScreenErrorEventName,o),e.requestFullScreen(document.body)}else e.exitFullScreen();return this},isVisible:function(){return"hidden"!=this.container.style.visibility},setVisible:function(e){return this.container.style.visibility=e?"":"hidden",this.raiseEvent("visible",{visible:e}),this},addTiledImage:function(t){e.console.assert(t,"[Viewer.addTiledImage] options is required"),e.console.assert(t.tileSource,"[Viewer.addTiledImage] options.tileSource is required"),e.console.assert(!t.replace||t.index>-1&&t.index<this.world.getItemCount(),"[Viewer.addTiledImage] if options.replace is used, options.index must be a valid index in Viewer.world");var n=this;t.replace&&(t.replaceItem=n.world.getItemAt(t.index)),this._hideMessage(),void 0===t.placeholderFillStyle&&(t.placeholderFillStyle=this.placeholderFillStyle),void 0===t.opacity&&(t.opacity=this.opacity),void 0===t.preload&&(t.preload=this.preload),void 0===t.compositeOperation&&(t.compositeOperation=this.compositeOperation),void 0===t.crossOriginPolicy&&(t.crossOriginPolicy=void 0!==t.tileSource.crossOriginPolicy?t.tileSource.crossOriginPolicy:this.crossOriginPolicy),void 0===t.ajaxWithCredentials&&(t.ajaxWithCredentials=this.ajaxWithCredentials),void 0===t.loadTilesWithAjax&&(t.loadTilesWithAjax=this.loadTilesWithAjax),void 0===t.ajaxHeaders||null===t.ajaxHeaders?t.ajaxHeaders=this.ajaxHeaders:e.isPlainObject(t.ajaxHeaders)&&e.isPlainObject(this.ajaxHeaders)&&(t.ajaxHeaders=e.extend({},this.ajaxHeaders,t.ajaxHeaders));var r={options:t};function o(e){for(var o=0;o<n._loadQueue.length;o++)if(n._loadQueue[o]===r){n._loadQueue.splice(o,1);break}0===n._loadQueue.length&&i(r),n.raiseEvent("add-item-failed",e),t.error&&t.error(e)}function i(e){n.collectionMode&&(n.world.arrange({immediately:e.options.collectionImmediately,rows:n.collectionRows,columns:n.collectionColumns,layout:n.collectionLayout,tileSize:n.collectionTileSize,tileMargin:n.collectionTileMargin}),n.world.setAutoRefigureSizes(!0))}function a(){for(var t,r,o;n._loadQueue.length&&(t=n._loadQueue[0]).tileSource;){if(n._loadQueue.splice(0,1),t.options.replace){var a=n.world.getIndexOfItem(t.options.replaceItem);-1!=a&&(t.options.index=a),n.world.removeItem(t.options.replaceItem)}r=new e.TiledImage({viewer:n,source:t.tileSource,viewport:n.viewport,drawer:n.drawer,tileCache:n.tileCache,imageLoader:n.imageLoader,x:t.options.x,y:t.options.y,width:t.options.width,height:t.options.height,fitBounds:t.options.fitBounds,fitBoundsPlacement:t.options.fitBoundsPlacement,clip:t.options.clip,placeholderFillStyle:t.options.placeholderFillStyle,opacity:t.options.opacity,preload:t.options.preload,degrees:t.options.degrees,compositeOperation:t.options.compositeOperation,springStiffness:n.springStiffness,animationTime:n.animationTime,minZoomImageRatio:n.minZoomImageRatio,wrapHorizontal:n.wrapHorizontal,wrapVertical:n.wrapVertical,immediateRender:n.immediateRender,blendTime:n.blendTime,alwaysBlend:n.alwaysBlend,minPixelRatio:n.minPixelRatio,smoothTileEdgesMinZoom:n.smoothTileEdgesMinZoom,iOSDevice:n.iOSDevice,crossOriginPolicy:t.options.crossOriginPolicy,ajaxWithCredentials:t.options.ajaxWithCredentials,loadTilesWithAjax:t.options.loadTilesWithAjax,ajaxHeaders:t.options.ajaxHeaders,debugMode:n.debugMode}),n.collectionMode&&n.world.setAutoRefigureSizes(!1),n.world.addItem(r,{index:t.options.index}),0===n._loadQueue.length&&i(t),1!==n.world.getItemCount()||n.preserveViewport||n.viewport.goHome(!0),n.navigator&&(o=e.extend({},t.options,{replace:!1,originalTiledImage:r,tileSource:t.tileSource}),n.navigator.addTiledImage(o)),t.options.success&&t.options.success({item:r})}}e.isArray(t.tileSource)?setTimeout((function(){o({message:"[Viewer.addTiledImage] Sequences can not be added; add them one at a time instead.",source:t.tileSource,options:t})})):(this._loadQueue.push(r),function(t,n,r,o,i){var a=t;if("string"==e.type(n))if(n.match(/^\s*<.*>\s*$/))n=e.parseXml(n);else if(n.match(/^\s*[\{\[].*[\}\]]\s*$/))try{var s=e.parseJSON(n);n=s}catch(e){}function c(e,t){e.ready?o(e):(e.addHandler("ready",(function(){o(e)})),e.addHandler("open-failed",(function(e){i({message:e.message,source:t})})))}setTimeout((function(){if("string"==e.type(n))(n=new e.TileSource({url:n,crossOriginPolicy:void 0!==r.crossOriginPolicy?r.crossOriginPolicy:t.crossOriginPolicy,ajaxWithCredentials:t.ajaxWithCredentials,ajaxHeaders:t.ajaxHeaders,useCanvas:t.useCanvas,success:function(e){o(e.tileSource)}})).addHandler("open-failed",(function(e){i(e)}));else if(e.isPlainObject(n)||n.nodeType)if(void 0!==n.crossOriginPolicy||void 0===r.crossOriginPolicy&&void 0===t.crossOriginPolicy||(n.crossOriginPolicy=void 0!==r.crossOriginPolicy?r.crossOriginPolicy:t.crossOriginPolicy),void 0===n.ajaxWithCredentials&&(n.ajaxWithCredentials=t.ajaxWithCredentials),void 0===n.useCanvas&&(n.useCanvas=t.useCanvas),e.isFunction(n.getTileUrl)){var s=new e.TileSource(n);s.getTileUrl=n.getTileUrl,o(s)}else{var l=e.TileSource.determineType(a,n);if(!l)return void i({message:"Unable to load TileSource",source:n});var u=l.prototype.configure.apply(a,[n]);c(new l(u),n)}else c(n,n)}))}(this,t.tileSource,t,(function(e){r.tileSource=e,a()}),(function(e){e.options=t,o(e),a()})))},addSimpleImage:function(t){e.console.assert(t,"[Viewer.addSimpleImage] options is required"),e.console.assert(t.url,"[Viewer.addSimpleImage] options.url is required");var n=e.extend({},t,{tileSource:{type:"image",url:t.url}});delete n.url,this.addTiledImage(n)},addLayer:function(t){var n=this;e.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead.");var r=e.extend({},t,{success:function(e){n.raiseEvent("add-layer",{options:t,drawer:e.item})},error:function(e){n.raiseEvent("add-layer-failed",e)}});return this.addTiledImage(r),this},getLayerAtLevel:function(t){return e.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead."),this.world.getItemAt(t)},getLevelOfLayer:function(t){return e.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead."),this.world.getIndexOfItem(t)},getLayersCount:function(){return e.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead."),this.world.getItemCount()},setLayerLevel:function(t,n){return e.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead."),this.world.setItemIndex(t,n)},removeLayer:function(t){return e.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead."),this.world.removeItem(t)},forceRedraw:function(){return t[this.hash].forceRedraw=!0,this},bindSequenceControls:function(){var t=e.delegate(this,u),n=e.delegate(this,d),r=e.delegate(this,U),o=e.delegate(this,V),i=this.navImages,a=!0;return this.showSequenceControl&&((this.previousButton||this.nextButton)&&(a=!1),this.previousButton=new e.Button({element:this.previousButton?e.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.PreviousPage"),srcRest:j(this.prefixUrl,i.previous.REST),srcGroup:j(this.prefixUrl,i.previous.GROUP),srcHover:j(this.prefixUrl,i.previous.HOVER),srcDown:j(this.prefixUrl,i.previous.DOWN),onRelease:o,onFocus:t,onBlur:n}),this.nextButton=new e.Button({element:this.nextButton?e.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.NextPage"),srcRest:j(this.prefixUrl,i.next.REST),srcGroup:j(this.prefixUrl,i.next.GROUP),srcHover:j(this.prefixUrl,i.next.HOVER),srcDown:j(this.prefixUrl,i.next.DOWN),onRelease:r,onFocus:t,onBlur:n}),this.navPrevNextWrap||this.previousButton.disable(),this.tileSources&&this.tileSources.length||this.nextButton.disable(),a&&(this.paging=new e.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:e.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||e.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){var t=e.delegate(this,k),n=e.delegate(this,I),r=e.delegate(this,A),o=e.delegate(this,R),i=e.delegate(this,B),a=e.delegate(this,z),s=e.delegate(this,L),c=e.delegate(this,H),l=e.delegate(this,W),p=e.delegate(this,F),h=e.delegate(this,u),f=e.delegate(this,d),m=this.navImages,g=[],v=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton||this.flipButton)&&(v=!1),this.showZoomControl&&(g.push(this.zoomInButton=new e.Button({element:this.zoomInButton?e.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.ZoomIn"),srcRest:j(this.prefixUrl,m.zoomIn.REST),srcGroup:j(this.prefixUrl,m.zoomIn.GROUP),srcHover:j(this.prefixUrl,m.zoomIn.HOVER),srcDown:j(this.prefixUrl,m.zoomIn.DOWN),onPress:t,onRelease:n,onClick:r,onEnter:t,onExit:n,onFocus:h,onBlur:f})),g.push(this.zoomOutButton=new e.Button({element:this.zoomOutButton?e.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.ZoomOut"),srcRest:j(this.prefixUrl,m.zoomOut.REST),srcGroup:j(this.prefixUrl,m.zoomOut.GROUP),srcHover:j(this.prefixUrl,m.zoomOut.HOVER),srcDown:j(this.prefixUrl,m.zoomOut.DOWN),onPress:o,onRelease:n,onClick:i,onEnter:o,onExit:n,onFocus:h,onBlur:f}))),this.showHomeControl&&g.push(this.homeButton=new e.Button({element:this.homeButton?e.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.Home"),srcRest:j(this.prefixUrl,m.home.REST),srcGroup:j(this.prefixUrl,m.home.GROUP),srcHover:j(this.prefixUrl,m.home.HOVER),srcDown:j(this.prefixUrl,m.home.DOWN),onRelease:a,onFocus:h,onBlur:f})),this.showFullPageControl&&g.push(this.fullPageButton=new e.Button({element:this.fullPageButton?e.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.FullPage"),srcRest:j(this.prefixUrl,m.fullpage.REST),srcGroup:j(this.prefixUrl,m.fullpage.GROUP),srcHover:j(this.prefixUrl,m.fullpage.HOVER),srcDown:j(this.prefixUrl,m.fullpage.DOWN),onRelease:s,onFocus:h,onBlur:f})),this.showRotationControl&&(g.push(this.rotateLeftButton=new e.Button({element:this.rotateLeftButton?e.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.RotateLeft"),srcRest:j(this.prefixUrl,m.rotateleft.REST),srcGroup:j(this.prefixUrl,m.rotateleft.GROUP),srcHover:j(this.prefixUrl,m.rotateleft.HOVER),srcDown:j(this.prefixUrl,m.rotateleft.DOWN),onRelease:c,onFocus:h,onBlur:f})),g.push(this.rotateRightButton=new e.Button({element:this.rotateRightButton?e.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.RotateRight"),srcRest:j(this.prefixUrl,m.rotateright.REST),srcGroup:j(this.prefixUrl,m.rotateright.GROUP),srcHover:j(this.prefixUrl,m.rotateright.HOVER),srcDown:j(this.prefixUrl,m.rotateright.DOWN),onRelease:l,onFocus:h,onBlur:f}))),this.showFlipControl&&g.push(this.flipButton=new e.Button({element:this.flipButton?e.getElement(this.flipButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.Flip"),srcRest:j(this.prefixUrl,m.flip.REST),srcGroup:j(this.prefixUrl,m.flip.GROUP),srcHover:j(this.prefixUrl,m.flip.HOVER),srcDown:j(this.prefixUrl,m.flip.DOWN),onRelease:p,onFocus:h,onBlur:f})),v&&(this.buttons=new e.ButtonGroup({buttons:g,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttons.element,this.addHandler("open",e.delegate(this,N)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:this.navigationControlAnchor||e.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:this.navigationControlAnchor||e.ControlAnchor.TOP_LEFT}))),this},currentPage:function(){return this._sequenceIndex},goToPage:function(e){return this.tileSources&&e>=0&&e<this.tileSources.length&&(this._sequenceIndex=e,this._updateSequenceButtons(e),this.open(this.tileSources[e]),this.referenceStrip&&this.referenceStrip.setFocus(e),this.raiseEvent("page",{page:e})),this},addOverlay:function(t,n,r,a){var s;if(s=e.isPlainObject(t)?t:{element:t,location:n,placement:r,onDraw:a},t=e.getElement(s.element),i(this.currentOverlays,t)>=0)return this;var c=o(this,s);return this.currentOverlays.push(c),c.drawHTML(this.overlaysContainer,this.viewport),this.raiseEvent("add-overlay",{element:t,location:s.location,placement:s.placement}),this},updateOverlay:function(n,r,o){var a;return n=e.getElement(n),(a=i(this.currentOverlays,n))>=0&&(this.currentOverlays[a].update(r,o),t[this.hash].forceRedraw=!0,this.raiseEvent("update-overlay",{element:n,location:r,placement:o})),this},removeOverlay:function(n){var r;return n=e.getElement(n),(r=i(this.currentOverlays,n))>=0&&(this.currentOverlays[r].destroy(),this.currentOverlays.splice(r,1),t[this.hash].forceRedraw=!0,this.raiseEvent("remove-overlay",{element:n})),this},clearOverlays:function(){for(;this.currentOverlays.length>0;)this.currentOverlays.pop().destroy();return t[this.hash].forceRedraw=!0,this.raiseEvent("clear-overlay",{}),this},getOverlayById:function(t){var n;return t=e.getElement(t),(n=i(this.currentOverlays,t))>=0?this.currentOverlays[n]:null},_updateSequenceButtons:function(e){this.nextButton&&(this.tileSources&&this.tileSources.length-1!==e?this.nextButton.enable():this.navPrevNextWrap||this.nextButton.disable()),this.previousButton&&(e>0?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable())},_showMessage:function(t){this._hideMessage();var n=e.makeNeutralElement("div");n.appendChild(document.createTextNode(t)),this.messageDiv=e.makeCenteredNode(n),e.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){var e=this.messageDiv;e&&(e.parentNode.removeChild(e),delete this.messageDiv)},gestureSettingsByDeviceType:function(e){switch(e){case"mouse":return this.gestureSettingsMouse;case"touch":return this.gestureSettingsTouch;case"pen":return this.gestureSettingsPen;default:return this.gestureSettingsUnknown}},_drawOverlays:function(){var e,t=this.currentOverlays.length;for(e=0;e<t;e++)this.currentOverlays[e].drawHTML(this.overlaysContainer,this.viewport)},_cancelPendingImages:function(){this._loadQueue=[]},removeReferenceStrip:function(){this.showReferenceStrip=!1,this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null)},addReferenceStrip:function(){if(this.showReferenceStrip=!0,this.sequenceMode){if(this.referenceStrip)return;this.tileSources.length&&this.tileSources.length>1&&(this.referenceStrip=new e.ReferenceStrip({id:this.referenceStripElement,position:this.referenceStripPosition,sizeRatio:this.referenceStripSizeRatio,scroll:this.referenceStripScroll,height:this.referenceStripHeight,width:this.referenceStripWidth,tileSources:this.tileSources,prefixUrl:this.prefixUrl,useCanvas:this.useCanvas,viewer:this}),this.referenceStrip.setFocus(this._sequenceIndex))}else e.console.warn('Attempting to display a reference strip while "sequenceMode" is off.')}})}(OpenSeadragon),function(e){function t(e){var t={tracker:e.eventSource,position:e.position,quick:e.quick,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:e.preventDefaultAction};if(this.viewer.raiseEvent("navigator-click",t),!t.preventDefaultAction&&e.quick&&this.viewer.viewport&&(this.panVertical||this.panHorizontal)){this.viewer.viewport.flipped&&(e.position.x=this.viewport.getContainerSize().x-e.position.x);var n=this.viewport.pointFromPixel(e.position);this.panVertical?this.panHorizontal||(n.x=this.viewer.viewport.getCenter(!0).x):n.y=this.viewer.viewport.getCenter(!0).y,this.viewer.viewport.panTo(n),this.viewer.viewport.applyConstraints()}}function n(e){var t={tracker:e.eventSource,position:e.position,delta:e.delta,speed:e.speed,direction:e.direction,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:e.preventDefaultAction};this.viewer.raiseEvent("navigator-drag",t),!t.preventDefaultAction&&this.viewer.viewport&&(this.panHorizontal||(e.delta.x=0),this.panVertical||(e.delta.y=0),this.viewer.viewport.flipped&&(e.delta.x=-e.delta.x),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(e.delta)),this.viewer.constrainDuringPan&&this.viewer.viewport.applyConstraints())}function r(e){e.insideElementPressed&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function o(e){return this.viewer.raiseEvent("navigator-scroll",{tracker:e.eventSource,position:e.position,scroll:e.scroll,shift:e.shift,originalEvent:e.originalEvent}),!1}function i(e,t){a(e,"rotate("+t+"deg)")}function a(e,t){e.style.webkitTransform=t,e.style.mozTransform=t,e.style.msTransform=t,e.style.oTransform=t,e.style.transform=t}e.Navigator=function(a){var s,c,l,u,d=a.viewer,p=this;function h(e){i(p.displayRegionContainer,e),i(p.displayRegion,-e),p.viewport.setRotation(e)}(a.id?(this.element=document.getElementById(a.id),a.controlOptions={anchor:e.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(a.id="navigator-"+e.now(),this.element=e.makeNeutralElement("div"),a.controlOptions={anchor:e.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:a.autoFade},a.position&&("BOTTOM_RIGHT"==a.position?a.controlOptions.anchor=e.ControlAnchor.BOTTOM_RIGHT:"BOTTOM_LEFT"==a.position?a.controlOptions.anchor=e.ControlAnchor.BOTTOM_LEFT:"TOP_RIGHT"==a.position?a.controlOptions.anchor=e.ControlAnchor.TOP_RIGHT:"TOP_LEFT"==a.position?a.controlOptions.anchor=e.ControlAnchor.TOP_LEFT:"ABSOLUTE"==a.position&&(a.controlOptions.anchor=e.ControlAnchor.ABSOLUTE,a.controlOptions.top=a.top,a.controlOptions.left=a.left,a.controlOptions.height=a.height,a.controlOptions.width=a.width))),this.element.id=a.id,this.element.className+=" navigator",(a=e.extend(!0,{sizeRatio:e.DEFAULT_SETTINGS.navigatorSizeRatio},a,{element:this.element,tabIndex:-1,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,autoResize:a.autoResize,minZoomImageRatio:1,background:a.background,opacity:a.opacity,borderColor:a.borderColor,displayRegionColor:a.displayRegionColor})).minPixelRatio=this.minPixelRatio=d.minPixelRatio,e.setElementTouchActionNone(this.element),this.borderWidth=2,this.fudge=new e.Point(1,1),this.totalBorderWidths=new e.Point(2*this.borderWidth,2*this.borderWidth).minus(this.fudge),a.controlOptions.anchor!=e.ControlAnchor.NONE&&(l=this.element.style,u=this.borderWidth,l.margin="0px",l.border=u+"px solid "+a.borderColor,l.padding="0px",l.background=a.background,l.opacity=a.opacity,l.overflow="hidden"),this.displayRegion=e.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",function(e,t){e.position="relative",e.top="0px",e.left="0px",e.fontSize="0px",e.overflow="hidden",e.border=t+"px solid "+a.displayRegionColor,e.margin="0px",e.padding="0px",e.background="transparent",e.float="left",e.cssFloat="left",e.styleFloat="left",e.zIndex=999999999,e.cursor="default"}(this.displayRegion.style,this.borderWidth),this.displayRegionContainer=e.makeNeutralElement("div"),this.displayRegionContainer.id=this.element.id+"-displayregioncontainer",this.displayRegionContainer.className="displayregioncontainer",this.displayRegionContainer.style.width="100%",this.displayRegionContainer.style.height="100%",d.addControl(this.element,a.controlOptions),this._resizeWithViewer=a.controlOptions.anchor!=e.ControlAnchor.ABSOLUTE&&a.controlOptions.anchor!=e.ControlAnchor.NONE,a.width&&a.height?(this.setWidth(a.width),this.setHeight(a.height)):this._resizeWithViewer&&(s=e.getElementSize(d.element),this.element.style.height=Math.round(s.y*a.sizeRatio)+"px",this.element.style.width=Math.round(s.x*a.sizeRatio)+"px",this.oldViewerSize=s,c=e.getElementSize(this.element),this.elementArea=c.x*c.y),this.oldContainerSize=new e.Point(0,0),e.Viewer.apply(this,[a]),this.displayRegionContainer.appendChild(this.displayRegion),this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer),a.navigatorRotate)&&(h(a.viewer.viewport?a.viewer.viewport.getRotation():a.viewer.degrees||0),a.viewer.addHandler("rotate",(function(e){h(e.degrees)})));this.innerTracker.destroy(),this.innerTracker=new e.MouseTracker({element:this.element,dragHandler:e.delegate(this,n),clickHandler:e.delegate(this,t),releaseHandler:e.delegate(this,r),scrollHandler:e.delegate(this,o)}),this.addHandler("reset-size",(function(){p.viewport&&p.viewport.goHome(!0)})),d.world.addHandler("item-index-change",(function(e){window.setTimeout((function(){var t=p.world.getItemAt(e.previousIndex);p.world.setItemIndex(t,e.newIndex)}),1)})),d.world.addHandler("remove-item",(function(e){var t=e.item,n=p._getMatchingItem(t);n&&p.world.removeItem(n)})),this.update(d.viewport)},e.extend(e.Navigator.prototype,e.EventSource.prototype,e.Viewer.prototype,{updateSize:function(){if(this.viewport){var t=new e.Point(0===this.container.clientWidth?1:this.container.clientWidth,0===this.container.clientHeight?1:this.container.clientHeight);t.equals(this.oldContainerSize)||(this.viewport.resize(t,!0),this.viewport.goHome(!0),this.oldContainerSize=t,this.drawer.clear(),this.world.draw())}},setWidth:function(e){this.width=e,this.element.style.width="number"==typeof e?e+"px":e,this._resizeWithViewer=!1},setHeight:function(e){this.height=e,this.element.style.height="number"==typeof e?e+"px":e,this._resizeWithViewer=!1},setFlip:function(e){return this.viewport.setFlip(e),this.setDisplayTransform(this.viewer.viewport.getFlip()?"scale(-1,1)":"scale(1,1)"),this},setDisplayTransform:function(e){a(this.displayRegion,e),a(this.canvas,e),a(this.element,e)},update:function(t){var n,r,o,i,a,s;if(n=e.getElementSize(this.viewer.element),this._resizeWithViewer&&n.x&&n.y&&!n.equals(this.oldViewerSize)&&(this.oldViewerSize=n,this.maintainSizeRatio||!this.elementArea?(r=n.x*this.sizeRatio,o=n.y*this.sizeRatio):(r=Math.sqrt(this.elementArea*(n.x/n.y)),o=this.elementArea/r),this.element.style.width=Math.round(r)+"px",this.element.style.height=Math.round(o)+"px",this.elementArea||(this.elementArea=r*o),this.updateSize()),t&&this.viewport){i=t.getBoundsNoRotate(!0),a=this.viewport.pixelFromPointNoRotate(i.getTopLeft(),!1),s=this.viewport.pixelFromPointNoRotate(i.getBottomRight(),!1).minus(this.totalBorderWidths);var c=this.displayRegion.style;c.display=this.world.getItemCount()?"block":"none",c.top=Math.round(a.y)+"px",c.left=Math.round(a.x)+"px";var l=Math.abs(a.x-s.x),u=Math.abs(a.y-s.y);c.width=Math.round(Math.max(l,0))+"px",c.height=Math.round(Math.max(u,0))+"px"}},addTiledImage:function(t){var n=this,r=t.originalTiledImage;delete t.original;var o=e.extend({},t,{success:function(e){var t=e.item;function o(){n._matchBounds(t,r)}t._originalForNavigator=r,n._matchBounds(t,r,!0),r.addHandler("bounds-change",o),r.addHandler("clip-change",o),r.addHandler("opacity-change",(function(){n._matchOpacity(t,r)})),r.addHandler("composite-operation-change",(function(){n._matchCompositeOperation(t,r)}))}});return e.Viewer.prototype.addTiledImage.apply(this,[o])},_getMatchingItem:function(e){for(var t,n=this.world.getItemCount(),r=0;r<n;r++)if((t=this.world.getItemAt(r))._originalForNavigator===e)return t;return null},_matchBounds:function(e,t,n){var r=t.getBoundsNoRotate();e.setPosition(r.getTopLeft(),n),e.setWidth(r.width,n),e.setRotation(t.getRotation(),n),e.setClip(t.getClip())},_matchOpacity:function(e,t){e.setOpacity(t.opacity)},_matchCompositeOperation:function(e,t){e.setCompositeOperation(t.compositeOperation)}})}(OpenSeadragon),function(e){var t={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right",Flip:"Flip Horizontally"}};e.extend(e,{getString:function(n){var r,o=n.split("."),i=null,a=arguments,s=t;for(r=0;r<o.length-1;r++)s=s[o[r]]||{};return"string"!=typeof(i=s[o[r]])&&(e.console.log("Untranslated source string:",n),i=""),i.replace(/\{\d+\}/g,(function(e){var t=parseInt(e.match(/\d+/),10)+1;return t<a.length?a[t]:""}))},setString:function(e,n){var r,o=e.split("."),i=t;for(r=0;r<o.length-1;r++)i[o[r]]||(i[o[r]]={}),i=i[o[r]];i[o[r]]=n}})}(OpenSeadragon),function(e){e.Point=function(e,t){this.x="number"==typeof e?e:0,this.y="number"==typeof t?t:0},e.Point.prototype={clone:function(){return new e.Point(this.x,this.y)},plus:function(t){return new e.Point(this.x+t.x,this.y+t.y)},minus:function(t){return new e.Point(this.x-t.x,this.y-t.y)},times:function(t){return new e.Point(this.x*t,this.y*t)},divide:function(t){return new e.Point(this.x/t,this.y/t)},negate:function(){return new e.Point(-this.x,-this.y)},distanceTo:function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))},squaredDistanceTo:function(e){return Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2)},apply:function(t){return new e.Point(t(this.x),t(this.y))},equals:function(t){return t instanceof e.Point&&this.x===t.x&&this.y===t.y},rotate:function(t,n){var r,o;if(n=n||new e.Point(0,0),t%90==0){switch(e.positiveModulo(t,360)){case 0:r=1,o=0;break;case 90:r=0,o=1;break;case 180:r=-1,o=0;break;case 270:r=0,o=-1}}else{var i=t*Math.PI/180;r=Math.cos(i),o=Math.sin(i)}var a=r*(this.x-n.x)-o*(this.y-n.y)+n.x,s=o*(this.x-n.x)+r*(this.y-n.y)+n.y;return new e.Point(a,s)},toString:function(){return"("+Math.round(100*this.x)/100+","+Math.round(100*this.y)/100+")"}}}(OpenSeadragon),function(e){e.TileSource=function(t,n,r,o,i,a){var s,c,l=this,u=arguments;if(s=e.isPlainObject(t)?t:{width:u[0],height:u[1],tileSize:u[2],tileOverlap:u[3],minLevel:u[4],maxLevel:u[5]},e.EventSource.call(this),e.extend(!0,this,s),!this.success)for(c=0;c<arguments.length;c++)if(e.isFunction(arguments[c])){this.success=arguments[c];break}this.success&&this.addHandler("ready",(function(e){l.success(e)})),"string"==e.type(arguments[0])&&(this.url=arguments[0]),this.url?(this.aspectRatio=1,this.dimensions=new e.Point(10,10),this._tileWidth=0,this._tileHeight=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(this.url)):(this.ready=!0,this.aspectRatio=s.width&&s.height?s.width/s.height:1,this.dimensions=new e.Point(s.width,s.height),this.tileSize?(this._tileWidth=this._tileHeight=this.tileSize,delete this.tileSize):(this.tileWidth?(this._tileWidth=this.tileWidth,delete this.tileWidth):this._tileWidth=0,this.tileHeight?(this._tileHeight=this.tileHeight,delete this.tileHeight):this._tileHeight=0),this.tileOverlap=s.tileOverlap?s.tileOverlap:0,this.minLevel=s.minLevel?s.minLevel:0,this.maxLevel=void 0!==s.maxLevel&&null!==s.maxLevel?s.maxLevel:s.width&&s.height?Math.ceil(Math.log(Math.max(s.width,s.height))/Math.log(2)):0,this.success&&e.isFunction(this.success)&&this.success(this))},e.TileSource.prototype={getTileSize:function(t){return e.console.error("[TileSource.getTileSize] is deprecated. Use TileSource.getTileWidth() and TileSource.getTileHeight() instead"),this._tileWidth},getTileWidth:function(e){return this._tileWidth?this._tileWidth:this.getTileSize(e)},getTileHeight:function(e){return this._tileHeight?this._tileHeight:this.getTileSize(e)},getLevelScale:function(e){var t,n={};for(t=0;t<=this.maxLevel;t++)n[t]=1/Math.pow(2,this.maxLevel-t);return this.getLevelScale=function(e){return n[e]},this.getLevelScale(e)},getNumTiles:function(t){var n=this.getLevelScale(t),r=Math.ceil(n*this.dimensions.x/this.getTileWidth(t)),o=Math.ceil(n*this.dimensions.y/this.getTileHeight(t));return new e.Point(r,o)},getPixelRatio:function(t){var n=this.dimensions.times(this.getLevelScale(t)),r=1/n.x,o=1/n.y;return new e.Point(r,o)},getClosestLevel:function(){var e,t;for(e=this.minLevel+1;e<=this.maxLevel&&!((t=this.getNumTiles(e)).x>1||t.y>1);e++);return e-1},getTileAtPoint:function(t,n){var r=n.x>=0&&n.x<=1&&n.y>=0&&n.y<=1/this.aspectRatio;e.console.assert(r,"[TileSource.getTileAtPoint] must be called with a valid point.");var o=this.dimensions.x*this.getLevelScale(t),i=n.x*o,a=n.y*o,s=Math.floor(i/this.getTileWidth(t)),c=Math.floor(a/this.getTileHeight(t));n.x>=1&&(s=this.getNumTiles(t).x-1);return n.y>=1/this.aspectRatio-1e-15&&(c=this.getNumTiles(t).y-1),new e.Point(s,c)},getTileBounds:function(t,n,r,o){var i=this.dimensions.times(this.getLevelScale(t)),a=this.getTileWidth(t),s=this.getTileHeight(t),c=0===n?0:a*n-this.tileOverlap,l=0===r?0:s*r-this.tileOverlap,u=a+(0===n?1:2)*this.tileOverlap,d=s+(0===r?1:2)*this.tileOverlap,p=1/i.x;return u=Math.min(u,i.x-c),d=Math.min(d,i.y-l),o?new e.Rect(0,0,u,d):new e.Rect(c*p,l*p,u*p,d*p)},getImageInfo:function(t){var n,r,o,i,a,s,c,l=this;t&&(c=(s=(a=t.split("/"))[a.length-1]).lastIndexOf("."))>-1&&(a[a.length-1]=s.slice(0,c)),r=function(n){"string"==typeof n&&(n=e.parseXml(n));var r=e.TileSource.determineType(l,n,t);r?(void 0===(i=r.prototype.configure.apply(l,[n,t])).ajaxWithCredentials&&(i.ajaxWithCredentials=l.ajaxWithCredentials),o=new r(i),l.ready=!0,l.raiseEvent("ready",{tileSource:o})):l.raiseEvent("open-failed",{message:"Unable to load TileSource",source:t})},t.match(/\.js$/)?(n=t.split("/").pop().replace(".js",""),e.jsonp({url:t,async:!1,callbackName:n,callback:r})):e.makeAjaxRequest({url:t,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,success:function(t){var n=function(t){var n,r,o=t.responseText,i=t.status;if(!t)throw new Error(e.getString("Errors.Security"));if(200!==t.status&&0!==t.status)throw i=t.status,n=404==i?"Not Found":t.statusText,new Error(e.getString("Errors.Status",i,n));if(o.match(/\s*<.*/))try{r=t.responseXML&&t.responseXML.documentElement?t.responseXML:e.parseXml(o)}catch(e){r=t.responseText}else if(o.match(/\s*[\{\[].*/))try{r=e.parseJSON(o)}catch(e){r=o}else r=o;return r}(t);r(n)},error:function(e,n){var r;try{r="HTTP "+e.status+" attempting to load TileSource"}catch(e){r=(void 0!==n&&n.toString?n.toString():"Unknown error")+" attempting to load TileSource"}l.raiseEvent("open-failed",{message:r,source:t})}})},supports:function(e,t){return!1},configure:function(e,t){throw new Error("Method not implemented.")},getTileUrl:function(e,t,n){throw new Error("Method not implemented.")},getTileAjaxHeaders:function(e,t,n){return{}},tileExists:function(e,t,n){var r=this.getNumTiles(e);return e>=this.minLevel&&e<=this.maxLevel&&t>=0&&n>=0&&t<r.x&&n<r.y}},e.extend(!0,e.TileSource.prototype,e.EventSource.prototype),e.TileSource.determineType=function(t,n,r){var o;for(o in OpenSeadragon)if(o.match(/.+TileSource$/)&&e.isFunction(OpenSeadragon[o])&&e.isFunction(OpenSeadragon[o].prototype.supports)&&OpenSeadragon[o].prototype.supports.call(t,n,r))return OpenSeadragon[o];e.console.error("No TileSource was able to open %s %s",r,n)}}(OpenSeadragon),function(e){function t(t,n){var r,o,i=n.Image,a=i.Url,s=i.Format,c=i.Size,l=i.DisplayRect||[],u=parseInt(c.Width,10),d=parseInt(c.Height,10),p=parseInt(i.TileSize,10),h=parseInt(i.Overlap,10),f=[];for(o=0;o<l.length;o++)r=l[o].Rect,f.push(new e.DisplayRect(parseInt(r.X,10),parseInt(r.Y,10),parseInt(r.Width,10),parseInt(r.Height,10),parseInt(r.MinLevel,10),parseInt(r.MaxLevel,10)));return e.extend(!0,{width:u,height:d,tileSize:p,tileOverlap:h,minLevel:null,maxLevel:null,tilesUrl:a,fileFormat:s,displayRects:f},n)}e.DziTileSource=function(t,n,r,o,i,a,s,c,l){var u,d,p,h;if(h=e.isPlainObject(t)?t:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4],fileFormat:arguments[5],displayRects:arguments[6],minLevel:arguments[7],maxLevel:arguments[8]},this._levelRects={},this.tilesUrl=h.tilesUrl,this.fileFormat=h.fileFormat,this.displayRects=h.displayRects,this.displayRects)for(u=this.displayRects.length-1;u>=0;u--)for(p=(d=this.displayRects[u]).minLevel;p<=d.maxLevel;p++)this._levelRects[p]||(this._levelRects[p]=[]),this._levelRects[p].push(d);e.TileSource.apply(this,[h])},e.extend(e.DziTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){var n;return e.Image?n=e.Image.xmlns:e.documentElement&&("Image"!=e.documentElement.localName&&"Image"!=e.documentElement.tagName||(n=e.documentElement.namespaceURI)),-1!==(n=(n||"").toLowerCase()).indexOf("schemas.microsoft.com/deepzoom/2008")||-1!==n.indexOf("schemas.microsoft.com/deepzoom/2009")},configure:function(n,r){var o;return o=e.isPlainObject(n)?t(this,n):function(n,r){if(!r||!r.documentElement)throw new Error(e.getString("Errors.Xml"));var o,i,a,s,c,l=r.documentElement,u=l.localName||l.tagName,d=r.documentElement.namespaceURI,p=null,h=[];if("Image"==u)try{if(void 0===(s=l.getElementsByTagName("Size")[0])&&(s=l.getElementsByTagNameNS(d,"Size")[0]),p={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:l.getAttribute("Url"),Format:l.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(l.getAttribute("Overlap"),10),TileSize:parseInt(l.getAttribute("TileSize"),10),Size:{Height:parseInt(s.getAttribute("Height"),10),Width:parseInt(s.getAttribute("Width"),10)}}},!e.imageFormatSupported(p.Image.Format))throw new Error(e.getString("Errors.ImageFormat",p.Image.Format.toUpperCase()));for(void 0===(o=l.getElementsByTagName("DisplayRect"))&&(o=l.getElementsByTagNameNS(d,"DisplayRect")[0]),c=0;c<o.length;c++)i=o[c],void 0===(a=i.getElementsByTagName("Rect")[0])&&(a=i.getElementsByTagNameNS(d,"Rect")[0]),h.push({Rect:{X:parseInt(a.getAttribute("X"),10),Y:parseInt(a.getAttribute("Y"),10),Width:parseInt(a.getAttribute("Width"),10),Height:parseInt(a.getAttribute("Height"),10),MinLevel:parseInt(i.getAttribute("MinLevel"),10),MaxLevel:parseInt(i.getAttribute("MaxLevel"),10)}});return h.length&&(p.Image.DisplayRect=h),t(n,p)}catch(t){throw t instanceof Error?t:new Error(e.getString("Errors.Dzi"))}else{if("Collection"==u)throw new Error(e.getString("Errors.Dzc"));if("Error"==u){var f=l.getElementsByTagName("Message")[0].firstChild.nodeValue;throw new Error(f)}}throw new Error(e.getString("Errors.Dzi"))}(this,n),r&&!o.tilesUrl&&(o.tilesUrl=r.replace(/([^\/]+?)(\.(dzi|xml|js)?(\?[^\/]*)?)?\/?$/,"$1_files/"),-1!=r.search(/\.(dzi|xml|js)\?/)?o.queryParams=r.match(/\?.*/):o.queryParams=""),o},getTileUrl:function(e,t,n){return[this.tilesUrl,e,"/",t,"_",n,".",this.fileFormat,this.queryParams].join("")},tileExists:function(e,t,n){var r,o,i,a,s,c,l,u=this._levelRects[e];if(this.minLevel&&e<this.minLevel||this.maxLevel&&e>this.maxLevel)return!1;if(!u||!u.length)return!0;for(l=u.length-1;l>=0;l--)if(!(e<(r=u[l]).minLevel||e>r.maxLevel)&&(o=this.getLevelScale(e),i=r.x*o,a=r.y*o,s=i+r.width*o,c=a+r.height*o,i=Math.floor(i/this._tileWidth),a=Math.floor(a/this._tileWidth),s=Math.ceil(s/this._tileWidth),c=Math.ceil(c/this._tileWidth),i<=t&&t<s&&a<=n&&n<c))return!0;return!1}})}(OpenSeadragon),function(e){function t(e){var t=Array.isArray(e.profile)?e.profile[0]:e.profile,n=-1!==["http://library.stanford.edu/iiif/image-api/compliance.html#level0","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0","http://iiif.io/api/image/2/level0.json","level0","https://iiif.io/api/image/3/level0.json"].indexOf(t),r=!1;return 2===e.version&&e.profile.length>1&&e.profile[1].supports&&(r=-1!==e.profile[1].supports.indexOf("sizeByW")),3===e.version&&e.extraFeatures&&(r=-1!==e.extraFeatures.indexOf("sizeByWh")),!n||r}function n(e){for(var t=[],n=0;n<e.sizes.length;n++)t.push({url:e["@id"]+"/full/"+e.sizes[n].width+","+(3===e.version?e.sizes[n].height:"")+"/0/default."+e.tileFormat,width:e.sizes[n].width,height:e.sizes[n].height});return t.sort((function(e,t){return e.width-t.width}))}e.IIIFTileSource=function(r){if(e.extend(!0,this,r),!(this.height&&this.width&&this["@id"]))throw new Error("IIIF required parameters not provided.");if(r.tileSizePerScaleFactor={},this.tileFormat=this.tileFormat||"jpg",this.version=r.version,this.tile_width&&this.tile_height)r.tileWidth=this.tile_width,r.tileHeight=this.tile_height;else if(this.tile_width)r.tileSize=this.tile_width;else if(this.tile_height)r.tileSize=this.tile_height;else if(this.tiles)if(1==this.tiles.length)r.tileWidth=this.tiles[0].width,r.tileHeight=this.tiles[0].height||this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;else{this.scale_factors=[];for(var o=0;o<this.tiles.length;o++)for(var i=0;i<this.tiles[o].scaleFactors.length;i++){var a=this.tiles[o].scaleFactors[i];this.scale_factors.push(a),r.tileSizePerScaleFactor[a]={width:this.tiles[o].width,height:this.tiles[o].height||this.tiles[o].width}}}else if(t(r)){for(var s=Math.min(this.height,this.width),c=[256,512,1024],l=[],u=0;u<c.length;u++)c[u]<=s&&l.push(c[u]);l.length>0?r.tileSize=Math.max.apply(null,l):r.tileSize=s}else this.sizes&&this.sizes.length>0?(this.emulateLegacyImagePyramid=!0,r.levels=n(this),e.extend(!0,r,{width:r.levels[r.levels.length-1].width,height:r.levels[r.levels.length-1].height,tileSize:Math.max(r.height,r.width),tileOverlap:0,minLevel:0,maxLevel:r.levels.length-1}),this.levels=r.levels):e.console.error("Nothing in the info.json to construct image pyramids from");if(!r.maxLevel&&!this.emulateLegacyImagePyramid)if(this.scale_factors){var d=Math.max.apply(null,this.scale_factors);r.maxLevel=Math.round(Math.log(d)*Math.LOG2E)}else r.maxLevel=Number(Math.ceil(Math.log(Math.max(this.width,this.height),2)));e.TileSource.apply(this,[r])},e.extend(e.IIIFTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return!(!e.protocol||"http://iiif.io/api/image"!=e.protocol)||(!(!e["@context"]||"http://library.stanford.edu/iiif/image-api/1.1/context.json"!=e["@context"]&&"http://iiif.io/api/image/1/context.json"!=e["@context"])||(!(!e.profile||0!==e.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html"))||(!!(e.identifier&&e.width&&e.height)||!(!e.documentElement||"info"!=e.documentElement.tagName||"http://library.stanford.edu/iiif/image-api/ns/"!=e.documentElement.namespaceURI))))},configure:function(t,n){if(e.isPlainObject(t)){if(t["@context"]){var r=t["@context"];if(Array.isArray(r))for(var o=0;o<r.length;o++)if("string"==typeof r[o]&&(/^http:\/\/iiif\.io\/api\/image\/[1-3]\/context\.json$/.test(r[o])||"http://library.stanford.edu/iiif/image-api/1.1/context.json"===r[o])){r=r[o];break}switch(r){case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":t.version=1;break;case"http://iiif.io/api/image/2/context.json":t.version=2;break;case"http://iiif.io/api/image/3/context.json":t.version=3;break;default:e.console.error("Data has a @context property which contains no known IIIF context URI.")}}else t["@context"]="http://iiif.io/api/image/1.0/context.json",t["@id"]=n.replace("/info.json",""),t.version=1;if(!t["@id"]&&t.id&&(t["@id"]=t.id),t.preferredFormats)for(var i=0;i<t.preferredFormats.length;i++)if(OpenSeadragon.imageFormatSupported(t.preferredFormats[i])){t.tileFormat=t.preferredFormats[i];break}return t}var a=function(t){if(!t||!t.documentElement)throw new Error(e.getString("Errors.Xml"));var n=t.documentElement,r=n.tagName,o=null;if("info"==r)try{return function t(n,r,o){var i,a;if(3==n.nodeType&&o)(a=n.nodeValue.trim()).match(/^\d*$/)&&(a=Number(a)),r[o]?(e.isArray(r[o])||(r[o]=[r[o]]),r[o].push(a)):r[o]=a;else if(1==n.nodeType)for(i=0;i<n.childNodes.length;i++)t(n.childNodes[i],r,n.nodeName)}(n,o={}),o}catch(t){throw t instanceof Error?t:new Error(e.getString("Errors.IIIF"))}throw new Error(e.getString("Errors.IIIF"))}(t);return a["@context"]="http://iiif.io/api/image/1.0/context.json",a["@id"]=n.replace("/info.xml",""),a.version=1,a},getTileWidth:function(t){if(this.emulateLegacyImagePyramid)return e.TileSource.prototype.getTileWidth.call(this,t);var n=Math.pow(2,this.maxLevel-t);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[n]?this.tileSizePerScaleFactor[n].width:this._tileWidth},getTileHeight:function(t){if(this.emulateLegacyImagePyramid)return e.TileSource.prototype.getTileHeight.call(this,t);var n=Math.pow(2,this.maxLevel-t);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[n]?this.tileSizePerScaleFactor[n].height:this._tileHeight},getLevelScale:function(t){if(this.emulateLegacyImagePyramid){var n=NaN;return this.levels.length>0&&t>=this.minLevel&&t<=this.maxLevel&&(n=this.levels[t].width/this.levels[this.maxLevel].width),n}return e.TileSource.prototype.getLevelScale.call(this,t)},getNumTiles:function(t){return this.emulateLegacyImagePyramid?this.getLevelScale(t)?new e.Point(1,1):new e.Point(0,0):e.TileSource.prototype.getNumTiles.call(this,t)},getTileAtPoint:function(t,n){return this.emulateLegacyImagePyramid?new e.Point(0,0):e.TileSource.prototype.getTileAtPoint.call(this,t,n)},getTileUrl:function(e,t,n){if(this.emulateLegacyImagePyramid){var r=null;return this.levels.length>0&&e>=this.minLevel&&e<=this.maxLevel&&(r=this.levels[e].url),r}var o,i,a,s,c,l,u,d,p,h,f,m,g,v=Math.pow(.5,this.maxLevel-e),y=Math.ceil(this.width*v),b=Math.ceil(this.height*v);return o=this.getTileWidth(e),i=this.getTileHeight(e),a=Math.ceil(o/v),s=Math.ceil(i/v),g=1===this.version?"native."+this.tileFormat:"default."+this.tileFormat,y<o&&b<i?(h=2===this.version&&y===this.width||3===this.version&&y===this.width&&b===this.height?"max":3===this.version?y+","+b:y+",",c="full"):(l=t*a,u=n*s,d=Math.min(a,this.width-l),p=Math.min(s,this.height-u),c=0===t&&0===n&&d===this.width&&p===this.height?"full":[l,u,d,p].join(","),f=Math.ceil(d*v),m=Math.ceil(p*v),h=2===this.version&&f===this.width||3===this.version&&f===this.width&&m===this.height?"max":3===this.version?f+","+m:f+","),[this["@id"],c,h,"0",g].join("/")},__testonly__:{canBeTiled:t,constructLevels:n}})}(OpenSeadragon),function(e){e.OsmTileSource=function(t,n,r,o,i){var a;(a=e.isPlainObject(t)?t:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]}).width&&a.height||(a.width=65572864,a.height=65572864),a.tileSize||(a.tileSize=256,a.tileOverlap=0),a.tilesUrl||(a.tilesUrl="http://tile.openstreetmap.org/"),a.minLevel=8,e.TileSource.apply(this,[a])},e.extend(e.OsmTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"openstreetmaps"==e.type},configure:function(e,t){return e},getTileUrl:function(e,t,n){return this.tilesUrl+(e-8)+"/"+t+"/"+n+".png"}})}(OpenSeadragon),function(e){e.TmsTileSource=function(t,n,r,o,i){var a;a=e.isPlainObject(t)?t:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]};var s,c=256*Math.ceil(a.width/256),l=256*Math.ceil(a.height/256);s=c>l?c/256:l/256,a.maxLevel=Math.ceil(Math.log(s)/Math.log(2))-1,a.tileSize=256,a.width=c,a.height=l,e.TileSource.apply(this,[a])},e.extend(e.TmsTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"tiledmapservice"==e.type},configure:function(e,t){return e},getTileUrl:function(e,t,n){var r=this.getNumTiles(e).y-1;return this.tilesUrl+e+"/"+t+"/"+(r-n)+".png"}})}(OpenSeadragon),function(e){e.ZoomifyTileSource=function(e){e.tileSize=256;var t={x:e.width,y:e.height};for(e.imageSizes=[{x:e.width,y:e.height}],e.gridSize=[this._getGridSize(e.width,e.height,e.tileSize)];parseInt(t.x,10)>e.tileSize||parseInt(t.y,10)>e.tileSize;)t.x=Math.floor(t.x/2),t.y=Math.floor(t.y/2),e.imageSizes.push({x:t.x,y:t.y}),e.gridSize.push(this._getGridSize(t.x,t.y,e.tileSize));e.imageSizes.reverse(),e.gridSize.reverse(),e.minLevel=0,e.maxLevel=e.gridSize.length-1,OpenSeadragon.TileSource.apply(this,[e])},e.extend(e.ZoomifyTileSource.prototype,e.TileSource.prototype,{_getGridSize:function(e,t,n){return{x:Math.ceil(e/n),y:Math.ceil(t/n)}},_calculateAbsoluteTileNumber:function(e,t,n){for(var r=0,o={},i=0;i<e;i++)r+=(o=this.gridSize[i]).x*o.y;return r+=(o=this.gridSize[e]).x*n+t},supports:function(e,t){return e.type&&"zoomifytileservice"==e.type},configure:function(e,t){return e},getTileUrl:function(e,t,n){var r,o=this._calculateAbsoluteTileNumber(e,t,n);return r=Math.floor(o/256),this.tilesUrl+"TileGroup"+r+"/"+e+"-"+t+"-"+n+".jpg"}})}(OpenSeadragon),function(e){function t(e,t){return t.levels}e.LegacyTileSource=function(t){var n,r,o;e.isArray(t)&&(n={type:"legacy-image-pyramid",levels:t}),n.levels=function(t){var n,r,o=[];for(r=0;r<t.length;r++)(n=t[r]).height&&n.width&&n.url?o.push({url:n.url,width:Number(n.width),height:Number(n.height)}):e.console.error("Unsupported image format: %s",n.url?n.url:"<no URL>");return o.sort((function(e,t){return e.height-t.height}))}(n.levels),n.levels.length>0?(r=n.levels[n.levels.length-1].width,o=n.levels[n.levels.length-1].height):(r=0,o=0,e.console.error("No supported image formats found")),e.extend(!0,n,{width:r,height:o,tileSize:Math.max(o,r),tileOverlap:0,minLevel:0,maxLevel:n.levels.length>0?n.levels.length-1:0}),e.TileSource.apply(this,[n]),this.levels=n.levels},e.extend(e.LegacyTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"legacy-image-pyramid"==e.type||e.documentElement&&"legacy-image-pyramid"==e.documentElement.getAttribute("type")},configure:function(n,r){return e.isPlainObject(n)?t(this,n):function(n,r){if(!r||!r.documentElement)throw new Error(e.getString("Errors.Xml"));var o,i,a=r.documentElement,s=a.tagName,c=null,l=[];if("image"==s)try{for(c={type:a.getAttribute("type"),levels:[]},l=a.getElementsByTagName("level"),i=0;i<l.length;i++)o=l[i],c.levels.push({url:o.getAttribute("url"),width:parseInt(o.getAttribute("width"),10),height:parseInt(o.getAttribute("height"),10)});return t(n,c)}catch(e){throw e instanceof Error?e:new Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if("collection"==s)throw new Error("Legacy Image Pyramid Collections not yet supported.");if("error"==s)throw new Error("Error: "+r)}throw new Error("Unknown element "+s)}(this,n)},getLevelScale:function(e){var t=NaN;return this.levels.length>0&&e>=this.minLevel&&e<=this.maxLevel&&(t=this.levels[e].width/this.levels[this.maxLevel].width),t},getNumTiles:function(t){return this.getLevelScale(t)?new e.Point(1,1):new e.Point(0,0)},getTileUrl:function(e,t,n){var r=null;return this.levels.length>0&&e>=this.minLevel&&e<=this.maxLevel&&(r=this.levels[e].url),r}})}(OpenSeadragon),function(e){e.ImageTileSource=function(t){t=e.extend({buildPyramid:!0,crossOriginPolicy:!1,ajaxWithCredentials:!1,useCanvas:!0},t),e.TileSource.apply(this,[t])},e.extend(e.ImageTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"image"===e.type},configure:function(e,t){return e},getImageInfo:function(t){var n=this._image=new Image,r=this;this.crossOriginPolicy&&(n.crossOrigin=this.crossOriginPolicy),this.ajaxWithCredentials&&(n.useCredentials=this.ajaxWithCredentials),e.addEvent(n,"load",(function(){r.width=Object.prototype.hasOwnProperty.call(n,"naturalWidth")?n.naturalWidth:n.width,r.height=Object.prototype.hasOwnProperty.call(n,"naturalHeight")?n.naturalHeight:n.height,r.aspectRatio=r.width/r.height,r.dimensions=new e.Point(r.width,r.height),r._tileWidth=r.width,r._tileHeight=r.height,r.tileOverlap=0,r.minLevel=0,r.levels=r._buildLevels(),r.maxLevel=r.levels.length-1,r.ready=!0,r.raiseEvent("ready",{tileSource:r})})),e.addEvent(n,"error",(function(){r.raiseEvent("open-failed",{message:"Error loading image at "+t,source:t})})),n.src=t},getLevelScale:function(e){var t=NaN;return e>=this.minLevel&&e<=this.maxLevel&&(t=this.levels[e].width/this.levels[this.maxLevel].width),t},getNumTiles:function(t){return this.getLevelScale(t)?new e.Point(1,1):new e.Point(0,0)},getTileUrl:function(e,t,n){var r=null;return e>=this.minLevel&&e<=this.maxLevel&&(r=this.levels[e].url),r},getContext2D:function(e,t,n){var r=null;return e>=this.minLevel&&e<=this.maxLevel&&(r=this.levels[e].context2D),r},_buildLevels:function(){var t=[{url:this._image.src,width:Object.prototype.hasOwnProperty.call(this._image,"naturalWidth")?this._image.naturalWidth:this._image.width,height:Object.prototype.hasOwnProperty.call(this._image,"naturalHeight")?this._image.naturalHeight:this._image.height}];if(!this.buildPyramid||!e.supportsCanvas||!this.useCanvas)return delete this._image,t;var n=Object.prototype.hasOwnProperty.call(this._image,"naturalWidth")?this._image.naturalWidth:this._image.width,r=Object.prototype.hasOwnProperty.call(this._image,"naturalHeight")?this._image.naturalHeight:this._image.height,o=document.createElement("canvas"),i=o.getContext("2d");if(o.width=n,o.height=r,i.drawImage(this._image,0,0,n,r),t[0].context2D=i,delete this._image,e.isCanvasTainted(o))return t;for(;n>=2&&r>=2;){n=Math.floor(n/2),r=Math.floor(r/2);var a=document.createElement("canvas"),s=a.getContext("2d");a.width=n,a.height=r,s.drawImage(o,0,0,n,r),t.splice(0,0,{context2D:s,width:n,height:r}),o=a,i=s}return t}})}(OpenSeadragon),function(e){e.TileSourceCollection=function(t,n,r,o){e.console.error("TileSourceCollection is deprecated; use World instead")}}(OpenSeadragon),function(e){function t(n){e.requestAnimationFrame((function(){!function(n){var r,o,i;n.shouldFade&&(r=e.now(),o=r-n.fadeBeginTime,i=1-o/n.fadeLength,i=Math.min(1,i),i=Math.max(0,i),n.imgGroup&&e.setElementOpacity(n.imgGroup,i,!0),i>0&&t(n))}(n)}))}function n(t,n){t.element.disabled||(n>=e.ButtonState.GROUP&&t.currentState==e.ButtonState.REST&&(!function(t){t.shouldFade=!1,t.imgGroup&&e.setElementOpacity(t.imgGroup,1,!0)}(t),t.currentState=e.ButtonState.GROUP),n>=e.ButtonState.HOVER&&t.currentState==e.ButtonState.GROUP&&(t.imgHover&&(t.imgHover.style.visibility=""),t.currentState=e.ButtonState.HOVER),n>=e.ButtonState.DOWN&&t.currentState==e.ButtonState.HOVER&&(t.imgDown&&(t.imgDown.style.visibility=""),t.currentState=e.ButtonState.DOWN))}function r(n,r){n.element.disabled||(r<=e.ButtonState.HOVER&&n.currentState==e.ButtonState.DOWN&&(n.imgDown&&(n.imgDown.style.visibility="hidden"),n.currentState=e.ButtonState.HOVER),r<=e.ButtonState.GROUP&&n.currentState==e.ButtonState.HOVER&&(n.imgHover&&(n.imgHover.style.visibility="hidden"),n.currentState=e.ButtonState.GROUP),r<=e.ButtonState.REST&&n.currentState==e.ButtonState.GROUP&&(!function(n){n.shouldFade=!0,n.fadeBeginTime=e.now()+n.fadeDelay,window.setTimeout((function(){t(n)}),n.fadeDelay)}(n),n.currentState=e.ButtonState.REST))}e.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},e.Button=function(t){var o=this;e.EventSource.call(this),e.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:e.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null},t),this.element=t.element||e.makeNeutralElement("div"),t.element||(this.imgRest=e.makeTransparentImage(this.srcRest),this.imgGroup=e.makeTransparentImage(this.srcGroup),this.imgHover=e.makeTransparentImage(this.srcHover),this.imgDown=e.makeTransparentImage(this.srcDown),this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip,this.element.style.position="relative",e.setElementTouchActionNone(this.element),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",e.Browser.vendor==e.BROWSERS.FIREFOX&&e.Browser.version<3&&(this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top=""),this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown)),this.addHandler("press",this.onPress),this.addHandler("release",this.onRelease),this.addHandler("click",this.onClick),this.addHandler("enter",this.onEnter),this.addHandler("exit",this.onExit),this.addHandler("focus",this.onFocus),this.addHandler("blur",this.onBlur),this.currentState=e.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new e.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(t){t.insideElementPressed?(n(o,e.ButtonState.DOWN),o.raiseEvent("enter",{originalEvent:t.originalEvent})):t.buttonDownAny||n(o,e.ButtonState.HOVER)},focusHandler:function(e){this.enterHandler(e),o.raiseEvent("focus",{originalEvent:e.originalEvent})},exitHandler:function(t){r(o,e.ButtonState.GROUP),t.insideElementPressed&&o.raiseEvent("exit",{originalEvent:t.originalEvent})},blurHandler:function(e){this.exitHandler(e),o.raiseEvent("blur",{originalEvent:e.originalEvent})},pressHandler:function(t){n(o,e.ButtonState.DOWN),o.raiseEvent("press",{originalEvent:t.originalEvent})},releaseHandler:function(t){t.insideElementPressed&&t.insideElementReleased?(r(o,e.ButtonState.HOVER),o.raiseEvent("release",{originalEvent:t.originalEvent})):t.insideElementPressed?r(o,e.ButtonState.GROUP):n(o,e.ButtonState.HOVER)},clickHandler:function(e){e.quick&&o.raiseEvent("click",{originalEvent:e.originalEvent})},keyHandler:function(e){return 13!==e.keyCode||(o.raiseEvent("click",{originalEvent:e.originalEvent}),o.raiseEvent("release",{originalEvent:e.originalEvent}),!1)}}),r(this,e.ButtonState.REST)},e.extend(e.Button.prototype,e.EventSource.prototype,{notifyGroupEnter:function(){n(this,e.ButtonState.GROUP)},notifyGroupExit:function(){r(this,e.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,e.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,e.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()}})}(OpenSeadragon),function(e){e.ButtonGroup=function(t){e.extend(!0,this,{buttons:[],clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:e.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},t);var n,r=this.buttons.concat([]),o=this;if(this.element=t.element||e.makeNeutralElement("div"),!t.group)for(this.element.style.display="inline-block",n=0;n<r.length;n++)this.element.appendChild(r[n].element);e.setElementTouchActionNone(this.element),this.tracker=new e.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(e){var t;for(t=0;t<o.buttons.length;t++)o.buttons[t].notifyGroupEnter()},exitHandler:function(e){var t;if(!e.insideElementPressed)for(t=0;t<o.buttons.length;t++)o.buttons[t].notifyGroupExit()}})},e.ButtonGroup.prototype={emulateEnter:function(){this.tracker.enterHandler({eventSource:this.tracker})},emulateExit:function(){this.tracker.exitHandler({eventSource:this.tracker})}}}(OpenSeadragon),function(e){e.Rect=function(t,n,r,o,i){var a,s;this.x="number"==typeof t?t:0,this.y="number"==typeof n?n:0,this.width="number"==typeof r?r:0,this.height="number"==typeof o?o:0,this.degrees="number"==typeof i?i:0,this.degrees=e.positiveModulo(this.degrees,360),this.degrees>=270?(a=this.getTopRight(),this.x=a.x,this.y=a.y,s=this.height,this.height=this.width,this.width=s,this.degrees-=270):this.degrees>=180?(a=this.getBottomRight(),this.x=a.x,this.y=a.y,this.degrees-=180):this.degrees>=90&&(a=this.getBottomLeft(),this.x=a.x,this.y=a.y,s=this.height,this.height=this.width,this.width=s,this.degrees-=90)},e.Rect.fromSummits=function(t,n,r){var o=t.distanceTo(n),i=t.distanceTo(r),a=n.minus(t),s=Math.atan(a.y/a.x);return a.x<0?s+=Math.PI:a.y<0&&(s+=2*Math.PI),new e.Rect(t.x,t.y,o,i,s/Math.PI*180)},e.Rect.prototype={clone:function(){return new e.Rect(this.x,this.y,this.width,this.height,this.degrees)},getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new e.Point(this.x,this.y)},getBottomRight:function(){return new e.Point(this.x+this.width,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getTopRight:function(){return new e.Point(this.x+this.width,this.y).rotate(this.degrees,this.getTopLeft())},getBottomLeft:function(){return new e.Point(this.x,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getCenter:function(){return new e.Point(this.x+this.width/2,this.y+this.height/2).rotate(this.degrees,this.getTopLeft())},getSize:function(){return new e.Point(this.width,this.height)},equals:function(t){return t instanceof e.Rect&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height&&this.degrees===t.degrees},times:function(t){return new e.Rect(this.x*t,this.y*t,this.width*t,this.height*t,this.degrees)},translate:function(t){return new e.Rect(this.x+t.x,this.y+t.y,this.width,this.height,this.degrees)},union:function(t){var n=this.getBoundingBox(),r=t.getBoundingBox(),o=Math.min(n.x,r.x),i=Math.min(n.y,r.y),a=Math.max(n.x+n.width,r.x+r.width),s=Math.max(n.y+n.height,r.y+r.height);return new e.Rect(o,i,a-o,s-i)},intersection:function(t){var n=[],r=this.getTopLeft();t.containsPoint(r,1e-10)&&n.push(r);var o=this.getTopRight();t.containsPoint(o,1e-10)&&n.push(o);var i=this.getBottomLeft();t.containsPoint(i,1e-10)&&n.push(i);var a=this.getBottomRight();t.containsPoint(a,1e-10)&&n.push(a);var s=t.getTopLeft();this.containsPoint(s,1e-10)&&n.push(s);var c=t.getTopRight();this.containsPoint(c,1e-10)&&n.push(c);var l=t.getBottomLeft();this.containsPoint(l,1e-10)&&n.push(l);var u=t.getBottomRight();this.containsPoint(u,1e-10)&&n.push(u);for(var d=this._getSegments(),p=t._getSegments(),h=0;h<d.length;h++)for(var f=d[h],m=0;m<p.length;m++){var g=p[m],v=y(f[0],f[1],g[0],g[1]);v&&n.push(v)}function y(t,n,r,o){var i=n.minus(t),a=o.minus(r),s=-a.x*i.y+i.x*a.y;if(0===s)return null;var c=(i.x*(t.y-r.y)-i.y*(t.x-r.x))/s,l=(a.x*(t.y-r.y)-a.y*(t.x-r.x))/s;return-1e-10<=c&&c<=1-1e-10&&-1e-10<=l&&l<=1-1e-10?new e.Point(t.x+l*i.x,t.y+l*i.y):null}if(0===n.length)return null;for(var b=n[0].x,w=n[0].x,O=n[0].y,E=n[0].y,x=1;x<n.length;x++){var T=n[x];T.x<b&&(b=T.x),T.x>w&&(w=T.x),T.y<O&&(O=T.y),T.y>E&&(E=T.y)}return new e.Rect(b,O,w-b,E-O)},_getSegments:function(){var e=this.getTopLeft(),t=this.getTopRight(),n=this.getBottomLeft(),r=this.getBottomRight();return[[e,t],[t,r],[r,n],[n,e]]},rotate:function(t,n){if(0===(t=e.positiveModulo(t,360)))return this.clone();n=n||this.getCenter();var r=this.getTopLeft().rotate(t,n),o=this.getTopRight().rotate(t,n).minus(r);o=o.apply((function(e){return Math.abs(e)<1e-15?0:e}));var i=Math.atan(o.y/o.x);return o.x<0?i+=Math.PI:o.y<0&&(i+=2*Math.PI),new e.Rect(r.x,r.y,this.width,this.height,i/Math.PI*180)},getBoundingBox:function(){if(0===this.degrees)return this.clone();var t=this.getTopLeft(),n=this.getTopRight(),r=this.getBottomLeft(),o=this.getBottomRight(),i=Math.min(t.x,n.x,r.x,o.x),a=Math.max(t.x,n.x,r.x,o.x),s=Math.min(t.y,n.y,r.y,o.y),c=Math.max(t.y,n.y,r.y,o.y);return new e.Rect(i,s,a-i,c-s)},getIntegerBoundingBox:function(){var t=this.getBoundingBox(),n=Math.floor(t.x),r=Math.floor(t.y),o=Math.ceil(t.width+t.x-n),i=Math.ceil(t.height+t.y-r);return new e.Rect(n,r,o,i)},containsPoint:function(e,t){t=t||0;var n=this.getTopLeft(),r=this.getTopRight(),o=this.getBottomLeft(),i=r.minus(n),a=o.minus(n);return(e.x-n.x)*i.x+(e.y-n.y)*i.y>=-t&&(e.x-r.x)*i.x+(e.y-r.y)*i.y<=t&&(e.x-n.x)*a.x+(e.y-n.y)*a.y>=-t&&(e.x-o.x)*a.x+(e.y-o.y)*a.y<=t},toString:function(){return"["+Math.round(100*this.x)/100+", "+Math.round(100*this.y)/100+", "+Math.round(100*this.width)/100+"x"+Math.round(100*this.height)/100+", "+Math.round(100*this.degrees)/100+"deg]"}}}(OpenSeadragon),function(e){var t={};function n(t){var n=Number(this.element.style.marginLeft.replace("px","")),r=Number(this.element.style.marginTop.replace("px","")),i=Number(this.element.style.width.replace("px","")),a=Number(this.element.style.height.replace("px","")),s=e.getElementSize(this.viewer.canvas);return this.dragging=!0,this.element&&("horizontal"==this.scroll?-t.delta.x>0?n>-(i-s.x)&&(this.element.style.marginLeft=n+2*t.delta.x+"px",o(this,s.x,n+2*t.delta.x)):-t.delta.x<0&&n<0&&(this.element.style.marginLeft=n+2*t.delta.x+"px",o(this,s.x,n+2*t.delta.x)):-t.delta.y>0?r>-(a-s.y)&&(this.element.style.marginTop=r+2*t.delta.y+"px",o(this,s.y,r+2*t.delta.y)):-t.delta.y<0&&r<0&&(this.element.style.marginTop=r+2*t.delta.y+"px",o(this,s.y,r+2*t.delta.y))),!1}function r(t){var n=Number(this.element.style.marginLeft.replace("px","")),r=Number(this.element.style.marginTop.replace("px","")),i=Number(this.element.style.width.replace("px","")),a=Number(this.element.style.height.replace("px","")),s=e.getElementSize(this.viewer.canvas);return this.element&&("horizontal"==this.scroll?t.scroll>0?n>-(i-s.x)&&(this.element.style.marginLeft=n-60*t.scroll+"px",o(this,s.x,n-60*t.scroll)):t.scroll<0&&n<0&&(this.element.style.marginLeft=n-60*t.scroll+"px",o(this,s.x,n-60*t.scroll)):t.scroll<0?r>s.y-a&&(this.element.style.marginTop=r+60*t.scroll+"px",o(this,s.y,r+60*t.scroll)):t.scroll>0&&r<0&&(this.element.style.marginTop=r+60*t.scroll+"px",o(this,s.y,r+60*t.scroll))),!1}function o(t,n,r){var o,i,a,s,c,l,u;for(o="horizontal"==t.scroll?t.panelWidth:t.panelHeight,i=Math.ceil(n/o)+5,l=i=(i=(a=Math.ceil((Math.abs(r)+n)/o)+1)-i)<0?0:i;l<a&&l<t.panels.length;l++)if(!(u=t.panels[l]).activePanel){var d,p=t.viewer.tileSources[l];d=p.referenceStripThumbnailUrl?{type:"image",url:p.referenceStripThumbnailUrl}:p,(s=new e.Viewer({id:u.id,tileSources:[d],element:u,navigatorSizeRatio:t.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,loadTilesWithAjax:t.viewer.loadTilesWithAjax,ajaxHeaders:t.viewer.ajaxHeaders,useCanvas:t.useCanvas})).displayRegion=e.makeNeutralElement("div"),s.displayRegion.id=u.id+"-displayregion",s.displayRegion.className="displayregion",(c=s.displayRegion.style).position="relative",c.top="0px",c.left="0px",c.fontSize="0px",c.overflow="hidden",c.float="left",c.cssFloat="left",c.styleFloat="left",c.zIndex=999999999,c.cursor="default",c.width=t.panelWidth-4+"px",c.height=t.panelHeight-4+"px",s.displayRegion.innerTracker=new e.MouseTracker({element:s.displayRegion,startDisabled:!0}),u.getElementsByTagName("div")[0].appendChild(s.displayRegion),t.miniViewers[u.id]=s,u.activePanel=!0}}function i(e){var t=e.eventSource.element;return"horizontal"==this.scroll?t.style.marginBottom="0px":t.style.marginLeft="0px",!1}function a(t){var n=t.eventSource.element;return"horizontal"==this.scroll?n.style.marginBottom="-"+e.getElementSize(n).y/2+"px":n.style.marginLeft="-"+e.getElementSize(n).x/2+"px",!1}function s(e){if(e.preventDefaultAction||e.ctrl||e.alt||e.meta)return!0;switch(e.keyCode){case 38:return r.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 40:case 37:return r.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 39:return r.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}}function c(e){if(e.preventDefaultAction||e.ctrl||e.alt||e.meta)return!0;switch(e.keyCode){case 61:return r.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 45:return r.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 48:case 119:case 87:return r.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 115:case 83:case 97:return r.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 100:return r.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}}e.ReferenceStrip=function(l){var u,d,p,h=l.viewer,f=e.getElementSize(h.element);for(l.id||(l.id="referencestrip-"+e.now(),this.element=e.makeNeutralElement("div"),this.element.id=l.id,this.element.className="referencestrip"),l=e.extend(!0,{sizeRatio:e.DEFAULT_SETTINGS.referenceStripSizeRatio,position:e.DEFAULT_SETTINGS.referenceStripPosition,scroll:e.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold},l,{element:this.element,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1}),e.extend(this,l),t[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,(d=this.element.style).marginTop="0px",d.marginRight="0px",d.marginBottom="0px",d.marginLeft="0px",d.left="0px",d.bottom="0px",d.border="0px",d.background="#000",d.position="relative",e.setElementTouchActionNone(this.element),e.setElementOpacity(this.element,.8),this.viewer=h,this.innerTracker=new e.MouseTracker({element:this.element,dragHandler:e.delegate(this,n),scrollHandler:e.delegate(this,r),enterHandler:e.delegate(this,i),exitHandler:e.delegate(this,a),keyDownHandler:e.delegate(this,s),keyHandler:e.delegate(this,c)}),l.width&&l.height?(this.element.style.width=l.width+"px",this.element.style.height=l.height+"px",h.addControl(this.element,{anchor:e.ControlAnchor.BOTTOM_LEFT})):"horizontal"==l.scroll?(this.element.style.width=f.x*l.sizeRatio*h.tileSources.length+12*h.tileSources.length+"px",this.element.style.height=f.y*l.sizeRatio+"px",h.addControl(this.element,{anchor:e.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=f.y*l.sizeRatio*h.tileSources.length+12*h.tileSources.length+"px",this.element.style.width=f.x*l.sizeRatio+"px",h.addControl(this.element,{anchor:e.ControlAnchor.TOP_LEFT})),this.panelWidth=f.x*this.sizeRatio+8,this.panelHeight=f.y*this.sizeRatio+8,this.panels=[],this.miniViewers={},p=0;p<h.tileSources.length;p++)(u=e.makeNeutralElement("div")).id=this.element.id+"-"+p,u.style.width=this.panelWidth+"px",u.style.height=this.panelHeight+"px",u.style.display="inline",u.style.float="left",u.style.cssFloat="left",u.style.styleFloat="left",u.style.padding="2px",e.setElementTouchActionNone(u),u.innerTracker=new e.MouseTracker({element:u,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,pressHandler:function(t){t.eventSource.dragging=e.now()},releaseHandler:function(t){var n=t.eventSource,r=n.element.id,o=Number(r.split("-")[2]),i=e.now();t.insideElementPressed&&t.insideElementReleased&&n.dragging&&i-n.dragging<n.clickTimeThreshold&&(n.dragging=null,h.goToPage(o))}}),this.element.appendChild(u),u.activePanel=!1,this.panels.push(u);o(this,"vertical"==this.scroll?f.y:f.x,0),this.setFocus(0)},e.extend(e.ReferenceStrip.prototype,e.EventSource.prototype,e.Viewer.prototype,{setFocus:function(t){var n,r=this.element.querySelector("#"+this.element.id+"-"+t),a=e.getElementSize(this.viewer.canvas),s=Number(this.element.style.width.replace("px","")),c=Number(this.element.style.height.replace("px","")),l=-Number(this.element.style.marginLeft.replace("px","")),u=-Number(this.element.style.marginTop.replace("px",""));this.currentSelected!==r&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=r,this.currentSelected.style.background="#999","horizontal"==this.scroll?(n=Number(t)*(this.panelWidth+3))>l+a.x-this.panelWidth?(n=Math.min(n,s-a.x),this.element.style.marginLeft=-n+"px",o(this,a.x,-n)):n<l&&(n=Math.max(0,n-a.x/2),this.element.style.marginLeft=-n+"px",o(this,a.x,-n)):(n=Number(t)*(this.panelHeight+3))>u+a.y-this.panelHeight?(n=Math.min(n,c-a.y),this.element.style.marginTop=-n+"px",o(this,a.y,-n)):n<u&&(n=Math.max(0,n-a.y/2),this.element.style.marginTop=-n+"px",o(this,a.y,-n)),this.currentPage=t,i.call(this,{eventSource:this.innerTracker}))},update:function(){return!!t[this.id].animating&&(e.console.log("image reference strip update"),!0)},destroy:function(){if(this.miniViewers)for(var e in this.miniViewers)this.miniViewers[e].destroy();this.element&&this.element.parentNode.removeChild(this.element)}})}(OpenSeadragon),function(e){e.DisplayRect=function(t,n,r,o,i,a){e.Rect.apply(this,[t,n,r,o]),this.minLevel=i,this.maxLevel=a},e.extend(e.DisplayRect.prototype,e.Rect.prototype)}(OpenSeadragon),function(e){e.Spring=function(t){var n=arguments;"object"!=typeof t&&(t={initial:n.length&&"number"==typeof n[0]?n[0]:void 0,springStiffness:n.length>1?n[1].springStiffness:5,animationTime:n.length>1?n[1].animationTime:1.5}),e.console.assert("number"==typeof t.springStiffness&&0!==t.springStiffness,"[OpenSeadragon.Spring] options.springStiffness must be a non-zero number"),e.console.assert("number"==typeof t.animationTime&&t.animationTime>=0,"[OpenSeadragon.Spring] options.animationTime must be a number greater than or equal to 0"),t.exponential&&(this._exponential=!0,delete t.exponential),e.extend(!0,this,t),this.current={value:"number"==typeof this.initial?this.initial:this._exponential?0:1,time:e.now()},e.console.assert(!this._exponential||0!==this.current.value,"[OpenSeadragon.Spring] value must be non-zero for exponential springs"),this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time},this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},e.Spring.prototype={resetTo:function(t){e.console.assert(!this._exponential||0!==t,"[OpenSeadragon.Spring.resetTo] target must be non-zero for exponential springs"),this.start.value=this.target.value=this.current.value=t,this.start.time=this.target.time=this.current.time=e.now(),this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},springTo:function(t){e.console.assert(!this._exponential||0!==t,"[OpenSeadragon.Spring.springTo] target must be non-zero for exponential springs"),this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=t,this.target.time=this.start.time+1e3*this.animationTime,this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},shiftBy:function(t){this.start.value+=t,this.target.value+=t,this._exponential&&(e.console.assert(0!==this.target.value&&0!==this.start.value,"[OpenSeadragon.Spring.shiftBy] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},setExponential:function(t){this._exponential=t,this._exponential&&(e.console.assert(0!==this.current.value&&0!==this.target.value&&0!==this.start.value,"[OpenSeadragon.Spring.setExponential] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},update:function(){var t,n;this.current.time=e.now(),this._exponential?(t=this.start._logValue,n=this.target._logValue):(t=this.start.value,n=this.target.value);var r,o,i=this.current.time>=this.target.time?n:t+(n-t)*(r=this.springStiffness,o=(this.current.time-this.start.time)/(this.target.time-this.start.time),(1-Math.exp(r*-o))/(1-Math.exp(-r))),a=this.current.value;return this._exponential?this.current.value=Math.exp(i):this.current.value=i,a!=this.current.value},isAtTargetValue:function(){return this.current.value===this.target.value}}}(OpenSeadragon),function(e){function t(t){e.extend(!0,this,{timeout:e.DEFAULT_SETTINGS.timeout,jobId:null},t),this.image=null}t.prototype={errorMsg:null,start:function(){var t=this,n=this.abort;this.image=new Image,this.image.onload=function(){t.finish(!0)},this.image.onabort=this.image.onerror=function(){t.errorMsg="Image load aborted",t.finish(!1)},this.jobId=window.setTimeout((function(){t.errorMsg="Image load exceeded timeout ("+t.timeout+" ms)",t.finish(!1)}),this.timeout),this.loadWithAjax?(this.request=e.makeAjaxRequest({url:this.src,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,responseType:"arraybuffer",success:function(e){var n;try{n=new window.Blob([e.response])}catch(t){var r=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if("TypeError"===t.name&&r){var o=new r;o.append(e.response),n=o.getBlob()}}0===n.size&&(t.errorMsg="Empty image response.",t.finish(!1));var i=(window.URL||window.webkitURL).createObjectURL(n);t.image.src=i},error:function(e){t.errorMsg="Image load aborted - XHR error",t.finish(!1)}}),this.abort=function(){t.request.abort(),"function"==typeof n&&n()}):(!1!==this.crossOriginPolicy&&(this.image.crossOrigin=this.crossOriginPolicy),this.image.src=this.src)},finish:function(e){this.image.onload=this.image.onerror=this.image.onabort=null,e||(this.image=null),this.jobId&&window.clearTimeout(this.jobId),this.callback(this)}},e.ImageLoader=function(t){e.extend(!0,this,{jobLimit:e.DEFAULT_SETTINGS.imageLoaderLimit,timeout:e.DEFAULT_SETTINGS.timeout,jobQueue:[],jobsInProgress:0},t)},e.ImageLoader.prototype={addJob:function(e){var n=this,r=new t({src:e.src,loadWithAjax:e.loadWithAjax,ajaxHeaders:e.loadWithAjax?e.ajaxHeaders:null,crossOriginPolicy:e.crossOriginPolicy,ajaxWithCredentials:e.ajaxWithCredentials,callback:function(t){!function(e,t,n){e.jobsInProgress--,(!e.jobLimit||e.jobsInProgress<e.jobLimit)&&e.jobQueue.length>0&&(e.jobQueue.shift().start(),e.jobsInProgress++);n(t.image,t.errorMsg,t.request)}(n,t,e.callback)},abort:e.abort,timeout:this.timeout});!this.jobLimit||this.jobsInProgress<this.jobLimit?(r.start(),this.jobsInProgress++):this.jobQueue.push(r)},clear:function(){for(var e=0;e<this.jobQueue.length;e++){var t=this.jobQueue[e];"function"==typeof t.abort&&t.abort()}this.jobQueue=[]}}}(OpenSeadragon),function(e){e.Tile=function(e,t,n,r,o,i,a,s,c,l){this.level=e,this.x=t,this.y=n,this.bounds=r,this.sourceBounds=l,this.exists=o,this.url=i,this.context2D=a,this.loadWithAjax=s,this.ajaxHeaders=c,this.ajaxHeaders?this.cacheKey=this.url+"+"+JSON.stringify(this.ajaxHeaders):this.cacheKey=this.url,this.loaded=!1,this.loading=!1,this.element=null,this.imgElement=null,this.image=null,this.style=null,this.position=null,this.size=null,this.blendStart=null,this.opacity=null,this.squaredDistance=null,this.visibility=null,this.beingDrawn=!1,this.lastTouchTime=0,this.isRightMost=!1,this.isBottomMost=!1},e.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},_hasTransparencyChannel:function(){return!!this.context2D||this.url.match(".png")},drawHTML:function(t){this.cacheImageRecord?this.loaded?(this.element||(this.element=e.makeNeutralElement("div"),this.imgElement=this.cacheImageRecord.getImage().cloneNode(),this.imgElement.style.msInterpolationMode="nearest-neighbor",this.imgElement.style.width="100%",this.imgElement.style.height="100%",this.style=this.element.style,this.style.position="absolute"),this.element.parentNode!=t&&t.appendChild(this.element),this.imgElement.parentNode!=this.element&&this.element.appendChild(this.imgElement),this.style.top=this.position.y+"px",this.style.left=this.position.x+"px",this.style.height=this.size.y+"px",this.style.width=this.size.x+"px",e.setElementOpacity(this.element,this.opacity)):e.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString()):e.console.warn("[Tile.drawHTML] attempting to draw tile %s when it's not cached",this.toString())},drawCanvas:function(t,n,r,o){var i,a,s,c=this.position.times(e.pixelDensityRatio),l=this.size.times(e.pixelDensityRatio);this.context2D||this.cacheImageRecord?(i=this.context2D||this.cacheImageRecord.getRenderedContext(),this.loaded&&i?(t.save(),t.globalAlpha=this.opacity,"number"==typeof r&&1!==r&&(c=c.times(r),l=l.times(r)),o instanceof e.Point&&(c=c.plus(o)),1===t.globalAlpha&&this._hasTransparencyChannel()&&t.clearRect(c.x,c.y,l.x,l.y),n({context:t,tile:this,rendered:i}),this.sourceBounds?(a=Math.min(this.sourceBounds.width,i.canvas.width),s=Math.min(this.sourceBounds.height,i.canvas.height)):(a=i.canvas.width,s=i.canvas.height),t.drawImage(i.canvas,0,0,a,s,c.x,c.y,l.x,l.y),t.restore()):e.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString())):e.console.warn("[Tile.drawCanvas] attempting to draw tile %s when it's not cached",this.toString())},getScaleForEdgeSmoothing:function(){var t;if(this.cacheImageRecord)t=this.cacheImageRecord.getRenderedContext();else{if(!this.context2D)return e.console.warn("[Tile.drawCanvas] attempting to get tile scale %s when tile's not cached",this.toString()),1;t=this.context2D}return t.canvas.width/(this.size.x*e.pixelDensityRatio)},getTranslationForEdgeSmoothing:function(t,n,r){var o=Math.max(1,Math.ceil((r.x-n.x)/2)),i=Math.max(1,Math.ceil((r.y-n.y)/2));return new e.Point(o,i).minus(this.position.times(e.pixelDensityRatio).times(t||1).apply((function(e){return e%1})))},unload:function(){this.imgElement&&this.imgElement.parentNode&&this.imgElement.parentNode.removeChild(this.imgElement),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.imgElement=null,this.loaded=!1,this.loading=!1}}}(OpenSeadragon),function(e){e.OverlayPlacement=e.Placement,e.OverlayRotationMode=e.freezeObject({NO_ROTATION:1,EXACT:2,BOUNDING_BOX:3}),e.Overlay=function(t,n,r){var o;o=e.isPlainObject(t)?t:{element:t,location:n,placement:r},this.element=o.element,this.style=o.element.style,this._init(o)},e.Overlay.prototype={_init:function(t){this.location=t.location,this.placement=void 0===t.placement?e.Placement.TOP_LEFT:t.placement,this.onDraw=t.onDraw,this.checkResize=void 0===t.checkResize||t.checkResize,this.width=void 0===t.width?null:t.width,this.height=void 0===t.height?null:t.height,this.rotationMode=t.rotationMode||e.OverlayRotationMode.EXACT,this.location instanceof e.Rect&&(this.width=this.location.width,this.height=this.location.height,this.location=this.location.getTopLeft(),this.placement=e.Placement.TOP_LEFT),this.scales=null!==this.width&&null!==this.height,this.bounds=new e.Rect(this.location.x,this.location.y,this.width,this.height),this.position=this.location},adjust:function(t,n){var r=e.Placement.properties[this.placement];r&&(r.isHorizontallyCentered?t.x-=n.x/2:r.isRight&&(t.x-=n.x),r.isVerticallyCentered?t.y-=n.y/2:r.isBottom&&(t.y-=n.y))},destroy:function(){var t=this.element,n=this.style;t.parentNode&&(t.parentNode.removeChild(t),t.prevElementParent&&(n.display="none",document.body.appendChild(t))),this.onDraw=null,n.top="",n.left="",n.position="",null!==this.width&&(n.width=""),null!==this.height&&(n.height="");var r=e.getCssPropertyWithVendorPrefix("transformOrigin"),o=e.getCssPropertyWithVendorPrefix("transform");r&&o&&(n[r]="",n[o]="")},drawHTML:function(t,n){var r=this.element;r.parentNode!==t&&(r.prevElementParent=r.parentNode,r.prevNextSibling=r.nextSibling,t.appendChild(r),this.style.position="absolute",this.size=e.getElementSize(r));var o=this._getOverlayPositionAndSize(n),i=o.position,a=this.size=o.size,s=o.rotate;if(this.onDraw)this.onDraw(i,a,this.element);else{var c=this.style;c.left=i.x+"px",c.top=i.y+"px",null!==this.width&&(c.width=a.x+"px"),null!==this.height&&(c.height=a.y+"px");var l=e.getCssPropertyWithVendorPrefix("transformOrigin"),u=e.getCssPropertyWithVendorPrefix("transform");l&&u&&(s?(c[l]=this._getTransformOrigin(),c[u]="rotate("+s+"deg)"):(c[l]="",c[u]="")),"none"!==c.display&&(c.display="block")}},_getOverlayPositionAndSize:function(t){var n=t.pixelFromPoint(this.location,!0),r=this._getSizeInPixels(t);this.adjust(n,r);var o=0;if(t.degrees&&this.rotationMode!==e.OverlayRotationMode.NO_ROTATION)if(this.rotationMode===e.OverlayRotationMode.BOUNDING_BOX&&null!==this.width&&null!==this.height){var i=new e.Rect(n.x,n.y,r.x,r.y),a=this._getBoundingBox(i,t.degrees);n=a.getTopLeft(),r=a.getSize()}else o=t.degrees;return{position:n,size:r,rotate:o}},_getSizeInPixels:function(t){var n=this.size.x,r=this.size.y;if(null!==this.width||null!==this.height){var o=t.deltaPixelsFromPointsNoRotate(new e.Point(this.width||0,this.height||0),!0);null!==this.width&&(n=o.x),null!==this.height&&(r=o.y)}if(this.checkResize&&(null===this.width||null===this.height)){var i=this.size=e.getElementSize(this.element);null===this.width&&(n=i.x),null===this.height&&(r=i.y)}return new e.Point(n,r)},_getBoundingBox:function(e,t){var n=this._getPlacementPoint(e);return e.rotate(t,n).getBoundingBox()},_getPlacementPoint:function(t){var n=new e.Point(t.x,t.y),r=e.Placement.properties[this.placement];return r&&(r.isHorizontallyCentered?n.x+=t.width/2:r.isRight&&(n.x+=t.width),r.isVerticallyCentered?n.y+=t.height/2:r.isBottom&&(n.y+=t.height)),n},_getTransformOrigin:function(){var t="",n=e.Placement.properties[this.placement];return n?(n.isLeft?t="left":n.isRight&&(t="right"),n.isTop?t+=" top":n.isBottom&&(t+=" bottom"),t):t},update:function(t,n){var r=e.isPlainObject(t)?t:{location:t,placement:n};this._init({location:r.location||this.location,placement:void 0!==r.placement?r.placement:this.placement,onDraw:r.onDraw||this.onDraw,checkResize:r.checkResize||this.checkResize,width:void 0!==r.width?r.width:this.width,height:void 0!==r.height?r.height:this.height,rotationMode:r.rotationMode||this.rotationMode})},getBounds:function(t){e.console.assert(t,"A viewport must now be passed to Overlay.getBounds.");var n=this.width,r=this.height;if(null===n||null===r){var o=t.deltaPointsFromPixelsNoRotate(this.size,!0);null===n&&(n=o.x),null===r&&(r=o.y)}var i=this.location.clone();return this.adjust(i,new e.Point(n,r)),this._adjustBoundsForRotation(t,new e.Rect(i.x,i.y,n,r))},_adjustBoundsForRotation:function(t,n){if(!t||0===t.degrees||this.rotationMode===e.OverlayRotationMode.EXACT)return n;if(this.rotationMode===e.OverlayRotationMode.BOUNDING_BOX){if(null===this.width||null===this.height)return n;var r=this._getOverlayPositionAndSize(t);return t.viewerElementToViewportRectangle(new e.Rect(r.position.x,r.position.y,r.size.x,r.size.y))}return n.rotate(-t.degrees,this._getPlacementPoint(n))}}}(OpenSeadragon),function(e){e.Drawer=function(t){e.console.assert(t.viewer,"[Drawer] options.viewer is required");var n=arguments;if(e.isPlainObject(t)||(t={source:n[0],viewport:n[1],element:n[2]}),e.console.assert(t.viewport,"[Drawer] options.viewport is required"),e.console.assert(t.element,"[Drawer] options.element is required"),t.source&&e.console.error("[Drawer] options.source is no longer accepted; use TiledImage instead"),this.viewer=t.viewer,this.viewport=t.viewport,this.debugGridColor="string"==typeof t.debugGridColor?[t.debugGridColor]:t.debugGridColor||e.DEFAULT_SETTINGS.debugGridColor,t.opacity&&e.console.error("[Drawer] options.opacity is no longer accepted; set the opacity on the TiledImage instead"),this.useCanvas=e.supportsCanvas&&(!this.viewer||this.viewer.useCanvas),this.container=e.getElement(t.element),this.canvas=e.makeNeutralElement(this.useCanvas?"canvas":"div"),this.context=this.useCanvas?this.canvas.getContext("2d"):null,this.sketchCanvas=null,this.sketchContext=null,this.element=this.container,this.container.dir="ltr",this.useCanvas){var r=this._calculateCanvasSize();this.canvas.width=r.x,this.canvas.height=r.y}this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",e.setElementOpacity(this.canvas,this.opacity,!0),this.container.style.textAlign="left",this.container.appendChild(this.canvas),this._imageSmoothingEnabled=!0},e.Drawer.prototype={addOverlay:function(t,n,r,o){return e.console.error("drawer.addOverlay is deprecated. Use viewer.addOverlay instead."),this.viewer.addOverlay(t,n,r,o),this},updateOverlay:function(t,n,r){return e.console.error("drawer.updateOverlay is deprecated. Use viewer.updateOverlay instead."),this.viewer.updateOverlay(t,n,r),this},removeOverlay:function(t){return e.console.error("drawer.removeOverlay is deprecated. Use viewer.removeOverlay instead."),this.viewer.removeOverlay(t),this},clearOverlays:function(){return e.console.error("drawer.clearOverlays is deprecated. Use viewer.clearOverlays instead."),this.viewer.clearOverlays(),this},viewportCoordToDrawerCoord:function(t){var n=this.viewport.pixelFromPointNoRotate(t,!0);return new e.Point(n.x*e.pixelDensityRatio,n.y*e.pixelDensityRatio)},clipWithPolygons:function(e,t){if(this.useCanvas){var n=this._getContext(t);n.beginPath(),e.forEach((function(e){e.forEach((function(e,t){n[0===t?"moveTo":"lineTo"](e.x,e.y)}))})),n.clip()}},setOpacity:function(t){e.console.error("drawer.setOpacity is deprecated. Use tiledImage.setOpacity instead.");for(var n=this.viewer.world,r=0;r<n.getItemCount();r++)n.getItemAt(r).setOpacity(t);return this},getOpacity:function(){e.console.error("drawer.getOpacity is deprecated. Use tiledImage.getOpacity instead.");for(var t=this.viewer.world,n=0,r=0;r<t.getItemCount();r++){var o=t.getItemAt(r).getOpacity();o>n&&(n=o)}return n},needsUpdate:function(){return e.console.error("[Drawer.needsUpdate] this function is deprecated. Use World.needsDraw instead."),this.viewer.world.needsDraw()},numTilesLoaded:function(){return e.console.error("[Drawer.numTilesLoaded] this function is deprecated. Use TileCache.numTilesLoaded instead."),this.viewer.tileCache.numTilesLoaded()},reset:function(){return e.console.error("[Drawer.reset] this function is deprecated. Use World.resetItems instead."),this.viewer.world.resetItems(),this},update:function(){return e.console.error("[Drawer.update] this function is deprecated. Use Drawer.clear and World.draw instead."),this.clear(),this.viewer.world.draw(),this},canRotate:function(){return this.useCanvas},destroy:function(){this.canvas.width=1,this.canvas.height=1,this.sketchCanvas=null,this.sketchContext=null},clear:function(){if(this.canvas.innerHTML="",this.useCanvas){var e=this._calculateCanvasSize();if((this.canvas.width!=e.x||this.canvas.height!=e.y)&&(this.canvas.width=e.x,this.canvas.height=e.y,this._updateImageSmoothingEnabled(this.context),null!==this.sketchCanvas)){var t=this._calculateSketchCanvasSize();this.sketchCanvas.width=t.x,this.sketchCanvas.height=t.y,this._updateImageSmoothingEnabled(this.sketchContext)}this._clear()}},_clear:function(e,t){if(this.useCanvas){var n=this._getContext(e);if(t)n.clearRect(t.x,t.y,t.width,t.height);else{var r=n.canvas;n.clearRect(0,0,r.width,r.height)}}},viewportToDrawerRectangle:function(t){var n=this.viewport.pixelFromPointNoRotate(t.getTopLeft(),!0),r=this.viewport.deltaPixelsFromPointsNoRotate(t.getSize(),!0);return new e.Rect(n.x*e.pixelDensityRatio,n.y*e.pixelDensityRatio,r.x*e.pixelDensityRatio,r.y*e.pixelDensityRatio)},drawTile:function(t,n,r,o,i){if(e.console.assert(t,"[Drawer.drawTile] tile is required"),e.console.assert(n,"[Drawer.drawTile] drawingHandler is required"),this.useCanvas){var a=this._getContext(r);o=o||1,t.drawCanvas(a,n,o,i)}else t.drawHTML(this.canvas)},_getContext:function(e){var t=this.context;if(e){if(null===this.sketchCanvas){this.sketchCanvas=document.createElement("canvas");var n=this._calculateSketchCanvasSize();if(this.sketchCanvas.width=n.x,this.sketchCanvas.height=n.y,this.sketchContext=this.sketchCanvas.getContext("2d"),0===this.viewport.getRotation()){var r=this;this.viewer.addHandler("rotate",(function e(){if(0!==r.viewport.getRotation()){r.viewer.removeHandler("rotate",e);var t=r._calculateSketchCanvasSize();r.sketchCanvas.width=t.x,r.sketchCanvas.height=t.y}}))}this._updateImageSmoothingEnabled(this.sketchContext)}t=this.sketchContext}return t},saveContext:function(e){this.useCanvas&&this._getContext(e).save()},restoreContext:function(e){this.useCanvas&&this._getContext(e).restore()},setClip:function(e,t){if(this.useCanvas){var n=this._getContext(t);n.beginPath(),n.rect(e.x,e.y,e.width,e.height),n.clip()}},drawRectangle:function(e,t,n){if(this.useCanvas){var r=this._getContext(n);r.save(),r.fillStyle=t,r.fillRect(e.x,e.y,e.width,e.height),r.restore()}},blendSketch:function(t,n,r,o){var i=t;if(e.isPlainObject(i)||(i={opacity:t,scale:n,translate:r,compositeOperation:o}),this.useCanvas&&this.sketchCanvas){t=i.opacity,o=i.compositeOperation;var a=i.bounds;if(this.context.save(),this.context.globalAlpha=t,o&&(this.context.globalCompositeOperation=o),a)a.x<0&&(a.width+=a.x,a.x=0),a.x+a.width>this.canvas.width&&(a.width=this.canvas.width-a.x),a.y<0&&(a.height+=a.y,a.y=0),a.y+a.height>this.canvas.height&&(a.height=this.canvas.height-a.y),this.context.drawImage(this.sketchCanvas,a.x,a.y,a.width,a.height,a.x,a.y,a.width,a.height);else{n=i.scale||1;var s=(r=i.translate)instanceof e.Point?r:new e.Point(0,0),c=0,l=0;if(r){var u=this.sketchCanvas.width-this.canvas.width,d=this.sketchCanvas.height-this.canvas.height;c=Math.round(u/2),l=Math.round(d/2)}this.context.drawImage(this.sketchCanvas,s.x-c*n,s.y-l*n,(this.canvas.width+2*c)*n,(this.canvas.height+2*l)*n,-c,-l,this.canvas.width+2*c,this.canvas.height+2*l)}this.context.restore()}},drawDebugInfo:function(t,n,r,o){if(this.useCanvas){var i=this.viewer.world.getIndexOfItem(o)%this.debugGridColor.length,a=this.context;a.save(),a.lineWidth=2*e.pixelDensityRatio,a.font="small-caps bold "+13*e.pixelDensityRatio+"px arial",a.strokeStyle=this.debugGridColor[i],a.fillStyle=this.debugGridColor[i],0!==this.viewport.degrees&&this._offsetForRotation({degrees:this.viewport.degrees}),o.getRotation(!0)%360!=0&&this._offsetForRotation({degrees:o.getRotation(!0),point:o.viewport.pixelFromPointNoRotate(o._getRotationPoint(!0),!0)}),0===o.viewport.degrees&&o.getRotation(!0)%360==0&&o._drawer.viewer.viewport.getFlip()&&o._drawer._flip(),a.strokeRect(t.position.x*e.pixelDensityRatio,t.position.y*e.pixelDensityRatio,t.size.x*e.pixelDensityRatio,t.size.y*e.pixelDensityRatio);var s=(t.position.x+t.size.x/2)*e.pixelDensityRatio,c=(t.position.y+t.size.y/2)*e.pixelDensityRatio;a.translate(s,c),a.rotate(Math.PI/180*-this.viewport.degrees),a.translate(-s,-c),0===t.x&&0===t.y&&(a.fillText("Zoom: "+this.viewport.getZoom(),t.position.x*e.pixelDensityRatio,(t.position.y-30)*e.pixelDensityRatio),a.fillText("Pan: "+this.viewport.getBounds().toString(),t.position.x*e.pixelDensityRatio,(t.position.y-20)*e.pixelDensityRatio)),a.fillText("Level: "+t.level,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+20)*e.pixelDensityRatio),a.fillText("Column: "+t.x,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+30)*e.pixelDensityRatio),a.fillText("Row: "+t.y,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+40)*e.pixelDensityRatio),a.fillText("Order: "+r+" of "+n,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+50)*e.pixelDensityRatio),a.fillText("Size: "+t.size.toString(),(t.position.x+10)*e.pixelDensityRatio,(t.position.y+60)*e.pixelDensityRatio),a.fillText("Position: "+t.position.toString(),(t.position.x+10)*e.pixelDensityRatio,(t.position.y+70)*e.pixelDensityRatio),0!==this.viewport.degrees&&this._restoreRotationChanges(),o.getRotation(!0)%360!=0&&this._restoreRotationChanges(),0===o.viewport.degrees&&o.getRotation(!0)%360==0&&o._drawer.viewer.viewport.getFlip()&&o._drawer._flip(),a.restore()}},debugRect:function(t){if(this.useCanvas){var n=this.context;n.save(),n.lineWidth=2*e.pixelDensityRatio,n.strokeStyle=this.debugGridColor[0],n.fillStyle=this.debugGridColor[0],n.strokeRect(t.x*e.pixelDensityRatio,t.y*e.pixelDensityRatio,t.width*e.pixelDensityRatio,t.height*e.pixelDensityRatio),n.restore()}},setImageSmoothingEnabled:function(e){this.useCanvas&&(this._imageSmoothingEnabled=e,this._updateImageSmoothingEnabled(this.context),this.viewer.forceRedraw())},_updateImageSmoothingEnabled:function(e){e.msImageSmoothingEnabled=this._imageSmoothingEnabled,e.imageSmoothingEnabled=this._imageSmoothingEnabled},getCanvasSize:function(t){var n=this._getContext(t).canvas;return new e.Point(n.width,n.height)},getCanvasCenter:function(){return new e.Point(this.canvas.width/2,this.canvas.height/2)},_offsetForRotation:function(t){var n=t.point?t.point.times(e.pixelDensityRatio):this.getCanvasCenter(),r=this._getContext(t.useSketch);r.save(),r.translate(n.x,n.y),this.viewer.viewport.flipped?(r.rotate(Math.PI/180*-t.degrees),r.scale(-1,1)):r.rotate(Math.PI/180*t.degrees),r.translate(-n.x,-n.y)},_flip:function(t){var n=(t=t||{}).point?t.point.times(e.pixelDensityRatio):this.getCanvasCenter(),r=this._getContext(t.useSketch);r.translate(n.x,0),r.scale(-1,1),r.translate(-n.x,0)},_restoreRotationChanges:function(e){this._getContext(e).restore()},_calculateCanvasSize:function(){var t=e.pixelDensityRatio,n=this.viewport.getContainerSize();return{x:Math.round(n.x*t),y:Math.round(n.y*t)}},_calculateSketchCanvasSize:function(){var e=this._calculateCanvasSize();if(0===this.viewport.getRotation())return e;var t=Math.ceil(Math.sqrt(e.x*e.x+e.y*e.y));return{x:t,y:t}}}}(OpenSeadragon),function(e){e.Viewport=function(t){var n=arguments;n.length&&n[0]instanceof e.Point&&(t={containerSize:n[0],contentSize:n[1],config:n[2]}),t.config&&(e.extend(!0,t,t.config),delete t.config),this._margins=e.extend({left:0,top:0,right:0,bottom:0},t.margins||{}),delete t.margins,e.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,viewer:null,springStiffness:e.DEFAULT_SETTINGS.springStiffness,animationTime:e.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:e.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:e.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:e.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:e.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:e.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:e.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:e.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:e.DEFAULT_SETTINGS.maxZoomLevel,degrees:e.DEFAULT_SETTINGS.degrees,flipped:e.DEFAULT_SETTINGS.flipped,homeFillsViewer:e.DEFAULT_SETTINGS.homeFillsViewer},t),this._updateContainerInnerSize(),this.centerSpringX=new e.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new e.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new e.Spring({exponential:!0,initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._setContentBounds(new e.Rect(0,0,1,1),1),this.goHome(!0),this.update()},e.Viewport.prototype={resetContentSize:function(t){return e.console.assert(t,"[Viewport.resetContentSize] contentSize is required"),e.console.assert(t instanceof e.Point,"[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point"),e.console.assert(t.x>0,"[Viewport.resetContentSize] contentSize.x must be greater than 0"),e.console.assert(t.y>0,"[Viewport.resetContentSize] contentSize.y must be greater than 0"),this._setContentBounds(new e.Rect(0,0,1,t.y/t.x),t.x),this},setHomeBounds:function(t,n){e.console.error("[Viewport.setHomeBounds] this function is deprecated; The content bounds should not be set manually."),this._setContentBounds(t,n)},_setContentBounds:function(t,n){e.console.assert(t,"[Viewport._setContentBounds] bounds is required"),e.console.assert(t instanceof e.Rect,"[Viewport._setContentBounds] bounds must be an OpenSeadragon.Rect"),e.console.assert(t.width>0,"[Viewport._setContentBounds] bounds.width must be greater than 0"),e.console.assert(t.height>0,"[Viewport._setContentBounds] bounds.height must be greater than 0"),this._contentBoundsNoRotate=t.clone(),this._contentSizeNoRotate=this._contentBoundsNoRotate.getSize().times(n),this._contentBounds=t.rotate(this.degrees).getBoundingBox(),this._contentSize=this._contentBounds.getSize().times(n),this._contentAspectRatio=this._contentSize.x/this._contentSize.y,this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:this._contentSizeNoRotate.clone(),contentFactor:n,homeBounds:this._contentBoundsNoRotate.clone(),contentBounds:this._contentBounds.clone()})},getHomeZoom:function(){if(this.defaultZoomLevel)return this.defaultZoomLevel;var e=this._contentAspectRatio/this.getAspectRatio();return(this.homeFillsViewer?e>=1?e:1:e>=1?1:e)/this._contentBounds.width},getHomeBounds:function(){return this.getHomeBoundsNoRotate().rotate(-this.getRotation())},getHomeBoundsNoRotate:function(){var t=this._contentBounds.getCenter(),n=1/this.getHomeZoom(),r=n/this.getAspectRatio();return new e.Rect(t.x-n/2,t.y-r/2,n,r)},goHome:function(e){return this.viewer&&this.viewer.raiseEvent("home",{immediately:e}),this.fitBounds(this.getHomeBounds(),e)},getMinZoom:function(){var e=this.getHomeZoom();return this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*e},getMaxZoom:function(){var e=this.maxZoomLevel;return e||(e=this._contentSize.x*this.maxZoomPixelRatio/this._containerInnerSize.x,e/=this._contentBounds.width),Math.max(e,this.getHomeZoom())},getAspectRatio:function(){return this._containerInnerSize.x/this._containerInnerSize.y},getContainerSize:function(){return new e.Point(this.containerSize.x,this.containerSize.y)},getMargins:function(){return e.extend({},this._margins)},setMargins:function(t){e.console.assert("object"===e.type(t),"[Viewport.setMargins] margins must be an object"),this._margins=e.extend({left:0,top:0,right:0,bottom:0},t),this._updateContainerInnerSize(),this.viewer&&this.viewer.forceRedraw()},getBounds:function(e){return this.getBoundsNoRotate(e).rotate(-this.getRotation())},getBoundsNoRotate:function(t){var n=this.getCenter(t),r=1/this.getZoom(t),o=r/this.getAspectRatio();return new e.Rect(n.x-r/2,n.y-o/2,r,o)},getBoundsWithMargins:function(e){return this.getBoundsNoRotateWithMargins(e).rotate(-this.getRotation(),this.getCenter(e))},getBoundsNoRotateWithMargins:function(e){var t=this.getBoundsNoRotate(e),n=this._containerInnerSize.x*this.getZoom(e);return t.x-=this._margins.left/n,t.y-=this._margins.top/n,t.width+=(this._margins.left+this._margins.right)/n,t.height+=(this._margins.top+this._margins.bottom)/n,t},getCenter:function(t){var n,r,o,i,a,s,c=new e.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),l=new e.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return t?c:this.zoomPoint?(n=this.pixelFromPoint(this.zoomPoint,!0),i=(o=1/(r=this.getZoom()))/this.getAspectRatio(),a=new e.Rect(c.x-o/2,c.y-i/2,o,i),s=this._pixelFromPoint(this.zoomPoint,a).minus(n).divide(this._containerInnerSize.x*r),l.plus(s)):l},getZoom:function(e){return e?this.zoomSpring.current.value:this.zoomSpring.target.value},_applyZoomConstraints:function(e){return Math.max(Math.min(e,this.getMaxZoom()),this.getMinZoom())},_applyBoundaryConstraints:function(t){var n=new e.Rect(t.x,t.y,t.width,t.height);if(this.wrapHorizontal);else{var r=this.visibilityRatio*n.width,o=n.x+n.width,i=this._contentBoundsNoRotate.x+this._contentBoundsNoRotate.width,a=this._contentBoundsNoRotate.x-o+r,s=i-n.x-r;r>this._contentBoundsNoRotate.width?n.x+=(a+s)/2:s<0?n.x+=s:a>0&&(n.x+=a)}if(this.wrapVertical);else{var c=this.visibilityRatio*n.height,l=n.y+n.height,u=this._contentBoundsNoRotate.y+this._contentBoundsNoRotate.height,d=this._contentBoundsNoRotate.y-l+c,p=u-n.y-c;c>this._contentBoundsNoRotate.height?n.y+=(d+p)/2:p<0?n.y+=p:d>0&&(n.y+=d)}return n},_raiseConstraintsEvent:function(e){this.viewer&&this.viewer.raiseEvent("constrain",{immediately:e})},applyConstraints:function(e){var t=this.getZoom(),n=this._applyZoomConstraints(t);t!==n&&this.zoomTo(n,this.zoomPoint,e);var r=this.getBoundsNoRotate(),o=this._applyBoundaryConstraints(r);return this._raiseConstraintsEvent(e),(r.x!==o.x||r.y!==o.y||e)&&this.fitBounds(o.rotate(-this.getRotation()),e),this},ensureVisible:function(e){return this.applyConstraints(e)},_fitBounds:function(t,n){var r=(n=n||{}).immediately||!1,o=n.constraints||!1,i=this.getAspectRatio(),a=t.getCenter(),s=new e.Rect(t.x,t.y,t.width,t.height,t.degrees+this.getRotation()).getBoundingBox();s.getAspectRatio()>=i?s.height=s.width/i:s.width=s.height*i,s.x=a.x-s.width/2,s.y=a.y-s.height/2;var c=1/s.width;if(o){var l=s.getAspectRatio(),u=this._applyZoomConstraints(c);c!==u&&(c=u,s.width=1/c,s.x=a.x-s.width/2,s.height=s.width/l,s.y=a.y-s.height/2),a=(s=this._applyBoundaryConstraints(s)).getCenter(),this._raiseConstraintsEvent(r)}if(r)return this.panTo(a,!0),this.zoomTo(c,null,!0);this.panTo(this.getCenter(!0),!0),this.zoomTo(this.getZoom(!0),null,!0);var d=this.getBounds(),p=this.getZoom();if(0===p||Math.abs(c/p-1)<1e-8)return this.zoomTo(c,!0),this.panTo(a,r);var h=(s=s.rotate(-this.getRotation())).getTopLeft().times(c).minus(d.getTopLeft().times(p)).divide(c-p);return this.zoomTo(c,h,r)},fitBounds:function(e,t){return this._fitBounds(e,{immediately:t,constraints:!1})},fitBoundsWithConstraints:function(e,t){return this._fitBounds(e,{immediately:t,constraints:!0})},fitVertically:function(t){var n=new e.Rect(this._contentBounds.x+this._contentBounds.width/2,this._contentBounds.y,0,this._contentBounds.height);return this.fitBounds(n,t)},fitHorizontally:function(t){var n=new e.Rect(this._contentBounds.x,this._contentBounds.y+this._contentBounds.height/2,this._contentBounds.width,0);return this.fitBounds(n,t)},getConstrainedBounds:function(e){var t;return t=this.getBounds(e),this._applyBoundaryConstraints(t)},panBy:function(t,n){var r=new e.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return this.panTo(r.plus(t),n)},panTo:function(e,t){return t?(this.centerSpringX.resetTo(e.x),this.centerSpringY.resetTo(e.y)):(this.centerSpringX.springTo(e.x),this.centerSpringY.springTo(e.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:e,immediately:t}),this},zoomBy:function(e,t,n){return this.zoomTo(this.zoomSpring.target.value*e,t,n)},zoomTo:function(t,n,r){var o=this;return this.zoomPoint=n instanceof e.Point&&!isNaN(n.x)&&!isNaN(n.y)?n:null,r?this._adjustCenterSpringsForZoomPoint((function(){o.zoomSpring.resetTo(t)})):this.zoomSpring.springTo(t),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:t,refPoint:n,immediately:r}),this},setRotation:function(t){return this.viewer&&this.viewer.drawer.canRotate()?(this.degrees=e.positiveModulo(t,360),this._setContentBounds(this.viewer.world.getHomeBounds(),this.viewer.world.getContentFactor()),this.viewer.forceRedraw(),this.viewer.raiseEvent("rotate",{degrees:t}),this):this},getRotation:function(){return this.degrees},resize:function(e,t){var n,r=this.getBoundsNoRotate(),o=r;return this.containerSize.x=e.x,this.containerSize.y=e.y,this._updateContainerInnerSize(),t&&(n=e.x/this.containerSize.x,o.width=r.width*n,o.height=o.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:e,maintain:t}),this.fitBounds(o,!0)},_updateContainerInnerSize:function(){this._containerInnerSize=new e.Point(Math.max(1,this.containerSize.x-(this._margins.left+this._margins.right)),Math.max(1,this.containerSize.y-(this._margins.top+this._margins.bottom)))},update:function(){var e=this;this._adjustCenterSpringsForZoomPoint((function(){e.zoomSpring.update()})),this.centerSpringX.update(),this.centerSpringY.update();var t=this.centerSpringX.current.value!==this._oldCenterX||this.centerSpringY.current.value!==this._oldCenterY||this.zoomSpring.current.value!==this._oldZoom;return this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,t},_adjustCenterSpringsForZoomPoint:function(e){if(this.zoomPoint){var t=this.pixelFromPoint(this.zoomPoint,!0);e();var n=this.pixelFromPoint(this.zoomPoint,!0).minus(t),r=this.deltaPointsFromPixels(n,!0);this.centerSpringX.shiftBy(r.x),this.centerSpringY.shiftBy(r.y),this.zoomSpring.isAtTargetValue()&&(this.zoomPoint=null)}else e()},deltaPixelsFromPointsNoRotate:function(e,t){return e.times(this._containerInnerSize.x*this.getZoom(t))},deltaPixelsFromPoints:function(e,t){return this.deltaPixelsFromPointsNoRotate(e.rotate(this.getRotation()),t)},deltaPointsFromPixelsNoRotate:function(e,t){return e.divide(this._containerInnerSize.x*this.getZoom(t))},deltaPointsFromPixels:function(e,t){return this.deltaPointsFromPixelsNoRotate(e,t).rotate(-this.getRotation())},pixelFromPointNoRotate:function(e,t){return this._pixelFromPointNoRotate(e,this.getBoundsNoRotate(t))},pixelFromPoint:function(e,t){return this._pixelFromPoint(e,this.getBoundsNoRotate(t))},_pixelFromPointNoRotate:function(t,n){return t.minus(n.getTopLeft()).times(this._containerInnerSize.x/n.width).plus(new e.Point(this._margins.left,this._margins.top))},_pixelFromPoint:function(e,t){return this._pixelFromPointNoRotate(e.rotate(this.getRotation(),this.getCenter(!0)),t)},pointFromPixelNoRotate:function(t,n){var r=this.getBoundsNoRotate(n);return t.minus(new e.Point(this._margins.left,this._margins.top)).divide(this._containerInnerSize.x/r.width).plus(r.getTopLeft())},pointFromPixel:function(e,t){return this.pointFromPixelNoRotate(e,t).rotate(-this.getRotation(),this.getCenter(!0))},_viewportToImageDelta:function(t,n){var r=this._contentBoundsNoRotate.width;return new e.Point(t*this._contentSizeNoRotate.x/r,n*this._contentSizeNoRotate.x/r)},viewportToImageCoordinates:function(t,n){if(t instanceof e.Point)return this.viewportToImageCoordinates(t.x,t.y);if(this.viewer){var r=this.viewer.world.getItemCount();if(r>1)e.console.error("[Viewport.viewportToImageCoordinates] is not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead.");else if(1===r){return this.viewer.world.getItemAt(0).viewportToImageCoordinates(t,n,!0)}}return this._viewportToImageDelta(t-this._contentBoundsNoRotate.x,n-this._contentBoundsNoRotate.y)},_imageToViewportDelta:function(t,n){var r=this._contentBoundsNoRotate.width;return new e.Point(t/this._contentSizeNoRotate.x*r,n/this._contentSizeNoRotate.x*r)},imageToViewportCoordinates:function(t,n){if(t instanceof e.Point)return this.imageToViewportCoordinates(t.x,t.y);if(this.viewer){var r=this.viewer.world.getItemCount();if(r>1)e.console.error("[Viewport.imageToViewportCoordinates] is not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.");else if(1===r){return this.viewer.world.getItemAt(0).imageToViewportCoordinates(t,n,!0)}}var o=this._imageToViewportDelta(t,n);return o.x+=this._contentBoundsNoRotate.x,o.y+=this._contentBoundsNoRotate.y,o},imageToViewportRectangle:function(t,n,r,o){var i=t;if(i instanceof e.Rect||(i=new e.Rect(t,n,r,o)),this.viewer){var a=this.viewer.world.getItemCount();if(a>1)e.console.error("[Viewport.imageToViewportRectangle] is not accurate with multi-image; use TiledImage.imageToViewportRectangle instead.");else if(1===a){return this.viewer.world.getItemAt(0).imageToViewportRectangle(t,n,r,o,!0)}}var s=this.imageToViewportCoordinates(i.x,i.y),c=this._imageToViewportDelta(i.width,i.height);return new e.Rect(s.x,s.y,c.x,c.y,i.degrees)},viewportToImageRectangle:function(t,n,r,o){var i=t;if(i instanceof e.Rect||(i=new e.Rect(t,n,r,o)),this.viewer){var a=this.viewer.world.getItemCount();if(a>1)e.console.error("[Viewport.viewportToImageRectangle] is not accurate with multi-image; use TiledImage.viewportToImageRectangle instead.");else if(1===a){return this.viewer.world.getItemAt(0).viewportToImageRectangle(t,n,r,o,!0)}}var s=this.viewportToImageCoordinates(i.x,i.y),c=this._viewportToImageDelta(i.width,i.height);return new e.Rect(s.x,s.y,c.x,c.y,i.degrees)},viewerElementToImageCoordinates:function(e){var t=this.pointFromPixel(e,!0);return this.viewportToImageCoordinates(t)},imageToViewerElementCoordinates:function(e){var t=this.imageToViewportCoordinates(e);return this.pixelFromPoint(t,!0)},windowToImageCoordinates:function(t){e.console.assert(this.viewer,"[Viewport.windowToImageCoordinates] the viewport must have a viewer.");var n=t.minus(e.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(n)},imageToWindowCoordinates:function(t){return e.console.assert(this.viewer,"[Viewport.imageToWindowCoordinates] the viewport must have a viewer."),this.imageToViewerElementCoordinates(t).plus(e.getElementPosition(this.viewer.element))},viewerElementToViewportCoordinates:function(e){return this.pointFromPixel(e,!0)},viewportToViewerElementCoordinates:function(e){return this.pixelFromPoint(e,!0)},viewerElementToViewportRectangle:function(t){return e.Rect.fromSummits(this.pointFromPixel(t.getTopLeft(),!0),this.pointFromPixel(t.getTopRight(),!0),this.pointFromPixel(t.getBottomLeft(),!0))},viewportToViewerElementRectangle:function(t){return e.Rect.fromSummits(this.pixelFromPoint(t.getTopLeft(),!0),this.pixelFromPoint(t.getTopRight(),!0),this.pixelFromPoint(t.getBottomLeft(),!0))},windowToViewportCoordinates:function(t){e.console.assert(this.viewer,"[Viewport.windowToViewportCoordinates] the viewport must have a viewer.");var n=t.minus(e.getElementPosition(this.viewer.element));return this.viewerElementToViewportCoordinates(n)},viewportToWindowCoordinates:function(t){return e.console.assert(this.viewer,"[Viewport.viewportToWindowCoordinates] the viewport must have a viewer."),this.viewportToViewerElementCoordinates(t).plus(e.getElementPosition(this.viewer.element))},viewportToImageZoom:function(t){if(this.viewer){var n=this.viewer.world.getItemCount();if(n>1)e.console.error("[Viewport.viewportToImageZoom] is not accurate with multi-image.");else if(1===n){return this.viewer.world.getItemAt(0).viewportToImageZoom(t)}}var r=this._contentSizeNoRotate.x;return t*(this._containerInnerSize.x/r*this._contentBoundsNoRotate.width)},imageToViewportZoom:function(t){if(this.viewer){var n=this.viewer.world.getItemCount();if(n>1)e.console.error("[Viewport.imageToViewportZoom] is not accurate with multi-image.");else if(1===n){return this.viewer.world.getItemAt(0).imageToViewportZoom(t)}}return t*(this._contentSizeNoRotate.x/this._containerInnerSize.x/this._contentBoundsNoRotate.width)},toggleFlip:function(){return this.setFlip(!this.getFlip()),this},getFlip:function(){return this.flipped},setFlip:function(e){return this.flipped===e||(this.flipped=e,this.viewer.navigator&&this.viewer.navigator.setFlip(this.getFlip()),this.viewer.forceRedraw(),this.viewer.raiseEvent("flip",{flipped:e})),this}}}(OpenSeadragon),function(e){function t(e,t,r,o,i,a,c,l,u){var d=c.getBoundingBox().getTopLeft(),p=c.getBoundingBox().getBottomRight();e.viewer&&e.viewer.raiseEvent("update-level",{tiledImage:e,havedrawn:t,level:o,opacity:i,visibility:a,drawArea:c,topleft:d,bottomright:p,currenttime:l,best:u}),s(e.coverage,o),s(e.loadingCoverage,o);for(var h=e._getCornerTiles(o,d,p),f=h.topLeft,m=h.bottomRight,g=e.source.getNumTiles(o),v=e.viewport.pixelFromPoint(e.viewport.getCenter()),y=f.x;y<=m.x;y++)for(var b=f.y;b<=m.y;b++){if(!e.wrapHorizontal&&!e.wrapVertical){var w=e.source.getTileBounds(o,y,b);if(null===c.intersection(w))continue}u=n(e,r,t,y,b,o,i,a,v,g,l,u)}return u}function n(t,n,o,s,c,l,u,d,p,h,f,m){var g=function(t,n,r,o,i,a,s,c,l,u){var d,p,h,f,m,g,v,y,b;a[r]||(a[r]={});a[r][t]||(a[r][t]={});a[r][t][n]||(d=(c.x+t%c.x)%c.x,p=(c.y+n%c.y)%c.y,h=i.getTileBounds(r,d,p),f=i.getTileBounds(r,d,p,!0),m=i.tileExists(r,d,p),g=i.getTileUrl(r,d,p),o.loadTilesWithAjax?(v=i.getTileAjaxHeaders(r,d,p),e.isPlainObject(o.ajaxHeaders)&&(v=e.extend({},o.ajaxHeaders,v))):v=null,y=i.getContext2D?i.getContext2D(r,d,p):void 0,h.x+=(t-d)/c.x,h.y+=u/l*((n-p)/c.y),b=new e.Tile(r,t,n,h,m,g,y,o.loadTilesWithAjax,v,f),d===c.x-1&&(b.isRightMost=!0),p===c.y-1&&(b.isBottomMost=!0),a[r][t][n]=b);return(b=a[r][t][n]).lastTouchTime=s,b}(s,c,l,t,t.source,t.tilesMatrix,f,h,t._worldWidthCurrent,t._worldHeightCurrent),v=o;t.viewer&&t.viewer.raiseEvent("update-tile",{tiledImage:t,tile:g}),a(t.coverage,l,s,c,!1);var y=g.loaded||g.loading||i(t.loadingCoverage,l,s,c);if(a(t.loadingCoverage,l,s,c,y),!g.exists)return m;if(n&&!v&&(i(t.coverage,l,s,c)?a(t.coverage,l,s,c,!0):v=!0),!v)return m;if(function(t,n,r,o,i,a){var s=t.bounds.getTopLeft();s.x*=a._scaleSpring.current.value,s.y*=a._scaleSpring.current.value,s.x+=a._xSpring.current.value,s.y+=a._ySpring.current.value;var c=t.bounds.getSize();c.x*=a._scaleSpring.current.value,c.y*=a._scaleSpring.current.value;var l=r.pixelFromPointNoRotate(s,!0),u=r.pixelFromPointNoRotate(s,!1),d=r.deltaPixelsFromPointsNoRotate(c,!0),p=r.deltaPixelsFromPointsNoRotate(c,!1),h=u.plus(p.divide(2)),f=o.squaredDistanceTo(h);n||(d=d.plus(new e.Point(1,1)));t.isRightMost&&a.wrapHorizontal&&(d.x+=.75);t.isBottomMost&&a.wrapVertical&&(d.y+=.75);t.position=l,t.size=d,t.squaredDistance=f,t.visibility=i}(g,t.source.tileOverlap,t.viewport,p,d,t),!g.loaded)if(g.context2D)r(t,g);else{var b=t._tileCache.getImageRecord(g.cacheKey);if(b)r(t,g,b.getImage())}g.loaded?function(e,t,n,r,o,i,s){var c,l,u=1e3*e.blendTime;t.blendStart||(t.blendStart=s);c=s-t.blendStart,l=u?Math.min(1,c/u):1,e.alwaysBlend&&(l*=i);if(t.opacity=l,e.lastDrawn.push(t),1===l)a(e.coverage,o,n,r,!0),e._hasOpaqueTile=!0;else if(c<u)return!0;return!1}(t,g,s,c,l,u,f)&&(t._needsDraw=!0):g.loading?t._tilesLoading++:y||(m=function(e,t){if(!e)return t;if(t.visibility>e.visibility)return t;if(t.visibility==e.visibility&&t.squaredDistance<e.squaredDistance)return t;return e}(m,g));return m}function r(e,t,n,r,o){var i=0;function a(){return i++,s}function s(){0===--i&&(t.loading=!1,t.loaded=!0,t.context2D||e._tileCache.cacheTile({image:n,tile:t,cutoff:r,tiledImage:e}),e._needsDraw=!0)}e.viewer.raiseEvent("tile-loaded",{tile:t,tiledImage:e,tileRequest:o,image:n,getCompletionCallback:a}),a()()}function o(e,t,n,r){var o,i,a,s;if(!e[t])return!1;if(void 0===n||void 0===r){for(a in o=e[t])if(Object.prototype.hasOwnProperty.call(o,a))for(s in i=o[a])if(Object.prototype.hasOwnProperty.call(i,s)&&!i[s])return!1;return!0}return void 0===e[t][n]||void 0===e[t][n][r]||!0===e[t][n][r]}function i(e,t,n,r){return void 0===n||void 0===r?o(e,t+1):o(e,t+1,2*n,2*r)&&o(e,t+1,2*n,2*r+1)&&o(e,t+1,2*n+1,2*r)&&o(e,t+1,2*n+1,2*r+1)}function a(t,n,r,o,i){t[n]?(t[n][r]||(t[n][r]={}),t[n][r][o]=i):e.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",n)}function s(e,t){e[t]={}}e.TiledImage=function(t){var n=this;e.console.assert(t.tileCache,"[TiledImage] options.tileCache is required"),e.console.assert(t.drawer,"[TiledImage] options.drawer is required"),e.console.assert(t.viewer,"[TiledImage] options.viewer is required"),e.console.assert(t.imageLoader,"[TiledImage] options.imageLoader is required"),e.console.assert(t.source,"[TiledImage] options.source is required"),e.console.assert(!t.clip||t.clip instanceof e.Rect,"[TiledImage] options.clip must be an OpenSeadragon.Rect if present"),e.EventSource.call(this),this._tileCache=t.tileCache,delete t.tileCache,this._drawer=t.drawer,delete t.drawer,this._imageLoader=t.imageLoader,delete t.imageLoader,t.clip instanceof e.Rect&&(this._clip=t.clip.clone()),delete t.clip;var r=t.x||0;delete t.x;var o=t.y||0;delete t.y,this.normHeight=t.source.dimensions.y/t.source.dimensions.x,this.contentAspectX=t.source.dimensions.x/t.source.dimensions.y;var i=1;t.width?(i=t.width,delete t.width,t.height&&(e.console.error("specifying both width and height to a tiledImage is not supported"),delete t.height)):t.height&&(i=t.height/this.normHeight,delete t.height);var a=t.fitBounds;delete t.fitBounds;var s=t.fitBoundsPlacement||OpenSeadragon.Placement.CENTER;delete t.fitBoundsPlacement;var c=t.degrees||0;delete t.degrees,e.extend(!0,this,{viewer:null,tilesMatrix:{},coverage:{},loadingCoverage:{},lastDrawn:[],lastResetTime:0,_midDraw:!1,_needsDraw:!0,_hasOpaqueTile:!1,_tilesLoading:0,springStiffness:e.DEFAULT_SETTINGS.springStiffness,animationTime:e.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:e.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:e.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:e.DEFAULT_SETTINGS.wrapVertical,immediateRender:e.DEFAULT_SETTINGS.immediateRender,blendTime:e.DEFAULT_SETTINGS.blendTime,alwaysBlend:e.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:e.DEFAULT_SETTINGS.minPixelRatio,smoothTileEdgesMinZoom:e.DEFAULT_SETTINGS.smoothTileEdgesMinZoom,iOSDevice:e.DEFAULT_SETTINGS.iOSDevice,debugMode:e.DEFAULT_SETTINGS.debugMode,crossOriginPolicy:e.DEFAULT_SETTINGS.crossOriginPolicy,ajaxWithCredentials:e.DEFAULT_SETTINGS.ajaxWithCredentials,placeholderFillStyle:e.DEFAULT_SETTINGS.placeholderFillStyle,opacity:e.DEFAULT_SETTINGS.opacity,preload:e.DEFAULT_SETTINGS.preload,compositeOperation:e.DEFAULT_SETTINGS.compositeOperation},t),this._preload=this.preload,delete this.preload,this._fullyLoaded=!1,this._xSpring=new e.Spring({initial:r,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._ySpring=new e.Spring({initial:o,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._scaleSpring=new e.Spring({initial:i,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._degreesSpring=new e.Spring({initial:c,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._updateForScale(),a&&this.fitBounds(a,s,!0),this._drawingHandler=function(t){n.viewer.raiseEvent("tile-drawing",e.extend({tiledImage:n},t))}},e.extend(e.TiledImage.prototype,e.EventSource.prototype,{needsDraw:function(){return this._needsDraw},getFullyLoaded:function(){return this._fullyLoaded},_setFullyLoaded:function(e){e!==this._fullyLoaded&&(this._fullyLoaded=e,this.raiseEvent("fully-loaded-change",{fullyLoaded:this._fullyLoaded}))},reset:function(){this._tileCache.clearTilesFor(this),this.lastResetTime=e.now(),this._needsDraw=!0},update:function(){var e=this._xSpring.update(),t=this._ySpring.update(),n=this._scaleSpring.update(),r=this._degreesSpring.update();return!!(e||t||n||r)&&(this._updateForScale(),this._needsDraw=!0,!0)},draw:function(){0!==this.opacity||this._preload?(this._midDraw=!0,this._updateViewport(),this._midDraw=!1):this._needsDraw=!1},destroy:function(){this.reset()},getBounds:function(e){return this.getBoundsNoRotate(e).rotate(this.getRotation(e),this._getRotationPoint(e))},getBoundsNoRotate:function(t){return t?new e.Rect(this._xSpring.current.value,this._ySpring.current.value,this._worldWidthCurrent,this._worldHeightCurrent):new e.Rect(this._xSpring.target.value,this._ySpring.target.value,this._worldWidthTarget,this._worldHeightTarget)},getWorldBounds:function(){return e.console.error("[TiledImage.getWorldBounds] is deprecated; use TiledImage.getBounds instead"),this.getBounds()},getClippedBounds:function(t){var n=this.getBoundsNoRotate(t);if(this._clip){var r=(t?this._worldWidthCurrent:this._worldWidthTarget)/this.source.dimensions.x,o=this._clip.times(r);n=new e.Rect(n.x+o.x,n.y+o.y,o.width,o.height)}return n.rotate(this.getRotation(t),this._getRotationPoint(t))},getContentSize:function(){return new e.Point(this.source.dimensions.x,this.source.dimensions.y)},_viewportToImageDelta:function(t,n,r){var o=r?this._scaleSpring.current.value:this._scaleSpring.target.value;return new e.Point(t*(this.source.dimensions.x/o),n*(this.source.dimensions.y*this.contentAspectX/o))},viewportToImageCoordinates:function(t,n,r){var o;return t instanceof e.Point?(r=n,o=t):o=new e.Point(t,n),o=o.rotate(-this.getRotation(r),this._getRotationPoint(r)),r?this._viewportToImageDelta(o.x-this._xSpring.current.value,o.y-this._ySpring.current.value):this._viewportToImageDelta(o.x-this._xSpring.target.value,o.y-this._ySpring.target.value)},_imageToViewportDelta:function(t,n,r){var o=r?this._scaleSpring.current.value:this._scaleSpring.target.value;return new e.Point(t/this.source.dimensions.x*o,n/this.source.dimensions.y/this.contentAspectX*o)},imageToViewportCoordinates:function(t,n,r){t instanceof e.Point&&(r=n,n=t.y,t=t.x);var o=this._imageToViewportDelta(t,n);return r?(o.x+=this._xSpring.current.value,o.y+=this._ySpring.current.value):(o.x+=this._xSpring.target.value,o.y+=this._ySpring.target.value),o.rotate(this.getRotation(r),this._getRotationPoint(r))},imageToViewportRectangle:function(t,n,r,o,i){var a=t;a instanceof e.Rect?i=n:a=new e.Rect(t,n,r,o);var s=this.imageToViewportCoordinates(a.getTopLeft(),i),c=this._imageToViewportDelta(a.width,a.height,i);return new e.Rect(s.x,s.y,c.x,c.y,a.degrees+this.getRotation(i))},viewportToImageRectangle:function(t,n,r,o,i){var a=t;t instanceof e.Rect?i=n:a=new e.Rect(t,n,r,o);var s=this.viewportToImageCoordinates(a.getTopLeft(),i),c=this._viewportToImageDelta(a.width,a.height,i);return new e.Rect(s.x,s.y,c.x,c.y,a.degrees-this.getRotation(i))},viewerElementToImageCoordinates:function(e){var t=this.viewport.pointFromPixel(e,!0);return this.viewportToImageCoordinates(t)},imageToViewerElementCoordinates:function(e){var t=this.imageToViewportCoordinates(e);return this.viewport.pixelFromPoint(t,!0)},windowToImageCoordinates:function(e){var t=e.minus(OpenSeadragon.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(t)},imageToWindowCoordinates:function(e){return this.imageToViewerElementCoordinates(e).plus(OpenSeadragon.getElementPosition(this.viewer.element))},_viewportToTiledImageRectangle:function(t){var n=this._scaleSpring.current.value;return t=t.rotate(-this.getRotation(!0),this._getRotationPoint(!0)),new e.Rect((t.x-this._xSpring.current.value)/n,(t.y-this._ySpring.current.value)/n,t.width/n,t.height/n,t.degrees)},viewportToImageZoom:function(e){return this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x*e},imageToViewportZoom:function(e){return e/(this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x)},setPosition:function(e,t){var n=this._xSpring.target.value===e.x&&this._ySpring.target.value===e.y;if(t){if(n&&this._xSpring.current.value===e.x&&this._ySpring.current.value===e.y)return;this._xSpring.resetTo(e.x),this._ySpring.resetTo(e.y),this._needsDraw=!0}else{if(n)return;this._xSpring.springTo(e.x),this._ySpring.springTo(e.y),this._needsDraw=!0}n||this._raiseBoundsChange()},setWidth:function(e,t){this._setScale(e,t)},setHeight:function(e,t){this._setScale(e/this.normHeight,t)},setCroppingPolygons:function(t){var n=function(t){return t.map((function(t){try{if(function(t){return t instanceof e.Point||"number"==typeof t.x&&"number"==typeof t.y}(t))return{x:t.x,y:t.y};throw new Error}catch(e){throw new Error("A Provided cropping polygon point is not supported")}}))};try{if(!e.isArray(t))throw new Error("Provided cropping polygon is not an array");this._croppingPolygons=t.map((function(e){return n(e)}))}catch(t){e.console.error("[TiledImage.setCroppingPolygons] Cropping polygon format not supported"),e.console.error(t),this._croppingPolygons=null}},resetCroppingPolygons:function(){this._croppingPolygons=null},fitBounds:function(t,n,r){n=n||e.Placement.CENTER;var o=e.Placement.properties[n],i=this.contentAspectX,a=0,s=0,c=1,l=1;if(this._clip&&(i=this._clip.getAspectRatio(),c=this._clip.width/this.source.dimensions.x,l=this._clip.height/this.source.dimensions.y,t.getAspectRatio()>i?(a=this._clip.x/this._clip.height*t.height,s=this._clip.y/this._clip.height*t.height):(a=this._clip.x/this._clip.width*t.width,s=this._clip.y/this._clip.width*t.width)),t.getAspectRatio()>i){var u=t.height/l,d=0;o.isHorizontallyCentered?d=(t.width-t.height*i)/2:o.isRight&&(d=t.width-t.height*i),this.setPosition(new e.Point(t.x-a+d,t.y-s),r),this.setHeight(u,r)}else{var p=t.width/c,h=0;o.isVerticallyCentered?h=(t.height-t.width/i)/2:o.isBottom&&(h=t.height-t.width/i),this.setPosition(new e.Point(t.x-a,t.y-s+h),r),this.setWidth(p,r)}},getClip:function(){return this._clip?this._clip.clone():null},setClip:function(t){e.console.assert(!t||t instanceof e.Rect,"[TiledImage.setClip] newClip must be an OpenSeadragon.Rect or null"),t instanceof e.Rect?this._clip=t.clone():this._clip=null,this._needsDraw=!0,this.raiseEvent("clip-change")},getOpacity:function(){return this.opacity},setOpacity:function(e){e!==this.opacity&&(this.opacity=e,this._needsDraw=!0,this.raiseEvent("opacity-change",{opacity:this.opacity}))},getPreload:function(){return this._preload},setPreload:function(e){this._preload=!!e,this._needsDraw=!0},getRotation:function(e){return e?this._degreesSpring.current.value:this._degreesSpring.target.value},setRotation:function(e,t){this._degreesSpring.target.value===e&&this._degreesSpring.isAtTargetValue()||(t?this._degreesSpring.resetTo(e):this._degreesSpring.springTo(e),this._needsDraw=!0,this._raiseBoundsChange())},_getRotationPoint:function(e){return this.getBoundsNoRotate(e).getCenter()},getCompositeOperation:function(){return this.compositeOperation},setCompositeOperation:function(e){e!==this.compositeOperation&&(this.compositeOperation=e,this._needsDraw=!0,this.raiseEvent("composite-operation-change",{compositeOperation:this.compositeOperation}))},_setScale:function(e,t){var n=this._scaleSpring.target.value===e;if(t){if(n&&this._scaleSpring.current.value===e)return;this._scaleSpring.resetTo(e),this._updateForScale(),this._needsDraw=!0}else{if(n)return;this._scaleSpring.springTo(e),this._updateForScale(),this._needsDraw=!0}n||this._raiseBoundsChange()},_updateForScale:function(){this._worldWidthTarget=this._scaleSpring.target.value,this._worldHeightTarget=this.normHeight*this._scaleSpring.target.value,this._worldWidthCurrent=this._scaleSpring.current.value,this._worldHeightCurrent=this.normHeight*this._scaleSpring.current.value},_raiseBoundsChange:function(){this.raiseEvent("bounds-change")},_isBottomItem:function(){return this.viewer.world.getItemAt(0)===this},_getLevelsInterval:function(){var e=Math.max(this.source.minLevel,Math.floor(Math.log(this.minZoomImageRatio)/Math.log(2))),t=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(0),!0).x*this._scaleSpring.current.value,n=Math.min(Math.abs(this.source.maxLevel),Math.abs(Math.floor(Math.log(t/this.minPixelRatio)/Math.log(2))));return n=Math.max(n,this.source.minLevel||0),{lowestLevel:e=Math.min(e,n),highestLevel:n}},_updateViewport:function(){for(this._needsDraw=!1,this._tilesLoading=0,this.loadingCoverage={};this.lastDrawn.length>0;){this.lastDrawn.pop().beingDrawn=!1}var n=this.viewport,i=this._viewportToTiledImageRectangle(n.getBoundsWithMargins(!0));if(!this.wrapHorizontal&&!this.wrapVertical){var a=this._viewportToTiledImageRectangle(this.getClippedBounds(!0));if(null===(i=i.intersection(a)))return}for(var s=this._getLevelsInterval(),c=s.lowestLevel,l=s.highestLevel,u=null,d=!1,p=e.now(),h=l;h>=c;h--){var f=!1,m=n.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(h),!0).x*this._scaleSpring.current.value;if(h===c||!d&&m>=this.minPixelRatio)f=!0,d=!0;else if(!d)continue;var g=n.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(h),!1).x*this._scaleSpring.current.value,v=n.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Math.max(this.source.getClosestLevel(),0)),!1).x*this._scaleSpring.current.value,y=this.immediateRender?1:v;if(u=t(this,d,f,h,Math.min(1,(m-.5)/.5),y/Math.abs(y-g),i,p,u),o(this.coverage,h))break}!function(t,n){if(0===t.opacity||0===n.length&&!t.placeholderFillStyle)return;var r,o,i,a=n[0];a&&(r=t.opacity<1||t.compositeOperation&&"source-over"!==t.compositeOperation||!t._isBottomItem()&&a._hasTransparencyChannel());var s,c=t.viewport.getZoom(!0),l=t.viewportToImageZoom(c);n.length>1&&l>t.smoothTileEdgesMinZoom&&!t.iOSDevice&&t.getRotation(!0)%360==0&&e.supportsCanvas&&(r=!0,o=a.getScaleForEdgeSmoothing(),i=a.getTranslationForEdgeSmoothing(o,t._drawer.getCanvasSize(!1),t._drawer.getCanvasSize(!0)));r&&(o||(s=t.viewport.viewportToViewerElementRectangle(t.getClippedBounds(!0)).getIntegerBoundingBox(),t._drawer.viewer.viewport.getFlip()&&(0===t.viewport.degrees&&t.getRotation(!0)%360==0||(s.x=t._drawer.viewer.container.clientWidth-(s.x+s.width))),s=s.times(e.pixelDensityRatio)),t._drawer._clear(!0,s));o||(0!==t.viewport.degrees&&t._drawer._offsetForRotation({degrees:t.viewport.degrees,useSketch:r}),t.getRotation(!0)%360!=0&&t._drawer._offsetForRotation({degrees:t.getRotation(!0),point:t.viewport.pixelFromPointNoRotate(t._getRotationPoint(!0),!0),useSketch:r}),0===t.viewport.degrees&&t.getRotation(!0)%360==0&&t._drawer.viewer.viewport.getFlip()&&t._drawer._flip());var u=!1;if(t._clip){t._drawer.saveContext(r);var d=t.imageToViewportRectangle(t._clip,!0);d=d.rotate(-t.getRotation(!0),t._getRotationPoint(!0));var p=t._drawer.viewportToDrawerRectangle(d);o&&(p=p.times(o)),i&&(p=p.translate(i)),t._drawer.setClip(p,r),u=!0}if(t._croppingPolygons){t._drawer.saveContext(r);try{var h=t._croppingPolygons.map((function(e){return e.map((function(e){var n=t.imageToViewportCoordinates(e.x,e.y,!0).rotate(-t.getRotation(!0),t._getRotationPoint(!0)),r=t._drawer.viewportCoordToDrawerCoord(n);return o&&(r=r.times(o)),r}))}));t._drawer.clipWithPolygons(h,r)}catch(t){e.console.error(t)}u=!0}if(t.placeholderFillStyle&&!1===t._hasOpaqueTile){var f=t._drawer.viewportToDrawerRectangle(t.getBounds(!0));o&&(f=f.times(o)),i&&(f=f.translate(i));var m=null;m="function"==typeof t.placeholderFillStyle?t.placeholderFillStyle(t,t._drawer.context):t.placeholderFillStyle,t._drawer.drawRectangle(f,m,r)}for(var g=n.length-1;g>=0;g--)a=n[g],t._drawer.drawTile(a,t._drawingHandler,r,o,i),a.beingDrawn=!0,t.viewer&&t.viewer.raiseEvent("tile-drawn",{tiledImage:t,tile:a});u&&t._drawer.restoreContext(r);o||(t.getRotation(!0)%360!=0&&t._drawer._restoreRotationChanges(r),0!==t.viewport.degrees&&t._drawer._restoreRotationChanges(r));r&&(o&&(0!==t.viewport.degrees&&t._drawer._offsetForRotation({degrees:t.viewport.degrees,useSketch:!1}),t.getRotation(!0)%360!=0&&t._drawer._offsetForRotation({degrees:t.getRotation(!0),point:t.viewport.pixelFromPointNoRotate(t._getRotationPoint(!0),!0),useSketch:!1})),t._drawer.blendSketch({opacity:t.opacity,scale:o,translate:i,compositeOperation:t.compositeOperation,bounds:s}),o&&(t.getRotation(!0)%360!=0&&t._drawer._restoreRotationChanges(!1),0!==t.viewport.degrees&&t._drawer._restoreRotationChanges(!1)));o||0===t.viewport.degrees&&t.getRotation(!0)%360==0&&t._drawer.viewer.viewport.getFlip()&&t._drawer._flip();!function(t,n){if(t.debugMode)for(var r=n.length-1;r>=0;r--){var o=n[r];try{t._drawer.drawDebugInfo(o,n.length,r,t)}catch(t){e.console.error(t)}}}(t,n)}(this,this.lastDrawn),u&&!u.context2D?(!function(t,n,o){n.loading=!0,t._imageLoader.addJob({src:n.url,loadWithAjax:n.loadWithAjax,ajaxHeaders:n.ajaxHeaders,crossOriginPolicy:t.crossOriginPolicy,ajaxWithCredentials:t.ajaxWithCredentials,callback:function(i,a,s){!function(t,n,o,i,a,s){if(!i)return e.console.log("Tile %s failed to load: %s - error: %s",n,n.url,a),t.viewer.raiseEvent("tile-load-failed",{tile:n,tiledImage:t,time:o,message:a,tileRequest:s}),n.loading=!1,void(n.exists=!1);if(o<t.lastResetTime)return e.console.log("Ignoring tile %s loaded before reset: %s",n,n.url),void(n.loading=!1);var c=function(){var e=t.source.getClosestLevel();r(t,n,i,e,s)};t._midDraw?window.setTimeout(c,1):c()}(t,n,o,i,a,s)},abort:function(){n.loading=!1}})}(this,u,p),this._needsDraw=!0,this._setFullyLoaded(!1)):this._setFullyLoaded(0===this._tilesLoading)},_getCornerTiles:function(t,n,r){var o,i,a,s;this.wrapHorizontal?(o=e.positiveModulo(n.x,1),i=e.positiveModulo(r.x,1)):(o=Math.max(0,n.x),i=Math.min(1,r.x));var c=1/this.source.aspectRatio;this.wrapVertical?(a=e.positiveModulo(n.y,c),s=e.positiveModulo(r.y,c)):(a=Math.max(0,n.y),s=Math.min(c,r.y));var l=this.source.getTileAtPoint(t,new e.Point(o,a)),u=this.source.getTileAtPoint(t,new e.Point(i,s)),d=this.source.getNumTiles(t);return this.wrapHorizontal&&(l.x+=d.x*Math.floor(n.x),u.x+=d.x*Math.floor(r.x)),this.wrapVertical&&(l.y+=d.y*Math.floor(n.y/c),u.y+=d.y*Math.floor(r.y/c)),{topLeft:l,bottomRight:u}}})}(OpenSeadragon),function(e){var t=function(t){e.console.assert(t,"[TileCache.cacheTile] options is required"),e.console.assert(t.tile,"[TileCache.cacheTile] options.tile is required"),e.console.assert(t.tiledImage,"[TileCache.cacheTile] options.tiledImage is required"),this.tile=t.tile,this.tiledImage=t.tiledImage},n=function(t){e.console.assert(t,"[ImageRecord] options is required"),e.console.assert(t.image,"[ImageRecord] options.image is required"),this._image=t.image,this._tiles=[]};n.prototype={destroy:function(){this._image=null,this._renderedContext=null,this._tiles=null},getImage:function(){return this._image},getRenderedContext:function(){if(!this._renderedContext){var e=document.createElement("canvas");e.width=this._image.width,e.height=this._image.height,this._renderedContext=e.getContext("2d"),this._renderedContext.drawImage(this._image,0,0),this._image=null}return this._renderedContext},setRenderedContext:function(t){e.console.error("ImageRecord.setRenderedContext is deprecated. The rendered context should be created by the ImageRecord itself when calling ImageRecord.getRenderedContext."),this._renderedContext=t},addTile:function(t){e.console.assert(t,"[ImageRecord.addTile] tile is required"),this._tiles.push(t)},removeTile:function(t){for(var n=0;n<this._tiles.length;n++)if(this._tiles[n]===t)return void this._tiles.splice(n,1);e.console.warn("[ImageRecord.removeTile] trying to remove unknown tile",t)},getTileCount:function(){return this._tiles.length}},e.TileCache=function(t){t=t||{},this._maxImageCacheCount=t.maxImageCacheCount||e.DEFAULT_SETTINGS.maxImageCacheCount,this._tilesLoaded=[],this._imagesLoaded=[],this._imagesLoadedCount=0},e.TileCache.prototype={numTilesLoaded:function(){return this._tilesLoaded.length},cacheTile:function(r){e.console.assert(r,"[TileCache.cacheTile] options is required"),e.console.assert(r.tile,"[TileCache.cacheTile] options.tile is required"),e.console.assert(r.tile.cacheKey,"[TileCache.cacheTile] options.tile.cacheKey is required"),e.console.assert(r.tiledImage,"[TileCache.cacheTile] options.tiledImage is required");var o=r.cutoff||0,i=this._tilesLoaded.length,a=this._imagesLoaded[r.tile.cacheKey];if(a||(e.console.assert(r.image,"[TileCache.cacheTile] options.image is required to create an ImageRecord"),a=this._imagesLoaded[r.tile.cacheKey]=new n({image:r.image}),this._imagesLoadedCount++),a.addTile(r.tile),r.tile.cacheImageRecord=a,this._imagesLoadedCount>this._maxImageCacheCount){for(var s,c,l,u,d,p,h=null,f=-1,m=null,g=this._tilesLoaded.length-1;g>=0;g--)(s=(p=this._tilesLoaded[g]).tile).level<=o||s.beingDrawn||(h?(u=s.lastTouchTime,c=h.lastTouchTime,d=s.level,l=h.level,(u<c||u==c&&d>l)&&(h=s,f=g,m=p)):(h=s,f=g,m=p));h&&f>=0&&(this._unloadTile(m),i=f)}this._tilesLoaded[i]=new t({tile:r.tile,tiledImage:r.tiledImage})},clearTilesFor:function(t){var n;e.console.assert(t,"[TileCache.clearTilesFor] tiledImage is required");for(var r=0;r<this._tilesLoaded.length;++r)(n=this._tilesLoaded[r]).tiledImage===t&&(this._unloadTile(n),this._tilesLoaded.splice(r,1),r--)},getImageRecord:function(t){return e.console.assert(t,"[TileCache.getImageRecord] cacheKey is required"),this._imagesLoaded[t]},_unloadTile:function(t){e.console.assert(t,"[TileCache._unloadTile] tileRecord is required");var n=t.tile,r=t.tiledImage;n.unload(),n.cacheImageRecord=null;var o=this._imagesLoaded[n.cacheKey];o.removeTile(n),o.getTileCount()||(o.destroy(),delete this._imagesLoaded[n.cacheKey],this._imagesLoadedCount--),r.viewer.raiseEvent("tile-unloaded",{tile:n,tiledImage:r})}}}(OpenSeadragon),function(e){e.World=function(t){var n=this;e.console.assert(t.viewer,"[World] options.viewer is required"),e.EventSource.call(this),this.viewer=t.viewer,this._items=[],this._needsDraw=!1,this._autoRefigureSizes=!0,this._needsSizesFigured=!1,this._delegatedFigureSizes=function(e){n._autoRefigureSizes?n._figureSizes():n._needsSizesFigured=!0},this._figureSizes()},e.extend(e.World.prototype,e.EventSource.prototype,{addItem:function(t,n){if(e.console.assert(t,"[World.addItem] item is required"),e.console.assert(t instanceof e.TiledImage,"[World.addItem] only TiledImages supported at this time"),void 0!==(n=n||{}).index){var r=Math.max(0,Math.min(this._items.length,n.index));this._items.splice(r,0,t)}else this._items.push(t);this._autoRefigureSizes?this._figureSizes():this._needsSizesFigured=!0,this._needsDraw=!0,t.addHandler("bounds-change",this._delegatedFigureSizes),t.addHandler("clip-change",this._delegatedFigureSizes),this.raiseEvent("add-item",{item:t})},getItemAt:function(t){return e.console.assert(void 0!==t,"[World.getItemAt] index is required"),this._items[t]},getIndexOfItem:function(t){return e.console.assert(t,"[World.getIndexOfItem] item is required"),e.indexOf(this._items,t)},getItemCount:function(){return this._items.length},setItemIndex:function(t,n){e.console.assert(t,"[World.setItemIndex] item is required"),e.console.assert(void 0!==n,"[World.setItemIndex] index is required");var r=this.getIndexOfItem(t);if(n>=this._items.length)throw new Error("Index bigger than number of layers.");n!==r&&-1!==r&&(this._items.splice(r,1),this._items.splice(n,0,t),this._needsDraw=!0,this.raiseEvent("item-index-change",{item:t,previousIndex:r,newIndex:n}))},removeItem:function(t){e.console.assert(t,"[World.removeItem] item is required");var n=e.indexOf(this._items,t);-1!==n&&(t.removeHandler("bounds-change",this._delegatedFigureSizes),t.removeHandler("clip-change",this._delegatedFigureSizes),t.destroy(),this._items.splice(n,1),this._figureSizes(),this._needsDraw=!0,this._raiseRemoveItem(t))},removeAll:function(){var e,t;for(this.viewer._cancelPendingImages(),t=0;t<this._items.length;t++)(e=this._items[t]).removeHandler("bounds-change",this._delegatedFigureSizes),e.removeHandler("clip-change",this._delegatedFigureSizes),e.destroy();var n=this._items;for(this._items=[],this._figureSizes(),this._needsDraw=!0,t=0;t<n.length;t++)e=n[t],this._raiseRemoveItem(e)},resetItems:function(){for(var e=0;e<this._items.length;e++)this._items[e].reset()},update:function(){for(var e=!1,t=0;t<this._items.length;t++)e=this._items[t].update()||e;return e},draw:function(){for(var e=0;e<this._items.length;e++)this._items[e].draw();this._needsDraw=!1},needsDraw:function(){for(var e=0;e<this._items.length;e++)if(this._items[e].needsDraw())return!0;return this._needsDraw},getHomeBounds:function(){return this._homeBounds.clone()},getContentFactor:function(){return this._contentFactor},setAutoRefigureSizes:function(e){this._autoRefigureSizes=e,e&this._needsSizesFigured&&(this._figureSizes(),this._needsSizesFigured=!1)},arrange:function(t){var n,r=(t=t||{}).immediately||!1,o=t.layout||e.DEFAULT_SETTINGS.collectionLayout,i=t.rows||e.DEFAULT_SETTINGS.collectionRows,a=t.columns||e.DEFAULT_SETTINGS.collectionColumns,s=t.tileSize||e.DEFAULT_SETTINGS.collectionTileSize,c=s+(t.tileMargin||e.DEFAULT_SETTINGS.collectionTileMargin);n=!t.rows&&a?a:Math.ceil(this._items.length/i);var l,u,d,p,h,f=0,m=0;this.setAutoRefigureSizes(!1);for(var g=0;g<this._items.length;g++)g&&g%n==0&&("horizontal"===o?(m+=c,f=0):(f+=c,m=0)),p=(d=(u=(l=this._items[g]).getBounds()).width>u.height?s:s*(u.width/u.height))*(u.height/u.width),h=new e.Point(f+(s-d)/2,m+(s-p)/2),l.setPosition(h,r),l.setWidth(d,r),"horizontal"===o?f+=c:m+=c;this.setAutoRefigureSizes(!0)},_figureSizes:function(){var t=this._homeBounds?this._homeBounds.clone():null,n=this._contentSize?this._contentSize.clone():null,r=this._contentFactor||0;if(this._items.length){var o=this._items[0],i=o.getBounds();this._contentFactor=o.getContentSize().x/i.width;for(var a=o.getClippedBounds().getBoundingBox(),s=a.x,c=a.y,l=a.x+a.width,u=a.y+a.height,d=1;d<this._items.length;d++)i=(o=this._items[d]).getBounds(),this._contentFactor=Math.max(this._contentFactor,o.getContentSize().x/i.width),a=o.getClippedBounds().getBoundingBox(),s=Math.min(s,a.x),c=Math.min(c,a.y),l=Math.max(l,a.x+a.width),u=Math.max(u,a.y+a.height);this._homeBounds=new e.Rect(s,c,l-s,u-c),this._contentSize=new e.Point(this._homeBounds.width*this._contentFactor,this._homeBounds.height*this._contentFactor)}else this._homeBounds=new e.Rect(0,0,1,1),this._contentSize=new e.Point(1,1),this._contentFactor=1;this._contentFactor===r&&this._homeBounds.equals(t)&&this._contentSize.equals(n)||this.raiseEvent("metrics-change",{})},_raiseRemoveItem:function(e){this.raiseEvent("remove-item",{item:e})}})}(OpenSeadragon)},958:function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var o=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},959:function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,o=n;return[o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]]].join("")}},960:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.BoundingBox=void 0;var o=n(1036);!function(e){function t(e,t,n){var r=e.top,i=e.right,a=e.bottom,s=e.left;return"column"===n?(100-r-a)*t/100+r:"row"===n?(100-i-s)*t/100+s:o.assertNever(n)}e.empty=function(){return{top:0,right:0,bottom:0,left:0}},e.split=function(e,n,i){var a=t(e,n,i);return"column"===i?{first:r(r({},e),{bottom:100-a}),second:r(r({},e),{top:a})}:"row"===i?{first:r(r({},e),{right:100-a}),second:r(r({},e),{left:a})}:o.assertNever(i)},e.getAbsoluteSplitPercentage=t,e.getRelativeSplitPercentage=function(e,t,n){var r=e.top,i=e.right,a=e.bottom,s=e.left;return"column"===n?(t-r)/(100-r-a)*100:"row"===n?(t-s)/(100-i-s)*100:o.assertNever(n)},e.asStyles=function(e){return{top:e.top+"%",right:e.right+"%",bottom:e.bottom+"%",left:e.left+"%"}}}(t.BoundingBox||(t.BoundingBox={}))},961:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MosaicZeroState=void 0;var a=i(n(54)),s=i(n(296)),c=i(n(0)),l=n(934),u=n(935),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.replace=function(){return Promise.resolve(t.props.createNode()).then((function(e){return t.context.mosaicActions.replaceWith([],e)})).catch(s.default)},t}return o(t,e),t.prototype.render=function(){return c.default.createElement("div",{className:a.default("mosaic-zero-state",u.OptionalBlueprint.getClasses("NON_IDEAL_STATE"))},c.default.createElement("div",{className:u.OptionalBlueprint.getClasses("NON_IDEAL_STATE_VISUAL")},c.default.createElement(u.OptionalBlueprint.Icon,{iconSize:120,icon:"applications"})),c.default.createElement("h4",{className:u.OptionalBlueprint.getClasses("HEADING")},"No Windows Present"),c.default.createElement("div",null,this.props.createNode&&c.default.createElement("button",{className:a.default(u.OptionalBlueprint.getClasses("BUTTON"),u.OptionalBlueprint.getIconClass("ADD")),onClick:this.replace},"Add New Window")))},t.contextType=l.MosaicContext,t}(c.default.PureComponent);t.MosaicZeroState=d},962:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MosaicDropTarget=void 0;var a=i(n(54)),s=i(n(0)),c=n(485),l=n(934),u=n(941),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.position,n=e.isOver,r=e.connectDropTarget,o=e.draggedMosaicId;return r(s.default.createElement("div",{className:a.default("drop-target",t,{"drop-target-hover":n&&o===this.context.mosaicId})}))},t.contextType=l.MosaicContext,t}(s.default.PureComponent);t.MosaicDropTarget=c.DropTarget(u.MosaicDragType.WINDOW,{drop:function(e,t,n){return n.context.mosaicId===(t.getItem()||{}).mosaicId?{path:e.path,position:e.position}:{}}},(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),draggedMosaicId:(t.getItem()||{}).mosaicId}}))(d)},963:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CONTROLS_WITHOUT_CREATION=t.DEFAULT_CONTROLS_WITH_CREATION=void 0;var o=r(n(0)),i=n(964),a=n(965),s=n(966),c=n(967);t.DEFAULT_CONTROLS_WITH_CREATION=o.default.Children.toArray([o.default.createElement(s.ReplaceButton,null),o.default.createElement(c.SplitButton,null),o.default.createElement(i.ExpandButton,null),o.default.createElement(a.RemoveButton,null)]),t.DEFAULT_CONTROLS_WITHOUT_CREATION=o.default.Children.toArray([o.default.createElement(i.ExpandButton,null),o.default.createElement(a.RemoveButton,null)])},964:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExpandButton=void 0;var a=i(n(54)),s=i(n(0)),c=n(934),l=n(935),u=n(937),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.render=function(){var e=this;return s.default.createElement(c.MosaicContext.Consumer,null,(function(t){var n=t.mosaicActions;return u.createDefaultToolbarButton("Expand",a.default("expand-button",l.OptionalBlueprint.getIconClass("MAXIMIZE")),e.createExpand(n))}))},t.prototype.createExpand=function(e){var t=this;return function(){e.expand(t.context.mosaicWindowActions.getPath()),t.props.onClick&&t.props.onClick()}},t.contextType=c.MosaicWindowContext,t}(s.default.PureComponent);t.ExpandButton=d},965:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RemoveButton=void 0;var a=i(n(54)),s=i(n(0)),c=n(934),l=n(935),u=n(937),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.render=function(){var e=this;return s.default.createElement(c.MosaicContext.Consumer,null,(function(t){var n=t.mosaicActions;return u.createDefaultToolbarButton("Close Window",a.default("close-button",l.OptionalBlueprint.getIconClass("CROSS")),e.createRemove(n))}))},t.prototype.createRemove=function(e){var t=this;return function(){e.remove(t.context.mosaicWindowActions.getPath()),t.props.onClick&&t.props.onClick()}},t.contextType=c.MosaicWindowContext,t}(s.default.PureComponent);t.RemoveButton=d},966:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ReplaceButton=void 0;var a=i(n(54)),s=i(n(296)),c=i(n(0)),l=n(934),u=n(935),d=n(937),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.replace=function(){t.context.mosaicWindowActions.replaceWithNew().then((function(){t.props.onClick&&t.props.onClick()})).catch(s.default)},t}return o(t,e),t.prototype.render=function(){return d.createDefaultToolbarButton("Replace Window",a.default("replace-button",u.OptionalBlueprint.getIconClass("EXCHANGE")),this.replace)},t.contextType=l.MosaicWindowContext,t}(c.default.PureComponent);t.ReplaceButton=p},967:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SplitButton=void 0;var a=i(n(54)),s=i(n(296)),c=i(n(0)),l=n(934),u=n(935),d=n(937),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.split=function(){t.context.mosaicWindowActions.split().then((function(){t.props.onClick&&t.props.onClick()})).catch(s.default)},t}return o(t,e),t.prototype.render=function(){return d.createDefaultToolbarButton("Split Window",a.default("split-button",u.OptionalBlueprint.getIconClass("ADD_COLUMN_RIGHT")),this.split)},t.contextType=l.MosaicWindowContext,t}(c.default.PureComponent);t.SplitButton=p},968:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Separator=void 0;var a=i(n(0)),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.render=function(){return a.default.createElement("div",{className:"separator"})},t}(a.default.PureComponent);t.Separator=s},969:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(0),o=n(16),i=n(954),a=n(294),s=n(939),c=n(310),l=n(952),u=n(951);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function h(e){var t=Object(r.useRef)(e);t.current=e,Object(o.a)(null!=e.accept,"accept must be defined");var n,h=p((n=Object(c.a)(),[Object(r.useMemo)((function(){return new u.a(n)}),[n]),Object(r.useMemo)((function(){return new l.a(n.getBackend())}),[n])]),2),f=h[0],m=h[1];!function(e,t,n){var o=Object(c.a)(),i=Object(r.useMemo)((function(){return{canDrop:function(){var n=e.current.canDrop;return!n||n(t.getItem(),t)},hover:function(){var n=e.current.hover;n&&n(t.getItem(),t)},drop:function(){var n=e.current.drop;if(n)return n(t.getItem(),t)}}}),[t]);Object(a.a)((function(){var r=d(Object(s.b)(e.current.accept,i,o),2),a=r[0],c=r[1];return t.receiveHandlerId(a),n.receiveHandlerId(a),c}),[t,n])}(t,f,m);var g=Object(i.a)(f,t.current.collect||function(){return{}},(function(){return m.reconnect()})),v=Object(r.useMemo)((function(){return m.hooks.dropTarget()}),[m]);return Object(a.a)((function(){m.dropTargetOptions=e.options||null,m.reconnect()}),[e.options]),[g,v]}},970:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),o=n(16);function i(e,t){"function"==typeof e?e(t):e.current=t}function a(e,t){var n=e.ref;return Object(o.a)("string"!=typeof n,"Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://facebook.github.io/react/docs/more-about-refs.html#the-ref-callback-attribute"),n?Object(r.cloneElement)(e,{ref:function(e){i(n,e),i(t,e)}}):Object(r.cloneElement)(e,{ref:t})}function s(e){if("string"!=typeof e.type){var t=e.type.displayName||e.type.name||"the component";throw new Error("Only native element nodes can now be passed to React DnD connectors."+"You can either wrap ".concat(t," into a <div>, or turn it into a ")+"drag source or a drop target itself.")}}function c(e){var t={};return Object.keys(e).forEach((function(n){var o=e[n];if(n.endsWith("Ref"))t[n]=e[n];else{var i=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!Object(r.isValidElement)(t)){var o=t;return e(o,n),o}var i=t;s(i);var c=n?function(t){return e(t,n)}:e;return a(i,c)}}(o);t[n]=function(){return i}}})),t}},978:function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(0)),i=(0,r(n(25)).default)(o.default.createElement("path",{d:"M19 18l2 1V1H7v2h12v15zM17 5H3v18l7-3 7 3V5z"}),"BookmarksSharp");t.default=i},979:function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(0)),i=(0,r(n(25)).default)(o.default.createElement("path",{d:"M19.44 12.99l-.01.02c.04-.33.08-.67.08-1.01 0-.34-.03-.66-.07-.99l.01.02 2.44-1.92-2.43-4.22-2.87 1.16.01.01c-.52-.4-1.09-.74-1.71-1h.01L14.44 2H9.57l-.44 3.07h.01c-.62.26-1.19.6-1.71 1l.01-.01-2.88-1.17-2.44 4.22 2.44 1.92.01-.02c-.04.33-.07.65-.07.99 0 .34.03.68.08 1.01l-.01-.02-2.1 1.65-.33.26 2.43 4.2 2.88-1.15-.02-.04c.53.41 1.1.75 1.73 1.01h-.03L9.58 22h4.85s.03-.18.06-.42l.38-2.65h-.01c.62-.26 1.2-.6 1.73-1.01l-.02.04 2.88 1.15 2.43-4.2s-.14-.12-.33-.26l-2.11-1.66zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"}),"SettingsSharp");t.default=i},980:function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(0)),i=(0,r(n(25)).default)(o.default.createElement("path",{d:"M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14l-6-6z"}),"ExpandLessSharp");t.default=i},981:function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(0)),i=(0,r(n(25)).default)(o.default.createElement("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"}),"CheckSharp");t.default=i},982:function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(0)),i=(0,r(n(25)).default)(o.default.createElement("path",{d:"M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12zm3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"}),"PaletteSharp");t.default=i},983:function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(0)),i=(0,r(n(25)).default)(o.default.createElement("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHorizSharp");t.default=i},984:function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(0)),i=(0,r(n(25)).default)(o.default.createElement("path",{d:"M19 12v7H5v-7H3v9h18v-9h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2v9.67z"}),"SaveAltSharp");t.default=i},985:function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(0)),i=(0,r(n(25)).default)(o.default.createElement("path",{d:"M21 3.01H3c-1.1 0-2 .9-2 2V9h2V4.99h18v14.03H3V15H1v4.01c0 1.1.9 1.98 2 1.98h18c1.1 0 2-.88 2-1.98v-14c0-1.11-.9-2-2-2zM11 16l4-4-4-4v3H1v2h10v3z"}),"Input");t.default=i},986:function(e,t,n){"use strict";var r=n(987).CopyToClipboard;r.CopyToClipboard=r,e.exports=r},987:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CopyToClipboard=void 0;var r=i(n(0)),o=i(n(988));function i(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?h(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){function t(){var e,n;l(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return m(h(n=d(this,(e=p(t)).call.apply(e,[this].concat(a)))),"onClick",(function(e){var t=n.props,i=t.text,a=t.onCopy,s=t.children,c=t.options,l=r.default.Children.only(s),u=(0,o.default)(i,c);a&&a(i,u),l&&l.props&&"function"==typeof l.props.onClick&&l.props.onClick(e)})),n}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,e),n=t,(i=[{key:"render",value:function(){var e=this.props,t=(e.text,e.onCopy,e.options,e.children),n=c(e,["text","onCopy","options","children"]),o=r.default.Children.only(t);return r.default.cloneElement(o,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(n,!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n,{onClick:this.onClick}))}}])&&u(n.prototype,i),a&&u(n,a),t}(r.default.PureComponent);t.CopyToClipboard=g,m(g,"defaultProps",{onCopy:void 0,options:void 0})},988:function(e,t,n){"use strict";var r=n(989),o={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var n,i,a,s,c,l,u=!1;t||(t={}),n=t.debug||!1;try{if(a=r(),s=document.createRange(),c=document.getSelection(),(l=document.createElement("span")).textContent=e,l.style.all="unset",l.style.position="fixed",l.style.top=0,l.style.clip="rect(0, 0, 0, 0)",l.style.whiteSpace="pre",l.style.webkitUserSelect="text",l.style.MozUserSelect="text",l.style.msUserSelect="text",l.style.userSelect="text",l.addEventListener("copy",(function(r){if(r.stopPropagation(),t.format)if(r.preventDefault(),void 0===r.clipboardData){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var i=o[t.format]||o.default;window.clipboardData.setData(i,e)}else r.clipboardData.clearData(),r.clipboardData.setData(t.format,e);t.onCopy&&(r.preventDefault(),t.onCopy(r.clipboardData))})),document.body.appendChild(l),s.selectNodeContents(l),c.addRange(s),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");u=!0}catch(r){n&&console.error("unable to copy using execCommand: ",r),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),u=!0}catch(r){n&&console.error("unable to copy using clipboardData: ",r),n&&console.error("falling back to prompt"),i=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(i,e)}}finally{c&&("function"==typeof c.removeRange?c.removeRange(s):c.removeAllRanges()),l&&document.body.removeChild(l),a()}return u}},989:function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},990:function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(0)),i=(0,r(n(25)).default)(o.default.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");t.default=i},991:function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(0)),i=(0,r(n(25)).default)(o.default.createElement("path",{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"}),"FullscreenExitSharp");t.default=i},992:function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(0)),i=(0,r(n(25)).default)(o.default.createElement("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"}),"FullscreenSharp");t.default=i},993:function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(0)),i=(0,r(n(25)).default)(o.default.createElement("path",{d:"M4.01 2L4 22h16V8l-6-6H4.01zM13 9V3.5L18.5 9H13z"}),"InsertDriveFileSharp");t.default=i},994:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(0))&&r.__esModule?r:{default:r};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){h(e,t,n[t])}))}return e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?p(e):t}function d(e){return(d=Object.getPrototypeOf||function(e){return e.__proto__})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f={position:"absolute",left:0,top:0,right:0,bottom:0,overflow:"hidden",zIndex:-1,visibility:"hidden",pointerEvents:"none"},m={position:"absolute",left:0,top:0,transition:"0s"};function g(e,t){for(var n=e.parentNode;n;){if(n===t)return!0;n=n.parentNode}return!1}var v=function(e){function t(){var e,n,r;s(this,t);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return u(r,(n=r=u(this,(e=d(t)).call.apply(e,[this].concat(i))),h(p(p(r)),"_expandRef",null),h(p(p(r)),"_shrinkRef",null),h(p(p(r)),"_node",null),h(p(p(r)),"_lastWidth",void 0),h(p(p(r)),"_lastHeight",void 0),h(p(p(r)),"_lastRect",void 0),h(p(p(r)),"_hasResize",!1),h(p(p(r)),"_handleScroll",(function(e){(r.props.onPosition||r.props.onReflow||r.props.onResize)&&(r._globalScollTarget(e.target)||r._refScrollTarget(e.target)||r._ancestorScollTarget(e.target))&&r._reflow()})),h(p(p(r)),"_globalScollTarget",(function(e){return e instanceof Node&&(r.props.onPosition||r.props.onReflow)&&(e===document||e===document.documentElement||e===document.body)})),h(p(p(r)),"_refScrollTarget",(function(e){if(e instanceof HTMLElement&&(e===r._expandRef||e===r._shrinkRef)){var t=e.offsetWidth,n=e.offsetHeight;if(t!==r._lastWidth||n!==r._lastHeight)return r._lastWidth=t,r._lastHeight=n,r._reset(r._expandRef),r._reset(r._shrinkRef),!0}return!1})),h(p(p(r)),"_ancestorScollTarget",(function(e){return e instanceof Node&&(r.props.onPosition||r.props.onReflow)&&r._node&&g(r._node,e)})),h(p(p(r)),"_reflow",(function(){if(r._node&&r._node.parentNode instanceof Element){var e=r._node.parentNode.getBoundingClientRect(),t=!0,n=!0;r._lastRect&&(t=e.width!==r._lastRect.width||e.height!==r._lastRect.height,n=e.top!==r._lastRect.top||e.left!==r._lastRect.left),r._lastRect=e,t&&r.props.onResize&&r.props.onResize(e),n&&r.props.onPosition&&r.props.onPosition(e),(t||n)&&r.props.onReflow&&r.props.onReflow(e)}})),h(p(p(r)),"_handleRef",(function(e){r._node=e})),h(p(p(r)),"_handleExpandRef",(function(e){r._reset(e),r._expandRef=e})),h(p(p(r)),"_handleShrinkRef",(function(e){r._reset(e),r._shrinkRef=e})),n))}var n,r,i;return n=t,(r=[{key:"componentDidMount",value:function(){this._reflow(),window.addEventListener("scroll",this._handleScroll,!0),(this.props.onPosition||this.props.onReflow)&&(window.addEventListener("resize",this._reflow,!0),this._hasResize=!0)}},{key:"componentDidUpdate",value:function(){!this.props.onPosition&&!this.props.onReflow||this._hasResize?this.props.onPosition||this.props.onReflow||!this._hasResize||(window.removeEventListener("resize",this._reflow,!0),this._hasResize=!1):(window.addEventListener("resize",this._reflow,!0),this._hasResize=!0)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this._handleScroll,!0),this._hasResize&&window.removeEventListener("resize",this._reflow,!0)}},{key:"_reset",value:function(e){e&&(e.scrollLeft=1e5,e.scrollTop=1e5)}},{key:"render",value:function(){return this.props.onResize||this.props.onReflow?o.default.createElement("div",{style:f,ref:this._handleRef},o.default.createElement("div",{ref:this._handleExpandRef,style:f},o.default.createElement("div",{style:a({},m,{width:1e5,height:1e5})})),o.default.createElement("div",{ref:this._handleShrinkRef,style:f},o.default.createElement("div",{style:a({},m,{width:"200%",height:"200%"})}))):o.default.createElement("noscript",{ref:this._handleRef})}}])&&l(n.prototype,r),i&&l(n,i),function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");c(e.prototype,t&&t.prototype),t&&c(e,t)}(t,e),t}(o.default.Component);h(v,"displayName","ResizeObserver");var y=v;t.default=y},995:function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(0)),i=(0,r(n(25)).default)(o.default.createElement("path",{d:"M10 18h5V5h-5v13zm-6 0h5V5H4v13zM16 5v13h5V5h-5z"}),"ViewColumn");t.default=i},996:function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(0)),i=(0,r(n(25)).default)(o.default.createElement("path",{d:"M21 3H3v18h18V3zm-2 16H5V5h14v14zm-5.04-6.71l-2.75 3.54-1.96-2.36L6.5 17h11l-3.54-4.71z"}),"CropOriginalSharp");t.default=i},997:function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(0)),i=(0,r(n(25)).default)(o.default.createElement("path",{d:"M21 3H3v18h18V3zm-2 16H5V5h14v14z"}),"CropDinSharp");t.default=i},998:function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(0)),i=(0,r(n(25)).default)(o.default.createElement("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVertSharp");t.default=i},999:function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(0)),i=(0,r(n(25)).default)(o.default.createElement("path",{d:"M20 8h-3V6.21c0-2.61-1.91-4.94-4.51-5.19C9.51.74 7 3.08 7 6v2H4v14h16V8zm-8 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM9 8V6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9z"}),"LockSharp");t.default=i}}]);